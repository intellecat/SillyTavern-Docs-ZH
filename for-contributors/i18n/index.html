<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q5KW2CN7R1"></script>
    <script data-cfasync="false">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-Q5KW2CN7R1');</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.6.0.794745262959">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.6.0">

    <!-- Primary Meta Tags -->
    <title>国际化 (i18n) | SillyTavern傻酒馆中文文档</title>
    <meta name="title" content="国际化 (i18n) | SillyTavern傻酒馆中文文档">
    <meta name="description" content="SillyTavern 支持多种语言。本指南解释如何添加和管理翻译。">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.sillytavern.app/for-contributors/i18n/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.sillytavern.app/for-contributors/i18n/">
    <meta property="og:title" content="国际化 (i18n) | SillyTavern傻酒馆中文文档">
    <meta property="og:description" content="SillyTavern 支持多种语言。本指南解释如何添加和管理翻译。">
    <meta property="og:image" content="https://docs.sillytavern.app/static/i18n/generate-image-pre.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.sillytavern.app/for-contributors/i18n/">
    <meta property="twitter:title" content="国际化 (i18n) | SillyTavern傻酒馆中文文档">
    <meta property="twitter:description" content="SillyTavern 支持多种语言。本指南解释如何添加和管理翻译。">
    <meta property="twitter:image" content="https://docs.sillytavern.app/static/i18n/generate-image-pre.png">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../resources/css/retype.css?v=3.6.0.794745262959" rel="stylesheet">

    <script data-cfasync="false" src="../../resources/js/config.js?v=3.6.0.794745262959" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../resources/js/retype.js?v=3.6.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../resources/js/lunr.js?v=3.6.0.794745262959" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../resources/js/prism.js?v=3.6.0.794745262959" defer></script>

    <style>
        a {
            color: brown !important;
        }

        .dark a {
            color: rgb(223, 151, 18) !important;
        }

        body {
            font-family: Noto Sans, sans-serif;
        }

        .callout {
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #d2d6dc;
            border-radius: 0.375rem;
        }

        .callout p {
            margin-bottom: 0.5rem !important;
            overflow: hidden;
        }

        .callout p:last-child {
            margin-bottom: 0 !important;
        }

        .callout .fa-fw {
            margin: 1rem 0.5rem 1rem 0;
            color: slategrey;
        }

        .docs-markdown .codeblock code,
        .docs-markdown .codeblock pre {
            white-space: pre-wrap;
        }
    </style>
    <link href="/static/webfonts/NotoSans/stylesheet.css" rel="stylesheet" />
    <link href="/static/css/fontawesome.min.css" rel="stylesheet" />
    <link href="/static/css/solid.min.css" rel="stylesheet" />
    <link href="/static/css/brands.min.css" rel="stylesheet" />

</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../" class="flex items-center leading-snug text-xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../../static/logo.png">
                                <img class="max-h-10 hidden dark:inline-block" src="../../static/logo.png">
                            </span>
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">SillyTavern中文文档</span>
                        </a>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/SillyTavern/SillyTavern">GitHub</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/sillytavern">Discord</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.reddit.com/r/SillyTavernAI/">Reddit</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/SillyTavern/SillyTavern">GitHub</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/sillytavern">Discord</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.reddit.com/r/SillyTavernAI/">Reddit</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="国际化-i18n" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#国际化-i18n">#</doc-anchor-trigger>
        <span>国际化 (i18n)</span>
    </h1>
</doc-anchor-target>
<p>SillyTavern 支持多种语言。本指南解释如何添加和管理翻译。</p>
<p>您可能来到这里是因为某些文本在您的语言中未翻译，这让您感到困扰。首先，我将向您展示我是如何修复繁体中文语言环境中的一些缺失翻译的。每个翻译缺失的原因都不同，这样您就能很好地了解如何修复自己的缺失翻译。</p>
<p>在第二部分，我们将探讨</p>
<ul>
<li>SillyTavern 中的 <doc-anchor-trigger to="#%E7%BF%BB%E8%AF%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">i18n 工作原理</doc-anchor-trigger>，</li>
<li><doc-anchor-trigger to="#%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6">编写翻译</doc-anchor-trigger>和使用它们的代码，</li>
<li><doc-anchor-trigger to="#%E6%9F%A5%E6%89%BE%E7%BC%BA%E5%A4%B1%E7%9A%84%E7%BF%BB%E8%AF%91">查找缺失翻译</doc-anchor-trigger>的调试功能，</li>
<li>添加<doc-anchor-trigger to="#adding-a-new-language">新语言</doc-anchor-trigger>，</li>
<li>以及<doc-anchor-trigger to="#contributing">贡献您的更改</doc-anchor-trigger>。</li>
</ul>
<p>如果您正在开发扩展或修改核心代码，请在编写 HTML 和 JavaScript 时考虑 i18n。这样，其他人就可以将您的工作翻译成他们的语言。</p>
<p>没有人能自己掌握 15 种语言。我们一起努力让 SillyTavern 对每个人都可访问。</p>
<p><strong>世界上的每个人都应该能够在手机和电脑上使用自己的语言。</strong></p>
<hr>
<doc-anchor-target id="让我们修复一些缺失的翻译">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#让我们修复一些缺失的翻译">#</doc-anchor-trigger>
        <span>让我们修复一些缺失的翻译！</span>
    </h2>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-300"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-300" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>这 3 个问题都需要代码更改才能修复。如果您要添加新翻译，可能根本不需要修改代码。只需将翻译添加到 JSON 文件中即可。恰好最近有人向繁体中文 JSON 文件添加了大量缺失的翻译，所以剩下的问题都在代码中。在其他语言环境中，有很多缺失的翻译可以在不修改代码的情况下修复。</p>
        </div>
    </div>
</div>
<doc-anchor-target id="generate-image">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#generate-image">#</doc-anchor-trigger>
        <span><code v-pre>Generate Image</code></span>
    </h3>
</doc-anchor-target>
<p>&quot;Generate Image&quot;（生成图像）在繁体中文语言环境中未翻译。为什么？</p>
<p><figure class="content-center">
    <img src="../../static/i18n/generate-image-pre.png" alt="generate-image-pre.png">
    <figcaption class="caption">generate-image-pre.png</figcaption>
</figure>
</p>
<p>右键点击元素并检查它。您会看到 HTML：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--rendered HTML--&gt;
&lt;div class=&quot;list-group-item flex-container flexGap5 interactable&quot; id=&quot;sd_gen&quot; tabindex=&quot;0&quot;&gt;
    &lt;div data-i18n=&quot;[title]Trigger Stable Diffusion&quot; title=&quot;觸發 Stable Diffusion&quot;
         class=&quot;fa-solid fa-paintbrush extensionsMenuExtensionButton&quot;&gt;&lt;/div&gt;
    &lt;span&gt;Generate Image&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>它的 <code v-pre>data-i18n</code> 属性在哪里？它缺失了！让我们添加它。我们在源代码中找到它：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--public/scripts/extensions/stable-diffusion/button.html--&gt;
&lt;div id=&quot;sd_gen&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
    &lt;div class=&quot;fa-solid fa-paintbrush extensionsMenuExtensionButton&quot; title=&quot;Trigger Stable Diffusion&quot;
         data-i18n=&quot;[title]Trigger Stable Diffusion&quot;&gt;&lt;/div&gt;
    &lt;span&gt;Generate Image&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&quot;sd_stop_gen&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
    &lt;div class=&quot;fa-solid fa-circle-stop extensionsMenuExtensionButton&quot; title=&quot;Abort current image generation task&quot;
         data-i18n=&quot;[title]Abort current image generation task&quot;&gt;&lt;/div&gt;
    &lt;span&gt;Stop Image Generation&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>我们很幸运，字符串 <code v-pre>Generate Image</code> 在许多语言文件中都有，包括繁体中文。</p>
<p><figure class="content-center">
    <img src="../../static/i18n/generate-image-lang.png" alt="generate-image-lang.png">
    <figcaption class="caption">generate-image-lang.png</figcaption>
</figure>
</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Generate Image&quot;: &quot;生成图片&quot;
}</code></pre>
</doc-codeblock></div>
<p>为什么它没有显示出来？我们必须正确连接元素：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--public/scripts/extensions/stable-diffusion/button.html--&gt;
&lt;div id=&quot;sd_gen&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
    &lt;div class=&quot;fa-solid fa-paintbrush extensionsMenuExtensionButton&quot; title=&quot;Trigger Stable Diffusion&quot;
         data-i18n=&quot;[title]Trigger Stable Diffusion&quot;&gt;&lt;/div&gt;
    &lt;span data-i18n=&quot;Generate Image&quot;&gt;Generate Image&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&quot;sd_stop_gen&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
    &lt;div class=&quot;fa-solid fa-circle-stop extensionsMenuExtensionButton&quot; title=&quot;Abort current image generation task&quot;
         data-i18n=&quot;[title]Abort current image generation task&quot;&gt;&lt;/div&gt;
    &lt;span&gt;Stop Image Generation&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>现在它可以工作了！重新加载页面看看。</p>
<p><figure class="content-center">
    <img src="../../static/i18n/generate-image-post.png" alt="generate-image-post.png">
    <figcaption class="caption">generate-image-post.png</figcaption>
</figure>
</p>
<p>但是当我们打开 HTML 时，下面的 <code v-pre>Stop Image Generation</code> 是怎么回事？HTML 看起来不对。</p>
<p>如果我们生成图像，然后在生成时打开魔杖菜单，我们会看到未翻译的文本。</p>
<p><figure class="content-center">
    <img src="../../static/i18n/stop-generating-image-pre.png" alt="stop-generating-image-pre.png">
    <figcaption class="caption">stop-generating-image-pre.png</figcaption>
</figure>
</p>
<p>首先修复 HTML：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--public/scripts/extensions/stable-diffusion/button.html--&gt;
&lt;div id=&quot;sd_gen&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
    &lt;div class=&quot;fa-solid fa-paintbrush extensionsMenuExtensionButton&quot; title=&quot;Trigger Stable Diffusion&quot;
         data-i18n=&quot;[title]Trigger Stable Diffusion&quot;&gt;&lt;/div&gt;
    &lt;span data-i18n=&quot;Generate Image&quot;&gt;Generate Image&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&quot;sd_stop_gen&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
    &lt;div class=&quot;fa-solid fa-circle-stop extensionsMenuExtensionButton&quot; title=&quot;Abort current image generation task&quot;
         data-i18n=&quot;[title]Abort current image generation task&quot;&gt;&lt;/div&gt;
    &lt;span data-i18n=&quot;Stop Image Generation&quot;&gt;Stop Image Generation&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>这还不足以解决问题。繁体中文文件中没有&quot;Stop Image Generation&quot;的翻译。我们可以添加它！这是一个可能的翻译：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Stop Image Generation&quot;: &quot;停止生成图片&quot;
} </code></pre>
</doc-codeblock></div>
<p>...我们可以将其添加到 JSON 文件中的&quot;Generate Image&quot;翻译之后。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Generate Image&quot;: &quot;生成图片&quot;,
    &quot;Stop Image Generation&quot;: &quot;停止生成图片&quot;
} </code></pre>
</doc-codeblock></div>
<p>经过与 Claude 的讨论，我们实际上将使用以下翻译：</p>
<ul>
<li>繁体中文：&quot;Stop Image Generation&quot;: &quot;終止圖片生成&quot;</li>
<li>简体中文：&quot;Stop Image Generation&quot;: &quot;中止图像生成&quot;</li>
<li>日语：&quot;Stop Image Generation&quot;: &quot;画像生成を停止&quot;</li>
</ul>
<p><figure class="content-center">
    <img src="../../static/i18n/stop-generating-post-2.png" alt="stop-generating-post-2.png">
    <figcaption class="caption">stop-generating-post-2.png</figcaption>
</figure>
</p>
<doc-anchor-target id="generate-caption">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#generate-caption">#</doc-anchor-trigger>
        <span><code v-pre>Generate Caption</code></span>
    </h3>
</doc-anchor-target>
<p>&quot;Generate Caption&quot;（生成说明）在繁体中文语言环境中未翻译。让我们修复它！</p>
<p><figure class="content-center">
    <img src="../../static/i18n/generate-image-post.png" alt="generate-image-post.png">
    <figcaption class="caption">generate-image-post.png</figcaption>
</figure>
</p>
<p>它在哪里？检查元素。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--rendered HTML--&gt;
&lt;div id=&quot;send_picture&quot; class=&quot;list-group-item flex-container flexGap5 interactable&quot; tabindex=&quot;0&quot;&gt;
    &lt;div class=&quot;fa-solid fa-image extensionsMenuExtensionButton&quot;&gt;&lt;/div&gt;
    Generate Caption
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>原来这个 HTML 是由 JavaScript 生成的。让我们找到源代码。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// public/scripts/extensions/caption/index.js
const sendButton = $(`
        &lt;div id=&quot;send_picture&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
            &lt;div class=&quot;fa-solid fa-image extensionsMenuExtensionButton&quot;&gt;&lt;/div&gt;
            Generate Caption
        &lt;/div&gt;`);</code></pre>
</doc-codeblock></div>
<p>我们首先要修复代码：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// public/scripts/extensions/caption/index.js
const sendButton = $(`
        &lt;div id=&quot;send_picture&quot; class=&quot;list-group-item flex-container flexGap5&quot;&gt;
            &lt;div class=&quot;fa-solid fa-image extensionsMenuExtensionButton&quot;&gt;&lt;/div&gt;
            &lt;span data-i18n=&quot;Generate Caption&quot;&gt;Generate Caption&lt;/span&gt;
        &lt;/div&gt;`);</code></pre>
</doc-codeblock></div>
<p>繁体中文文件中也没有&quot;Generate Caption&quot;的翻译。让我们添加它！</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Generate Caption&quot;: &quot;生成圖片說明&quot;
}</code></pre>
</doc-codeblock></div>
<p>我们将使用以下翻译：</p>
<ul>
<li>繁体中文：&quot;Generate Caption&quot;: &quot;生成圖片說明&quot;</li>
<li>简体中文：&quot;Generate Caption&quot;: &quot;生成图片说明&quot;</li>
<li>日语：&quot;Generate Caption&quot;: &quot;画像説明を生成&quot;</li>
</ul>
<p><figure class="content-center">
    <img src="../../static/i18n/generate-caption-post.png" alt="generate-caption-post.png">
    <figcaption class="caption">generate-caption-post.png</figcaption>
</figure>
</p>
<doc-anchor-target id="inspect-prompts">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inspect-prompts">#</doc-anchor-trigger>
        <span><code v-pre>Inspect Prompts</code></span>
    </h3>
</doc-anchor-target>
<p>&quot;Inspect Prompts&quot;（检查提示词）在繁体中文语言环境中未翻译。为什么？
这个有点复杂。文本是由 JavaScript 生成的，而且翻译缺失。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// Extension-PromptInspector/index.js
const enabledText = 'Stop Inspecting';
const disabledText = 'Inspect Prompts';</code></pre>
</doc-codeblock></div>
<p>好吧，您知道吗...这两个短语都不在 i18n 文件中。让我们添加它们。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Stop Inspecting&quot;: &quot;停止檢查&quot;,
    &quot;Inspect Prompts&quot;: &quot;檢查提示詞&quot;
}</code></pre>
</doc-codeblock></div>
<p>现在我们必须修复 JavaScript 代码。它必须使用 <code v-pre>t</code> 函数来获取翻译。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// Extension-PromptInspector/index.js
import {t} from '../../../i18n.js';

const enabledText = t`Stop Inspecting`;
const disabledText = t`Inspect Prompts`;</code></pre>
</doc-codeblock></div>
<p>我们从 Claude 那里得到了这些建议。保留字符串，忽略代码。它们必须添加到 JSON 文件中。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// 1. 简体中文 (zh-cn)：
const enabledText = t`停止检查`;
const disabledText = t`检查提示词`;
// 2. 繁体中文 (zh-tw)：
const enabledText = t`停止檢查`;
const disabledText = t`檢查提示詞`;
// 3. 日语 (ja-jp)：
const enabledText = t`検査を停止`;
const disabledText = t`プロンプトを検査`;</code></pre>
</doc-codeblock></div>
<p>我们将把这些合并到 JSON 文件中。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Stop Inspecting&quot;: &quot;停止检查&quot;,
    &quot;Inspect Prompts&quot;: &quot;检查提示词&quot;
}</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Stop Inspecting&quot;: &quot;停止檢查&quot;,
    &quot;Inspect Prompts&quot;: &quot;檢查提示詞&quot;
}</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Stop Inspecting&quot;: &quot;検査を停止&quot;,
    &quot;Inspect Prompts&quot;: &quot;プロンプトを検査&quot;
}</code></pre>
</doc-codeblock></div>
<p><figure class="content-center">
    <img src="../../static/i18n/toggle-prompt-inspection-post-tt.png" alt="toggle-prompt-inspection-post-tt.png">
    <figcaption class="caption">toggle-prompt-inspection-post-tt.png</figcaption>
</figure>
</p>
<p>关于那个工具提示很遗憾。问题在于代码没有使用 <code v-pre>t</code> 函数。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">launchButton.title = 'Toggle prompt inspection';</code></pre>
</doc-codeblock></div>
<p>我们必须在扩展代码中修复这个问题。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">launchButton.title = t`Toggle prompt inspection`;</code></pre>
</doc-codeblock></div>
<p>我们还需要将翻译添加到 JSON 文件中。</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Toggle prompt inspection&quot;: &quot;切换提示检查&quot;
}</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Toggle prompt inspection&quot;: &quot;切换提示词检查&quot;
}</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Toggle prompt inspection&quot;: &quot;プロンプト検査の切り替え&quot;
}</code></pre>
</doc-codeblock></div>
<p>提示检查器是一个独立的扩展，所以我们会向该仓库提交代码修复：https://github.com/SillyTavern/Extension-PromptInspector/pull/1</p>
<p>翻译将添加到主 SillyTavern 仓库。https://github.com/SillyTavern/SillyTavern/pull/3198</p>
<p><figure class="content-center">
    <img src="../../static/i18n/start-inspecting-post.png" alt="start-inspecting-post.png">
    <figcaption class="caption">start-inspecting-post.png</figcaption>
</figure>
</p>
<doc-anchor-target id="语言文件">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#语言文件">#</doc-anchor-trigger>
        <span>语言文件</span>
    </h2>
</doc-anchor-target>
<p>每种语言在 <code v-pre>public/locales/</code> 目录下都有一个以其语言代码命名的 JSON 文件（例如，<code v-pre>ru-ru.json</code>）。</p>
<p>该文件包含键值对，其中：</p>
<ul>
<li>键是原始英文文本或唯一标识符</li>
<li>值是翻译后的文本</li>
</ul>
<p>示例：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Save&quot;: &quot;Сохранить&quot;,
    &quot;Cancel&quot;: &quot;Отмена&quot;,
    &quot;Could not find proxy with name '${0}'&quot;: &quot;Не удалось найти прокси с названием '${0}'&quot;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="翻译的工作原理">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#翻译的工作原理">#</doc-anchor-trigger>
        <span>翻译的工作原理</span>
    </h2>
</doc-anchor-target>
<p>应用程序中有两种使用翻译的方式：</p>
<ol>
<li><p><strong>HTML 元素</strong>：使用 <code v-pre>data-i18n</code> 属性</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;div data-i18n=&quot;some_key&quot;&gt;默认文本&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>如果有可用的翻译，HTML 中的默认文本将被替换为翻译后的文本。</p>
</li>
<li><p><strong>模板字符串</strong>：在 JavaScript 代码中使用 <code v-pre>t</code> 函数</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">t`Some text with ${variable}`</code></pre>
</doc-codeblock></div>
<p>这些字符串应该在保持 <code v-pre>${0}</code>、<code v-pre>${1}</code> 等占位符不变的情况下进行翻译。</p>
</li>
</ol>
<p>SillyTavern 使用带有 <code v-pre>data-i18n</code> 属性的 HTML 元素来标记可翻译的内容。使用这个属性有几种方式：</p>
<doc-anchor-target id="1-翻译元素文本">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#1-翻译元素文本">#</doc-anchor-trigger>
        <span>1. 翻译元素文本</span>
    </h3>
</doc-anchor-target>
<p>对于简单的文本内容：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;span data-i18n=&quot;Role:&quot;&gt;Role:&lt;/span&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Role:&quot;: &quot;Роль:&quot;
}</code></pre>
</doc-codeblock></div>
<p>这会将元素的文本内容替换为&quot;Role:&quot;的翻译。</p>
<doc-anchor-target id="2-翻译属性">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2-翻译属性">#</doc-anchor-trigger>
        <span>2. 翻译属性</span>
    </h3>
</doc-anchor-target>
<p>要翻译标题或占位符等属性：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;a class=&quot;menu_button fa-chain fa-solid fa-fw&quot;
   title=&quot;Insert prompt&quot;
   data-i18n=&quot;[title]Insert prompt&quot;&gt;&lt;/a&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Insert prompt&quot;: &quot;Вставить промпт&quot;
}</code></pre>
</doc-codeblock></div>
<p><code v-pre>[title]</code> 前缀指示要翻译哪个属性。属性值的其余部分是将用作 JSON 文件中查找键的文本。程序员通常使用英文文本作为键，但这不是必需的。键可以是任何唯一标识符。</p>
<p>不过，原始英文文本必须存在于相应的属性中（<code v-pre>title=&quot;Insert prompt&quot;</code>）。如果缺少翻译，它将用作后备。最值得注意的是，英语没有翻译文件。</p>
<p>这里是一个使用唯一标识符 <code v-pre>no_items_text</code> 作为键而不是英文文本的示例：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--suppress HtmlUnknownAttribute --&gt;
&lt;div class=&quot;openai_logit_bias_list&quot; no_items_text=&quot;No items&quot;
     data-i18n=&quot;[no_items_text]openai_logit_bias_no_items&quot;&gt;&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;openai_logit_bias_no_items&quot;: &quot;没有相关产品&quot;
}   </code></pre>
</doc-codeblock></div>
<doc-anchor-target id="3-每个元素的多个翻译">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#3-每个元素的多个翻译">#</doc-anchor-trigger>
        <span>3. 每个元素的多个翻译</span>
    </h3>
</doc-anchor-target>
<p>某些元素需要同时翻译内容和属性，用分号分隔。最常见的模式是同时翻译元素的文本内容和其标题属性：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;div data-source=&quot;openrouter&quot; class=&quot;menu_button menu_button_icon openrouter_authorize&quot;
     title=&quot;Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai&quot;
     data-i18n=&quot;Authorize;[title]Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai&quot;&gt;
    Authorize
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Authorize&quot;: &quot;Авторизоваться&quot;,
    &quot;Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai&quot;: &quot;Получите свой OpenRouter API токен используя OAuth. У вас будет открыта вкладка openrouter.ai&quot;
}</code></pre>
</doc-codeblock></div>
<p>这会翻译：</p>
<ul>
<li>使用键&quot;Authorize&quot;翻译元素的文本内容</li>
<li>使用键&quot;Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai&quot;翻译标题属性</li>
</ul>
<p>注意，<code v-pre>title</code> 属性和元素的文本内容都以英语提供作为后备。</p>
<p>您也可以翻译多个属性：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-markup"><code v-pre class="language-markup">&lt;!--suppress HtmlUnknownAttribute --&gt;
&lt;textarea id=&quot;send_textarea&quot; name=&quot;text&quot; class=&quot;mdHotkeys&quot;
          data-i18n=&quot;[no_connection_text]Not connected to API!;[connected_text]Type a message, or /? for help&quot;
          placeholder=&quot;Not connected to API!&quot;
          no_connection_text=&quot;Not connected to API!&quot;
          connected_text=&quot;Type a message, or /? for help&quot;&gt;&lt;/textarea&gt;</code></pre>
</doc-codeblock></div>
<p>您的语言文件中相应的翻译看起来像这样：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Not connected to API!&quot;: &quot;Нет соединения с API!&quot;,
    &quot;Type a message, or /? for help&quot;: &quot;Введите сообщение или /? для помощи&quot;
}</code></pre>
</doc-codeblock></div>
<p>当页面加载时，系统会：</p>
<ol>
<li>查找所有带有 <code v-pre>data-i18n</code> 属性的元素</li>
<li>解析任何属性前缀，如 <code v-pre>[title]</code> 或 <code v-pre>[placeholder]</code></li>
<li>在您的语言的 JSON 文件中查找每个键</li>
<li>用翻译后的文本替换元素的内容或属性</li>
</ol>
<doc-anchor-target id="动态文本">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#动态文本">#</doc-anchor-trigger>
        <span>动态文本</span>
    </h3>
</doc-anchor-target>
<p>对于 JavaScript 代码中的动态文本，翻译使用以下方式之一：</p>
<ol>
<li>带有 <code v-pre>t</code> 函数的模板字面量：
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">toastr.warn(t`Tag ${tagName} not found.`);</code></pre>
</doc-codeblock></div>
</li>
<li>直接翻译函数：
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">translate(&quot;Some text&quot;, &quot;optional_key&quot;)</code></pre>
</doc-codeblock></div>
</li>
</ol>
<doc-anchor-target id="变量占位符">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#变量占位符">#</doc-anchor-trigger>
        <span>变量占位符</span>
    </h3>
</doc-anchor-target>
<p>某些字符串包含使用 <code v-pre>${0}</code>、<code v-pre>${1}</code> 等的动态值占位符：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">toastr.error(t`Could not find proxy with name '${presetName}'`);</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
    &quot;Could not find proxy with name '${0}'&quot;: &quot;Не удалось найти прокси с названием '${0}'&quot;
}</code></pre>
</doc-codeblock></div>
<p>在键和翻译中保持占位符相同。系统将用 <code v-pre>presetName</code> 的值替换 <code v-pre>${0}</code> 等。</p>
<doc-anchor-target id="查找缺失的翻译">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#查找缺失的翻译">#</doc-anchor-trigger>
        <span>查找缺失的翻译</span>
    </h2>
</doc-anchor-target>
<p>如果您不仅想修复某个特定的翻译问题，而是希望全面查找并修复所有缺失的翻译，这无疑是一个更具挑战性的任务。</p>
<p>虽然修复单个翻译已经很有价值，但若您希望系统性地解决所有翻译缺失问题，您将需要借助专门的工具来完成这项工作。</p>
<doc-anchor-target id="sillytavern-i18n">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#sillytavern-i18n">#</doc-anchor-trigger>
        <span>SillyTavern-i18n</span>
    </h3>
</doc-anchor-target>
<p><a href="https://github.com/SillyTavern/SillyTavern-i18n">https://github.com/SillyTavern/SillyTavern-i18n</a></p>
<p>用于处理前端本地化文件的工具。</p>
<p>功能：</p>
<ul>
<li>自动从 HTML 文件添加新的待翻译项。</li>
<li>从本地化文件中删除缺失的项。</li>
<li>使用自动 Google 翻译来自动填充缺失的值。</li>
<li>按键对 JSON 文件进行排序。</li>
</ul>
<doc-anchor-target id="inbuilt-debug-functions">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inbuilt-debug-functions">#</doc-anchor-trigger>
        <span>Inbuilt debug functions</span>
    </h3>
</doc-anchor-target>
<p>这些工具位于 <i class="fa-fw fa-solid fa-user-cog"></i> <strong>用户设置</strong> &gt; <strong>调试菜单</strong> 下。</p>
<doc-anchor-target id="获取缺失的翻译">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#获取缺失的翻译">#</doc-anchor-trigger>
        <span>获取缺失的翻译</span>
    </h4>
</doc-anchor-target>
<p>检测当前语言环境中缺失的本地化数据，并将数据输出到浏览器控制台。如果当前语言环境是英语，则搜索所有其他语言环境。</p>
<p>控制台将显示一个缺失翻译的表格，包含：</p>
<ul>
<li>key：需要翻译的文本或标识符</li>
<li>language：您当前的语言代码</li>
<li>value：需要翻译的英文文本</li>
</ul>
<doc-anchor-target id="应用语言环境">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#应用语言环境">#</doc-anchor-trigger>
        <span>应用语言环境</span>
    </h4>
</doc-anchor-target>
<p>重新应用当前选择的语言环境到页面</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>这两个工具都不是完美的</h5>
<ul>
<li>它们无法捕获 JavaScript 代码中缺失的翻译</li>
<li>它们无法捕获 HTML 中缺失的 data-i18n 属性，它们只能捕获未翻译的键</li>
<li><code v-pre>getMissingTranslations</code> 的代码中存在错误：键不应该带有 <code v-pre>[title]</code> 或 <code v-pre>[placeholder]</code> 前缀</li>
</ul>
        </div>
    </div>
</div>
<doc-anchor-target id="adding-a-new-language">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#adding-a-new-language">#</doc-anchor-trigger>
        <span>Adding a new language</span>
    </h2>
</doc-anchor-target>
<p>要添加对新语言的支持：</p>
<ol>
<li><p>将您的语言添加到 <code v-pre>public/locales/lang.json</code>：</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
  &quot;lang&quot;: &quot;xx-xx&quot;,
  &quot;display&quot;: &quot;语言名称（英文名称）&quot;
}</code></pre>
</doc-codeblock></div>
</li>
<li><p>创建 <code v-pre>public/locales/xx-xx.json</code> 并添加您的翻译</p>
</li>
</ol>
<doc-anchor-target id="contributing">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#contributing">#</doc-anchor-trigger>
        <span>Contributing</span>
    </h2>
</doc-anchor-target>
<p>当您的翻译准备就绪时：</p>
<ol>
<li>验证您的 JSON 文件是否有效</li>
<li>在应用程序中进行彻底测试</li>
<li>通过 GitHub 拉取请求提交</li>
</ol>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/intellecat/SillyTavern-Docs-ZH/edit/main/For_Contributors/i18n.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit this page</span>
                                    </a>
                                </div>
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../for-contributors/writing-extensions/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">编写扩展</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../administration/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">管理</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2025. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "国际化 (i18n)", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
