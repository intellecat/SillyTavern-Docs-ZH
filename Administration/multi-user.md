---
title: 多用户模式
icon: people
order: -10
---

多用户模式允许多人使用同一个 SillyTavern 服务器。每个用户都有自己的设置、扩展和数据。用户账户也可以设置密码保护。

!!! warning
用户密码为多用户设置中的用户提供基本的隐私保护。它们不是安全功能，不应该被视为安全功能。所有用户数据（包括聊天历史、API 密钥和其他敏感信息）都以明文形式存储在服务器上。任何有权访问服务器文件系统的人都可以查看和修改这些数据。**不要在公共服务器上或与不受信任的用户一起使用 SillyTavern。**
!!!

## 配置

要启用和使用多用户模式，请编辑 `config.yaml` 文件：

```yaml
# 启用多用户模式
enableUserAccounts: true
# 启用谨慎登录模式：在登录屏幕隐藏用户列表
enableDiscreetLogin: true
```

1. 当用户账户设置被禁用时，会使用 `default-user` 后备管理员账户来存储用户数据。
2. 当谨慎登录设置被禁用时，活动用户列表会显示在登录屏幕上。如果启用，用户必须手动输入他们的标识符。

> 您不能从用户列表中_删除_ `default-user` 账户，因为如果 `enableUserAccounts` 设置为 `false`，它会用于提供用户数据。但您可以_禁用_它以将其从列表中隐藏并禁止登录。

## 用户标识符

标识符是用户的唯一标识。它只能由小写字母、数字和破折号组成。

用户数据目录的路径采用以下模式：`%DATA_ROOT%/%USER_HANDLE%`。

有效用户标识符的示例：

-   default-user
-   juan555
-   flux-the-cat
-   cool-guy1337

## 角色

-   **管理员** - 可以管理（创建、删除、修改）其他用户。
-   **用户** - 不能管理其他用户。

除了有管理面板访问权限外，两种用户角色在功能上完全相同，可以不受任何限制地使用 SillyTavern 的全部功能。用户权限的实现尚待确定。

所有用户账户首先都是作为普通用户创建的，如果需要，可以晋升为管理员。

### 登录屏幕

您可以在这里选择要使用的用户账户。根据 `enableDiscreetLogin` 配置值有两种样式。

当您只有一个活动用户且该用户没有密码保护时，登录屏幕会被跳过且不显示。

### 用户档案

您可以使用顶部菜单栏中"用户设置"面板下的"账户"按钮访问账户自我管理菜单。

1. 显示名称 - 用于登录屏幕，可以更改。与角色无关，对 AI API 不可见 - 您仍然可以使用任意数量的角色。
2. 头像 - 用于登录屏幕。您可以使用自定义图片、默认角色图片（如果已设置）或最后使用的角色图片。
3. 密码 - 锁定图标反映账户保护状态（开锁 = 无密码）。可以使用"更改密码"按钮设置、更改或删除密码。
4. 设置快照 - 访问和查看您的 `settings.json` 文件的备份，可以创建或恢复快照。
5. 下载备份 - 下载您的用户数据文件夹的存档。
6. 重置设置 - 重置为出厂默认设置，同时保留其他数据（角色、聊天）不变。

## 密码恢复

1. 可以从登录屏幕恢复密码。您需要访问服务器控制台以获取一次性恢复代码（由 4 位数字组成）。
2. 或者，您可以使用 SillyTavern 服务器中的实用程序脚本，通过提供用户标识符来重置密码。

```txt
用法：node recover.js [账户] (密码)
示例：node recover.js admin SecurePassword
```
