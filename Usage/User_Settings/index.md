---
order: 120
icon: gear
route: /usage/user-settings/
---

# 用户设置


:::callout
**[UI 自定义](uicustomization.md)**

更改聊天界面的主题、外观和感觉以适应您的偏好。
:::



:::callout
**[视觉小说模式](Visual-Novel.md)**

像在《心跳文学部》和其他著名视觉小说游戏中一样，与带有立绘的角色聊天。
:::


## 常规设置

这些是影响您整体 SillyTavern 体验的核心设置。

### UI 语言

SillyTavern 的用户界面支持多种语言。语言选择器提供以下选项：
* **默认**：如果可用，使用您的系统语言
* **英语**：无论系统设置如何，强制使用英文界面
* 通过下拉菜单可选择其他语言

注意：此设置仅影响用户界面文本。要进行 AI 对话翻译，请使用[聊天翻译](../../extensions/Translation.md)扩展。

### 软件版本

您当前的 SillyTavern 版本显示在右上角。此信息对于以下情况至关重要：
* 排查问题
* 确保与扩展的兼容性
* 确定是否有可用更新

要将 SillyTavern 更新到最新版本，请参阅[更新](/Installation/Updating)文档。

### 账户管理

控制您的 SillyTavern 用户账户，备份您的设置和用户数据，并在[多用户模式](/Administration/multi-user.md)中管理用户角色和权限。

#### <i class="fa-fw fa-solid fa-user-shield"></i> 账户

在账户对话框中，您可以查看和编辑您的个人资料信息、更改密码以及管理账户设置。

**个人资料信息**

* 显示名称（可通过铅笔图标编辑）
* 用户头像（也可以使用[人格面具](/Usage/personas.md)进行更改）
* 账户名称
* 用户角色
* 账户创建日期
* 密码状态（锁定/解锁图标表示保护状态）

**账户操作**

* **设置快照**：创建、管理和恢复用户设置的备份
* **下载备份**：导出所有用户数据的完整备份
* **更改密码**：更新您的账户安全凭证

**危险区域**

应谨慎使用的关键账户操作：
* **重置设置**：将所有设置恢复为出厂默认值
* **重置所有内容**：完全清除账户并恢复出厂设置

#### <i class="fa-fw fa-solid fa-user-tie"></i> 管理面板

!!! 适用于：[多用户模式](/Administration/multi-user.md)

多账户功能需要在 config.yaml 中将 `enableUserAccounts` 设置为 true。
!!!

选择**管理用户**以查看和管理现有用户账户。

##### 用户配置文件

- 自定义头像管理（上传/删除）
- 显示名称和账户名称
- 角色和状态信息
- 账户创建日期
- 密码保护状态

##### 账户控制

- <i class="fa-fw fa-solid fa-pencil"></i> 编辑显示名称
- <i class="fa-fw fa-solid fa-check"></i> 启用账户
- <i class="fa-fw fa-solid fa-ban"></i> 禁用账户
- <i class="fa-fw fa-solid fa-arrow-up"></i> 提升为管理员
- <i class="fa-fw fa-solid fa-arrow-down"></i> 降级为普通用户

##### 管理操作

- <i class="fa-fw fa-solid fa-download"></i> 下载用户数据备份
- <i class="fa-fw fa-solid fa-key"></i> 更改用户密码
- <i class="fa-fw fa-solid fa-trash"></i> 删除账户

##### 新用户

选择**新用户**以创建新用户账户。

* 显示名称*（例如，"John Snow"）
* 用户名称*（仅限小写字母、数字和破折号）
* 密码（可选）
* 密码确认

创建新用户会自动在 /data/ 目录中生成一个子文件夹，使用用户的名称作为文件夹名称。

#### <i class="fa-fw fa-solid fa-right-from-bracket"></i> 登出

!!! 适用于：[多用户模式](/Administration/multi-user.md)
!!!

退出当前会话。

### 设置搜索

一个方便的搜索栏，可帮助您快速找到特定设置：
* 输入任何关键字以在用户设置中过滤和突出显示设置
* 搜索设置名称和描述
* 帮助更有效地浏览复杂设置

## UI 主题

更改聊天界面的外观以适应您的偏好。

有关 <i class="fa-fw fa-solid fa-user-gear" title="User Settings icon"></i> **用户设置**这一部分中的设置的更多信息，请参阅 [UI 自定义](uicustomization.md#ui-theme)。

## 角色处理

* **角色列表副标题**：选择在[<i class="fa-fw fa-solid fa-address-card" title="Characters icon"></i> 角色](/Usage/Characters/characterdesign.md)列表中角色名称下显示的附加信息：
    - 角色版本
    - 创建者
* **导入角色卡标签**：控制导入角色卡时如何处理标签：
    - 询问 - 为每次导入显示对话框
    - 无 - 不导入任何标签
    - 全部 - 导入所有标签
    - 现有 - 仅导入已存在的标签
* **高级角色搜索**：启用后，使用模糊匹配并搜索所有角色数据字段，而不仅仅是名称。
* **优先使用角色提示词**：如果启用，在可用时使用角色卡的系统提示词覆盖。
* **优先使用角色指令**：如果启用，在可用时使用角色卡的历史后指令覆盖。
* **从不调整头像大小**：防止裁剪/调整导入的角色图像大小。禁用时，图像将调整为 512x768。
* **显示头像文件名**：在角色列表中显示角色头像的实际文件名。
* **无剧透模式**：在编辑器面板中将角色定义隐藏在剧透按钮后面。

## 杂项

* **重新加载聊天**：重新加载并重绘当前聊天。
* **[调试菜单](#debug-menu)**：访问调试选项。
* **平滑流式传输**：通过逐字母显示文本来平滑流式生成。包括速度控制滑块。
* **流式淡入**：对流式文本应用淡入效果。可以与平滑流式传输一起使用或单独使用。
* **[消息声音](uicustomization.md#message-sound)**：在消息生成完成时播放声音。
    - **仅后台声音**：仅在浏览器标签未聚焦时播放声音。
* **宽松的 API URL**：降低 API URL 的格式要求。
* **Lorebook 导入对话框**：在导入带有嵌入式知识的角色时显示世界信息/Lorebook 的导入对话框。
* **自动选择输入文本**：单击某些输入字段时自动选择文本。
* **Markdown 热键**：启用 Markdown 格式化的键盘快捷键。
* **恢复用户输入**：刷新页面时保留未保存的用户输入。
* **MovingUI**：允许通过拖动重新定位 UI 元素（仅限 PC）。
    - <i class="fa-solid fa-recycle" title="Reset icon"></i> **重置**按钮以恢复默认位置
    - 用于保存/加载 UI 布局的预设系统

## 聊天/消息处理

### 消息显示设置

控制消息在聊天界面中的加载和显示方式。这些设置会影响整体聊天体验和性能。
* **要加载的消息数**：分页前要加载的聊天历史消息数（0 = 全部）
* **流式 FPS**：流式文本的更新速度（5-100 FPS）
* **示例消息行为**：
    - 逐步推出
    - 始终包含示例
    - 从不包含示例

### 输入和响应控制

确定消息如何发送以及 AI 如何继续其响应的设置。
* **回车发送**：在禁用、自动（PC）或启用之间选择
* **"发送"继续**：使用发送按钮继续 AI 响应
* **快速"继续"按钮**：显示按钮以扩展 AI 的最后一条消息
* **快速"模仿"按钮**：显示单消息角色模仿的按钮
* **滑动**：显示箭头按钮以获取备选 AI 响应（PC 和移动设备）
* **手势**：启用用于生成的滑动手势（仅限移动设备）

### 自动管理

帮助管理聊天流程和内容的自动化功能。
* **自动加载最后聊天**：启动时自动加载最近的聊天
* **自动滚动聊天**：自动滚动到最新消息
* **自动保存消息编辑**：无需确认即保存消息编辑
* **确认消息删除**：删除消息前提示
* **自动修复 Markdown**：自动更正 Markdown 格式

#### 自动滑动

根据可配置的条件自动拒绝并重新生成 AI 消息。
* **启用自动滑动**：自动滑动功能的主开关
* **最小生成消息长度**：如果消息短于此值，则触发自动滑动
* **黑名单词汇**：可以触发自动滑动的词汇列表，用逗号分隔
* **触发滑动的黑名单词汇数量**：必须检测到的最小黑名单词汇数量才能触发自动滑动

#### 自动继续

如果模型在达到特定长度之前停止，则自动继续响应。

这让您的 AI 可以分多个部分写出长响应，这样您就可以使用较短的[响应长度设置](/Usage/Common-Settings.md#response-tokens)，同时仍然获得长回复。

它不会让 AI 写得比原本更多。要求 AI 继续它认为"已完成"的消息通常不起作用。请参阅[如何让 AI 写得更多？](/Usage/faq.md#how-to-make-the-ai-write-more)了解其他想法。

* **启用自动继续**：自动继续的主开关
* **允许用于聊天补全 API**：为聊天补全 API 端点启用自动继续功能
* **目标长度（令牌）**：所需的消息长度（以令牌为单位）- 如果消息短于此值将触发继续（0-1024）

### 消息格式和显示

控制消息的格式和显示的内容。
* **禁止外部媒体**：阻止来自外部域的嵌入式媒体
* **在响应中显示 {\{char}}:**：如果生成，则在响应中保留角色名称前缀
* **在响应中显示 {\{user}}:**：如果生成，则在响应中保留用户名称前缀
* **在响应中显示标签**：允许响应中的（某些）HTML 标签显示为 HTML
* **在群组中放宽消息修剪**：允许 AI 在群聊中为其他角色发言，而不是停止响应生成
* **显示群聊队列**：在群聊的角色列表中显示响应顺序
* **固定问候消息样式**：始终渲染问候语中的样式标签，即使由于延迟加载而卸载了消息。

### 提示词检查和调试

* **将提示词记录到控制台**：将提示词输出到浏览器控制台
* **请求令牌概率**：从 API 请求 AI 响应的令牌概率。在可用的情况下，可以在 <i class="fa-solid fa-bars" title="Burger Menu icon"></i> [令牌概率](../../Usage/Chatting/index.md#token-probabilities-panel)中查看这些内容。

### 自动补全

- 自动隐藏详细信息
- 匹配样式（以...开头/包含/模糊）
- 视觉样式（主题/深色/浅色）
- 键盘选择选项
- 字体缩放
- 宽度控制

## STscript 设置

[STscript 解析器](/For_Contributors/st-script.md#parser-flags)的配置选项。

### STRICT_ESCAPING

* 在引用值中不需要转义管道符。
* 符号前面的反斜杠可以被转义以提供字面反斜杠后跟功能符号。

有关更多信息，请参阅[严格转义](/For_Contributors/st-script.md#strict-escaping)。

### REPLACE_GETVAR

帮助避免在变量值包含可能被解释为宏的文本时的双重替换。

有关更多信息，请参阅[替换变量宏](/For_Contributors/st-script.md#replace-variable-macros)。

## 清理菜单

清理菜单提供了一个数据维护工具，可帮助您识别并从 SillyTavern 安装中删除不必要的文件。此功能有助于保持数据目录的组织性，并可以释放大量磁盘空间。

!!! warning "重要警告"
清理工具将永久删除文件。**此操作无法撤消！**

如果手动上传到 `/data/user/files/` 和 `/data/user/images/` 目录的文件未与聊天消息或数据库条目关联，则会被删除。

如果不确定，请在使用清理菜单之前备份您的数据。
!!!

### 如何使用清理

1. 单击**杂项**部分下的**清理**按钮
2. 单击**扫描**以分析您的安装。根据数据目录的大小，这可能需要一些时间
3. 查看找到的文件类别
4. 使用**查看**在删除前预览文件内容
5. 使用**下载**在删除前保存文件
6. 根据需要删除单个文件或整个类别

### 清理类别

清理工具将散落的文件扫描为以下类别：

#### 文件

* **它找到什么**：未与聊天消息或数据库条目关联的文件
* **位置**：`/data/<user-handle>/user/files/`
* **风险**：⚠️ **将删除未在聊天中引用的手动上传文件**
* **何时清理**：如果您不需要未引用的文件，则可以安全删除

#### 图像

* **它找到什么**：未与聊天消息关联的图像
* **位置**：`/data/<user-handle>/user/images/`
* **风险**：⚠️ **将删除未在聊天中引用的手动上传图像**
* **何时清理**：如果您不需要未引用的图像，则可以安全删除

#### 聊天

* **它找到什么**：与已删除角色关联的聊天文件
* **位置**：`data/<user-handle>/chats/`
* **风险**：⚠️ **孤立的聊天将永久丢失**
* **何时清理**：如果您有意删除了角色并且不再需要其聊天历史记录，则可以安全删除

#### 群聊

* **它找到什么**：与已删除群组关联的聊天文件
* **位置**：`data/<user-handle>/group chats/`
* **风险**：⚠️ **孤立的群聊将永久丢失**
* **何时清理**：如果您有意删除了群组并且不再需要其聊天历史记录，则可以安全删除

#### 头像缩略图

* **它找到什么**：缺失或已删除角色的头像缩略图
* **位置**：`data/<user-handle>/thumbnails/avatar`
* **风险**：✅ **可以安全删除** - 缩略图会在需要时自动重新生成
* **何时清理**：始终可以安全清理，有助于释放空间

#### 背景缩略图

* **它找到什么**：缺失或已删除背景的缩略图
* **位置**：`data/<user-handle>/thumbnails/bg`
* **风险**：✅ **可以安全删除** - 缩略图会在需要时自动重新生成
* **何时清理**：始终可以安全清理，有助于释放空间

#### 聊天备份

* **它找到什么**：自动生成的聊天备份
* **位置**：`data/<user-handle>/backups/chat_*`
* **风险**：⚠️ **备份文件将永久丢失**
* **何时清理**：考虑保留最近的备份，但较旧的备份可以安全删除

#### 设置备份

* **它找到什么**：自动生成的设置备份
* **位置**：`data/<user-handle>/backups/settings_*`
* **风险**：⚠️ **设置备份文件将永久丢失**
* **何时清理**：考虑保留最近的备份，但较旧的备份可以安全删除

## 调试菜单

!!!warning 这些功能仅供高级用户使用。

除非您完全理解其后果，否则请勿使用它们。
!!!

调试菜单提供了用于故障排除、维护和开发目的的功能。这些功能应谨慎使用，因为它们可能会显著影响您的 SillyTavern 安装。

由于扩展可以添加调试功能，因此可用选项将根据您安装的扩展而有所不同。

### 翻译和区域设置功能
* **获取缺失的翻译**：分析当前区域设置（如果选择英语，则分析所有区域设置）中缺失的翻译，并将结果输出到浏览器控制台
* **应用区域设置**：通过重新应用所选区域设置来强制刷新当前语言设置
### 缓存和存储管理
* **清除 WebSearch 缓存**：从本地缓存中删除所有存储的搜索结果
* **清除所有向量索引**：完全删除所有来源的所有存储向量
* **重置令牌缓存**：清除存储的令牌计数，强制对所有聊天进行完全重新令牌化
* **删除逐项提示词**：从本地存储中删除所有逐项提示词
### 数据和统计
* **刷新统计文件**：使用现有聊天数据重建统计文件
* **回填令牌计数器**：重新计算当前聊天中所有消息的令牌计数
    - 在使用不同令牌化器的模型之间切换时很有用
    - 完成后触发聊天重新加载
    - 仅视觉更改，不修改聊天内容
### API 和扩展测试
* **更改 Mancer 基础 URL**：修改 Mancer API 服务器的基础 URL
* **测试 WebSearch 扩展**：使用当前设置执行测试搜索
* **发送生成请求**：使用当前选择的 API 测试文本生成
### 系统和调试工具
* **强制引导**：重新启动引导过程
* **切换事件跟踪**：启用/禁用用于调试的事件跟踪
* **复制 ST 设置**：[进行中] 将系统配置数据复制到剪贴板以用于错误报告

每个功能都可以使用其描述下方的"执行"按钮来执行。在使用这些工具之前请考虑备份您的数据，因为某些操作无法撤消。
