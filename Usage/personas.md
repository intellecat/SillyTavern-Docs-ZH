---
order: 110
icon: smiley
route: /usage/core-concepts/personas/
templating: false
---

# 人格

## 什么是人格？

SillyTavern 中的人格是你在聊天中使用的身份——本质上是你的显示名称、头像和可选描述文本的组合。人格允许你轻松切换你所扮演的角色或"角色"，而无需每次都手动更新你的用户名/头像。

!!!
**注意：** 未绑定到人格的旧用户头像/名称已被移除。现有数据将迁移到人格。如果未指定名称，人格将被命名为"[未命名人格]"。
!!!

## 如何创建人格？

1. 打开**人格管理**面板（顶部菜单中的 <i class="fa-solid fa-face-smile"></i> 按钮）。
2. 使用**创建**按钮创建一个空白人格并为其命名。
3. 在人格列表中，选择新创建的人格。
4. 在右侧，你可以填写描述并通过"更改人格图像"按钮设置头像。两者都是可选的。
5. 现在你的人格已准备好在聊天中使用。

### 将角色转换为人格

人格也可以通过转换任何现有角色来创建。只需打开角色，选择"更多..."并点击"转换为人格"。将创建一个具有相同名称和描述的人格。不会使用其他角色卡片字段，如场景或个性。角色不会被删除。

!!! 注意
由于 `{{user}}` 和 `{{char}}` 宏在人格和角色描述中使用时具有相反的含义，如果转换的描述包含其中任何一个，系统会提示你交换它们。
!!!

## 人格描述

每个人格可以存储自定义文本描述——心理和身体特征、年龄、职业或任何个人详细信息。这些也可以包括模板宏，如 `{{char}}` 或 `{{user}}`（参见[宏](/Usage/Characters/macros.md)）。

你的人格描述注入到 AI 提示词中的位置取决于人格管理面板中的**位置**设置：

- **无（禁用）**
- **在故事字符串/提示词管理器中**（默认）
- **作者注释顶部** / **作者注释底部**（仅在存在作者注释时添加）
- **在聊天 @ 深度**（这将打开配置选项以设置深度和角色）

位置是**按人格**保存的。

## 人格标题

标题是一个可选的文本字段，可用于存储关于人格的附加信息，不用于提示词中，但显示在人格管理面板中。

要设置标题，点击人格管理面板中的 **<i class="fa-solid fa-pencil"></i> 重命名人格**按钮，并在"人格标题"字段中输入标题，或在创建人格时指定。当标题已存在时设置空值将删除它。

## 人格连接 / 锁定

人格连接确保在特定情况下自动选择给定的人格。如果没有连接人格，当前选择的人格将保持选中状态。

有三种类型的锁定：

1. **<i class="fa-solid fa-unlock"></i> 聊天锁定** – 人格锁定到当前聊天。
2. **<i class="fa-solid fa-unlock"></i> 角色锁定** – 人格锁定到特定角色。
3. **<i class="fa-solid fa-crown"></i> 默认人格** – 一个在没有其他锁定适用时使用的人格。

### 1. 锁定到聊天

如果人格锁定到聊天，将来打开该聊天时将自动切换到锁定的人格。

- **要锁定**：选择所需的人格，然后点击"连接"部分下的 **<i class="fa-solid fa-unlock"></i> 聊天**按钮（或使用 `/persona-lock type=chat on`）。
- **要解锁**：再次点击该按钮（或使用 `/persona-lock type=chat off`）。

### 2. 锁定到角色

你还可以将人格链接到特定角色。打开与该角色的任何聊天时会自动选择你锁定的人格。

- **要锁定**：选择所需的人格，然后点击"连接"部分下的 **<i class="fa-solid fa-unlock"></i> 角色**按钮（或使用 `/persona-lock type=character on`）。
- **要解锁**：再次点击该按钮（或使用 `/persona-lock type=character off`）。

人格管理面板还显示哪些角色链接到该人格（显示为小头像）。点击它们可直接导航到该角色的聊天。

#### 将多个人格锁定到同一角色

如果另一个人格已经链接到该角色，默认情况下它将自动取消链接。

要同时链接多个人格，可以使用全局设置**允许每个角色有多个人格连接**。
如果多个人格链接到同一角色，每次打开或开始与该角色的新聊天时，你都会看到一个弹窗，询问要使用哪个人格（除非人格绑定到聊天）。

### 3. 默认人格

你的**默认人格**在没有其他相关锁定时使用。默认人格通过其头像周围的黄色边框可识别。

- **要设置/取消设置默认人格**：选择所需的人格，然后点击"连接"部分下的 **<i class="fa-solid fa-crown"></i> 默认**按钮（或使用 `/persona-lock type=default`）。

只能选择一个人格作为默认人格。

### 临时人格

如果三个连接选项中的任何一个将人格连接到当前角色/聊天，你仍然可以选择使用不同的人格。此人格将在人格面板中标记为"临时人格"。任何浏览器窗口重新加载或切换到不同聊天再返回都会将其重置为链接的人格。

你可以通过将临时人格链接到聊天来手动*转换*它以持久连接。

## 全局人格设置

**当前人格**下的所有设置都是按人格保存的。也存在一些全局设置，可以在人格管理面板的**全局人格设置**下找到。

1. **切换人格时显示通知**
   - 启用与人格相关的提示消息（例如，"人格自动选择"、"临时人格"）。

2. **允许每个角色有多个人格连接**
   - **启用**时，你可以将多个人格链接到单个角色。打开该角色的聊天时会提示你使用哪个人格。如果禁用，一次只能将一个人格连接到一个角色。

3. **自动锁定选择的人格到聊天**
   - **启用**时，每当你选择人格（手动或通过自动选择）或创建新聊天时，它都会将该人格锁定到聊天。
   这与"允许多个"结合使用，提供了为每个角色选择人格的选项，但一旦为聊天选择就保持绑定。

## 人格的斜杠命令

### `/persona-lock type=<type?>`

- `chat` 将当前人格锁定到你的活动聊天。
- `character` 将当前人格锁定到正在使用的角色。
- `none`（或无参数）解锁/清除当前上下文的人格锁定。
- 如果不带参数使用，它将返回当前锁定状态（如果未设置则返回错误）。
- 锁定状态可以通过 `on`、`off` 或 `toggle` 选择。默认是 toggle。

### `/persona <name>`

- 通过名称快速切换你的活动人格，而无需打开人格管理面板。
- 示例：`/persona Blaze`。
- 使用 `mode=temp` 允许临时设置**当前**人格的名称，即使可能已经存在同名的人格（保留你当前的头像和描述）。

### `/persona-sync`

- 将活动聊天中的所有用户消息重新归属于**当前**人格及其名称。

> **注意：** 较旧的 `/lock` 和 `/unlock` 命令为了向后兼容而保留，但可能会在将来被移除。请改用 `/persona-lock`。

## 专业提示

1. **聊天中切换人格**不会将你过去的用户消息重新归属于新人格；这些消息仍归属于你当时使用的人格。
2. **批量重新归属**：如果你需要所有先前的消息与新人格匹配，点击**同步**按钮或使用 `/persona-sync`。
3. **替换人格图像**，而不丢失描述或锁定，方法是选择你的人格并点击 **<i class="fa-solid fa-images"></i> 更改人格图像**按钮。
4. **角色链接弹窗**：如果多个人格链接到同一角色，每次打开聊天时你都会看到一个弹窗来选择使用哪个人格。这是为特定角色提供小范围人格选择的便捷方式。
5. **备份**：你可以使用人格管理中的**备份**按钮备份整个人格列表（名称、角色连接、描述），并在需要时稍后恢复。

!!!tip 备份备注

- 图像和聊天连接不会与人格一起保存，也不会通过此方式备份。
- 这些备份不是为共享而设计的，因为它们包含内部链接。

!!!
