# Objective (目标扩展)

### 这是什么？

目标扩展让用户可以为 AI 指定一个在聊天过程中要努力达成的目标。这个目标被分解成逐步的任务。任务可以分支，子任务可以自动或手动创建。这使得可以创建复杂的任务树。系统会定期检查任务列表中每个任务的完成状态。

这与通过提示词添加静态指令不同，它为 AI 添加了无需用户干预就能遵循的顺序性和节奏性指令。这让 AI 自主努力达成目标的体验更加真实。

### 前提条件

在开始之前，请确保满足以下前提条件：

- 确保您使用的是最新版本的 SillyTavern。
- 从扩展面板（堆叠块图标）的"Download Extensions & Assets"菜单中安装"Objective"扩展。

### 常见用例

您的想象力就是极限，您可以给 AI 任何您希望的目标，它会规划如何实现。您可以让它规划如何杀死恶魔、抢劫神庙、举办豪华派对，甚至统治世界。

![目标设置面板](/static/extensions/objective-panel.png)

### 配置

- 该扩展位于扩展菜单的 Objective 下。

- 在顶部文本框中输入目标，然后点击 `Auto-Generate Tasks`。这会向连接的 API 发送请求，要求它提供与您输入的目标相匹配的任务列表。

*注意：点击 Auto-Generate Tasks 将在添加新任务之前删除当前选定目标的所有现有任务。*

- 收到 AI 的响应后，任务列表将自动创建在目标输入框下方的空间中。任务可以在创建后编辑。

- 面板底部有两个框：`Position in Chat` 和 `Task Check Frequency`
  - `Position in Chat` - 这是您希望当前任务在提示词的聊天部分中插入的"深度"。数字越低，AI 对任务的关注度就越高。设置为 0 将使任务成为 AI 思维中的主要内容。设置较高的值会将任务放在后台，让 AI 专注于当前的对话，但设置太高可能会导致 AI 永远"不会去做"这个任务。
  - `Task Check Frequency` - 这是您希望 AI 检查任务是否完成的频率。如果设置为 `3`，AI 将每发送 3 条消息就检查一次当前任务是否完成。

- 目标、任务及其描述会实时保存到当前聊天会话。自定义提示词会全局保存。

### 自定义提示词
您可以自定义发送给 LLM 的提示词，用于生成任务、检查任务完成情况和提示词注入。编辑提示词将保存它们以供当前会话使用。自定义提示词可以保存和加载以保持持久性。

- 点击 Edit Prompts 打开提示词编辑器窗口。您可以根据需要编辑提示词。
- 要保存提示词，输入名称并点击 Save Prompt。
- 要加载提示词，从下拉列表中选择提示词。
- 要删除已保存的提示词，从下拉列表中选择它并点击 Delete Prompt。

**警告：任务检查在单独的 API 请求中进行。将 Task Check Frequency 设置为 1 将使您对 LLM 服务的 API 调用次数翻倍。如果您使用的是付费服务，请谨慎使用。**

### 使用方法

默认情况下，目标扩展会自动跟踪所有任务及其各自的完成状态。

用户也可以随时手动创建、更新、删除和完成任务。

#### 当前任务选择

当前任务始终是列表中第一个未完成的任务。对任务的任何手动更新都会触发检查应该是什么当前任务。因此，如果您在一堆已完成的任务上方添加一个任务，它将被设置为当前任务。一旦完成，之前完成的任务将被跳过，下一个未完成的任务将被选为"当前"任务。

在使用父/子任务的任务树时，任务的选择是深度优先的，这意味着所有子任务将首先按顺序选择，然后继续当前目标/任务的任务列表。

#### 分支任务

点击 Branch Task 按钮将当前任务设置为目标，您可以自动生成或手动创建子任务。您可以继续将任何子任务转变为目标并继续生成，随心所欲。

将父任务标记为完成将导致扩展跳过所有子任务。当所有子任务完成时，父任务将被标记为完成。

#### 手动完成任务

您可以通过`点击任务旁边的复选框`手动切换任务的完成状态。这将设置下一个未完成的任务被选中。

#### 手动任务检查

如果您想手动触发 AI 检查任务完成情况，点击聊天输入栏右侧的 Extras 扩展按钮（`魔杖`）并选择 `Manual Task Check`。

![手动任务检查](/static/extensions/task-check.png)

#### 手动添加任务

当没有任务存在时，会显示 `Add Task` 按钮，允许您手动创建第一个任务。

如果已经存在其他任务，点击任何任务右侧的 `+` 按钮在其后插入新任务。

#### 删除任务

点击红色 `x` 删除现有任务。下一个未完成的任务将自动被选为当前任务。

删除具有子任务的任务将删除所有子任务及其后代。

#### 隐藏任务

如果您想对 AI 正在尝试完成的任务保持不知情，勾选 `Hide Tasks` 复选框以隐藏任务列表，让 AI 的意图成为一个谜。为了 100% 的神秘感，在点击 `Auto-Generate Tasks` 之前就这样做！
