---
route: /extensions/live2d/
---

# Live2D

本指南将引导您完成 SillyTavern 的 Live2D 扩展的设置和自定义过程。此扩展允许您为角色使用 Live2D 动画模型,为虚拟角色提供动态和交互式元素。

## 前置条件

开始之前,请确保您已满足以下前置条件:

1. **分支选择**:确保您使用的是最新版本的 SillyTavern,以访问最新功能和更新。

2. **扩展安装**:从扩展面板(由堆叠方块图标表示)中的"下载扩展和资源"菜单安装"Live2D"扩展。

3. **模型文件夹放置**:将您的 Live2D 模型文件夹放入 `/data/<user-handle>/assets/live2d` 目录。一个组织良好的 `live2d` 资源文件夹可能如下所示:

    ![资源文件夹示例](/static/extensions/live2d-folder.png)

    - Live2D 模型文件夹应包含 Live2D 模型的所有必要组件,如表情、动作、纹理、声音和设置文件。特别要注意的是,`***.model.json` 文件必须位于 Live2D 模型文件夹的根目录,才能被扩展检测到。在此示例中,`shizuku` live2d 模型文件夹可能如下所示:

    ![Live2d 模型文件夹示例](/static/extensions/live2d-model.png)

    - 注意:模型也可以放在角色特定的文件夹中,例如 `/data/<user-handle>/characters/Shizuku/live2d/`。但是,角色文件夹中的模型只能用于该特定角色。

## 扩展设置

Live2D 扩展提供各种设置来自定义动画模型的行为。以下是关键设置:

![UI 全局设置](/static/extensions/live2d-global.png)

### 全局设置

1. **启用**:
   - 启用此复选框以激活扩展,允许您的 Live2D 模型在 SillyTavern 中交互。
   - 如果您只想使用普通精灵图,可以禁用扩展。
   - 当您想在群聊中移动普通精灵图时可以禁用扩展,准备好使用 Live2D 模型时再启用它。

2. **跟随光标**:
   - 启用此复选框可使 Live2D 模型跟随您的光标,前提是该模型支持此功能。

3. **自动发送交互**:
   - 启用此复选框可在您单击带有映射消息的区域时自动触发角色交互(有关详细信息,请参阅命中区域部分)。


## 调试设置

这些设置可帮助您控制 Live2D 模型的行为和可见性,用于调试目的。

1. **动画前重置模型**:
   - 启用此复选框可在任何动画之前重新加载模型。这会强制动画开始,并允许您在必要时连续点击。某些模型可能需要此设置以确保动画从兼容状态开始。

2. **显示模型框架**:
   - 启用此复选框可显示模型框架,更容易识别在哪里单击以拖动模型。如果可用,它还会显示命中区域。将鼠标悬停在命中区域上将显示其名称。

3. **重新加载按钮**
    - 单击此按钮可重新加载每个 live2d 模型。如果出现故障时使用它。

## 角色选择

这些设置允许您管理角色并为其分配 Live2D 模型。

1. **刷新按钮**:
   - 单击刷新按钮可更新当前聊天中的角色列表。

2. **选择角色**:
   - 使用下拉列表选择要分配 Live2D 模型的角色。

3. **删除按钮**:
   - 单击此按钮可删除角色的所有分配模型。将出现确认提示以确认删除。

## 模型选择

![UI 模型列表](/static/extensions/live2d-list.png)

1. **刷新按钮**:
   - 如果您的 Live2D 模型未出现在列表中,请单击刷新按钮。

2. **选择模型**:
   - 从列表中选择一个模型以将其分配给所选角色。
   - 模型可以位于资源文件夹或当前角色的文件夹中。
   - 列表显示模型文件夹名称、其来源(资源或角色)以及检测到的模型设置文件的名称。
   - 请注意,某些模型文件夹可能包含同一模型的不同版本。您可以尝试不同的模型文件,看看哪个效果最好。
   - 选择无将使用普通精灵图(如果有)
   - 设置按角色和模型保存

## 模型设置

![UI 模型设置](/static/extensions/live2d-settings.png)

1. **模型缩放**:
   - 使用滑块调整模型的大小,使其变大或变小。

2. **模型中心 X 偏移**:
   - 使用滑块更改模型相对于窗口中心的水平位置。

3. **模型中心 Y 偏移**:
   - 使用滑块调整模型相对于窗口中心的垂直位置。


### 备注
- 这些设置会保存并在不同的聊天中保留。
- 您也可以用鼠标拖动模型,这些设置将被更新并保存。
- 如果您以某种方式使模型移出视图,请使用这些 UI 设置将模型带回屏幕。此外,勾选"显示框架"复选框可以清楚地看到您可以在哪里单击以拖动模型。

## 模型说话

![UI 模型说话](/static/extensions/live2d-talk.png)

1. **参数嘴巴张开 Y id**
    - 从列表中选择与模型嘴巴 Y 值对应的参数 ID。并非所有模型都有这个参数,名称可能因模型而异。通常类似于"PARAM_MOUTH_OPEN_Y"或"ParamMouthOpenY"。选择列表中的元素时检查模型;它将尝试运行说话动画。如果嘴巴移动,您就找对了!

2. **嘴巴移动速度**
    - 调整滑块以更改嘴巴动画的移动速度。

3. **每个字符的时间**
    - 设置每个字符的持续时间。说话动画的持续时间将是此时间乘以消息的字符数。

### 备注
- 此嘴巴动画并非在每个模型和每个动画上都有效。即使您的模型有嘴巴移动的动画,也不意味着嘴巴动画可以由此扩展控制。如果参数列表中没有显示任何内容,您的模型可能是使用太旧版本的 Live2D 制作的,无法正确访问参数。

## 模型动画

![UI 模型动画](/static/extensions/live2d-animations.png)

1. **启动动画**
    - 从列表中选择在开始与角色聊天时播放的表情和动作。如果需要隐藏角色一段时间以实现完美效果,您还可以添加延迟,在此期间模型将不可见。

2. **默认动画**
    - 从列表中选择角色发送消息时播放的表情和动作。使用分类表情扩展时用作后备动画。

### 备注
- 当您在列表中选择动画时,动画将播放。
- 使用重放按钮重放所选动画。
- 某些模型的表情被定义为动作。
- 如果列表中没有显示任何内容,您的模型的设置文件可能没有定义表情/动作。

## 命中区域映射

![UI 模型映射](/static/extensions/live2d-mapping.png)

1. **默认点击动画**
    - 从列表中选择单击模型时播放的表情和动作。您还可以设置将作为用户消息发送的消息。

2. **命中区域**
    - 如果模型有命中区域,它们将被列出,您可以为每个区域分配动画/消息。


### 备注
- 某些模型没有命中区域,但默认点击适用于所有模型。
- 如果您单击没有映射任何内容的命中区域或单击任何命中区域之外,将触发默认点击。
- 命中区域在模型中定义了优先级;例如,"嘴巴"在"头部"内。如果行为不正常,可能是由于模型文件的原因。
- 对于某些模型,需要完成动画才能开始另一个动画。如果您想强制刷新并连续播放动画,请使用调试复选框。

## 分类表情映射

![UI 模型分类](/static/extensions/live2d-classify.png)

1. **要求**
    - 需要使用分类表情扩展;否则,它将回退到默认动画。

2. **映射**
    - 对于分类扩展检测到的每种情绪,您可以分配表情/动作动画。

### 备注
- 如果在收到新消息时上一个动画尚未完成,新动画可能不会播放。此行为取决于 Live2D 模型。如果您想强制播放动画,请使用调试复选框。

感谢您遵循本指南!您的 SillyTavern 体验现在通过动画和交互式 Live2D 模型得到了丰富。