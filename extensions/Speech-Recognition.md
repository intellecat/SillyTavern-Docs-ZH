---
route: /extensions/speech-recognition/
---

# 语音识别

本指南将引导您完成在 SillyTavern 中设置语音识别以将您的语音转录为文本的过程。

## 先决条件

在开始之前,请确保您已满足以下先决条件:

- 确保您使用的是最新版本的 SillyTavern。
- 从扩展面板(堆叠块图标)中的"下载扩展和资源"菜单安装"语音识别"扩展。
- 安装了 ffmpeg 二进制文件。有关更多详细信息,请参阅 [RVC 设置](RVC.md#rvc-setup)。

## 语音识别设置(浏览器)

1. **配置 SillyTavern**:
   - 启动 SillyTavern 并转到**扩展** > **语音识别**。
   - 从下拉选项中选择"浏览器"。
   - 如果您的浏览器不支持语音识别,将出现错误弹出窗口。

2. **选择消息模式**:
   - 选择您想要的"消息模式":
     - **追加**: 您的消息将追加到当前用户消息文本区域。
     - **替换**: 您的消息将替换文本区域中的当前用户消息。
     - **自动发送**: 检测到语音结束后,您的消息将自动发送。

3. **启用消息映射***(可选)*:
   - 设置用于语音快捷方式的短语映射。
   - 例如,通过添加"command delete = /del2",当检测到"command delete"时,"/del2"命令将替换您的语音消息。
   - 与自动发送模式结合使用时很有用,可实现完全的语音控制。通过选中"启用消息映射"来启用此功能。

4. **选择语言**:
   - 选择您想要说话的语言(注意:并非每个浏览器都支持所有语言)。

5. **录音**:
   - 要开始录音,请单击消息区域右侧发送按钮旁边的麦克风按钮。再次单击以停止录音。如果未检测到语音,录音可能会自动停止。

## 语音识别设置(Whisper/Vosk)

1. **启用提供商**:
   - 使用以下命令在 extras 服务器上启用所需的语音识别提供商:
     ```shell
     python server.py --enable-modules=whisper-stt
     ```
     或
     ```shell
     python server.py --enable-modules=vosk-stt
     ```
   - 您还可以通过添加选项 `--stt-vosk-model-path` 或 `--stt-whisper-model-path` 以及模型路径来使用自定义模型。

2. **配置 SillyTavern**:
   - 启动 SillyTavern 并转到**扩展** > **语音识别**。
   - 从下拉选项中选择"Vosk"或"Whisper"(whisper 更准确)。
   - 设置与"浏览器"提供商设置类似(语言除外),请参见上文。

## 语音识别设置(流式)

1. **启用提供商**:
   - 使用以下命令在 Sillytavern-extras 上启用流式语音识别模块:
     ```shell
     python server.py --enable-modules=streaming-stt
     ```

2. **配置 SillyTavern**:
   - (可选)像上面的 Whisper 设置一样指定自定义 Whisper 模型。
   - (可选但推荐)在 SillyTavern 中设置触发词。只有以这些触发词开头的消息才会作为实际消息发送到 SillyTavern。这可以防止随机语音或噪音被转录。使用复选框启用此功能。可以使用复选框在实际消息中包含/排除触发词。
   - 其他设置与其他提供商类似。

现在,您已准备好在 SillyTavern 中使用语音识别将您的语音转录为文本。
