# Dynamic Audio (动态音频)

本指南将帮助您为 SillyTavern 设置和自定义动态音频资源。

## 前提条件

在开始之前，请确保满足以下前提条件：

- 确保您使用的是最新版本的 SillyTavern。
- 从扩展面板（堆叠块图标）的"Download Extensions & Assets"菜单中安装"Dynamic Audio"扩展。

## 动态音频设置（浏览器）

1. **连接到资源库**：
   - 启动 SillyTavern 并导航到 **Extensions** > **Assets**。
   - 点击"Connect"按钮建立与官方资源库的连接。
   - 下载所需的音频资源，如背景音乐（BGM）或环境音效，这些资源应与您打算使用的背景相对应。

2. **启用动态音频扩展**：
   - 在 SillyTavern 中，转到 **Extensions** > **Dynamic Audio**。
   - 启用扩展，取消静音并根据您的偏好调整 BGM 和环境音效的音量。
   - 当 BGM 结束时，将随机播放另一首，点击循环按钮可以保持当前 BGM 持续播放。
   - 点击随机按钮可以随机选择另一首 BGM。

3. **基于表情的 BGM**：
   - 如果您希望 BGM 跟随角色表情变化，请启用表情 BGM 开关（需要在角色文件夹中有 BGM，详见下文）。
   - 调整 BGM 更新之间的冷却时间（以秒为单位）。如果您发现在群聊中或使用基于情绪检测的角色特定 BGM 时音乐变化太频繁，请增加这个值。

## 为角色导入音乐

要为角色的情绪设置自定义音乐，请按照以下步骤操作：

1. **导航到角色文件夹**：
   - 转到角色文件夹，例如 `\SillyTavern\data\<user-handle>\characters\Seraphina`。

2. **创建 BGM 文件夹**：
   - 在角色文件夹内，创建一个名为 `bgm` 的子文件夹。

3. **导入情绪音乐**：
   - 在 `bgm` 文件夹内，导入每种情绪的音乐文件。支持的音频扩展名包括 `.mp3`、`.ogg` 和 `.wav`。
   - 命名规则：`[emotion]_[number].mp3`，例如 `anger_0.mp3`、`joy_0.mp3`。

4. **每种情绪的多个音轨**：
   - 您可以通过递增数字为同一情绪导入多个音轨，例如 `neutral_1.mp3`、`neutral_2.mp3`。

5. **默认音乐选择**：
   - 当未检测到情绪时，将随机播放一个中性音轨作为默认值。情绪检测的方式与更新精灵图类似；详情请参阅[表情图片文档](/extensions/Expression-Images.md)。

## 更改默认 BGM 音乐

如果角色的文件夹中没有自定义 BGM，将播放默认音轨。以下是更改方法：

1. **导航到 BGM 文件夹**：
   - 转到以下文件夹：`\SillyTavern\data\<user-handle>\assets\bgm`。

2. **替换/添加音乐**：
   - 替换或添加音乐文件（`.mp3`、`.ogg`、`.wav`）到此文件夹。
   - 这些是使用资源扩展下载的官方音频资源。
   - 当找不到角色特定的 BGM 时（单人或群聊），将随机播放其中一个音轨。

## 更改环境音效

环境音效为您的场景增添深度。以下是自定义方法：

1. **导航到环境音效文件夹**：
   - 转到以下文件夹：`\SillyTavern\data\<user-handle>\assets\ambient`。

2. **文件命名规则**：
   - 环境音频文件名与背景图片文件名对应，将空格替换为破折号。
   - 示例："bedroom-clean.mp3"对应"bedroom clean.jpg"背景。
   - 如果锁定按钮未锁定，将播放与背景对应的音频文件。激活锁定将保持当前环境音效继续播放。

3. **自定义环境音效**：
   - 您可以按照相同的命名模式为自定义或现有背景添加自己的环境音效。

感谢您阅读本指南！您的 SillyTavern 体验现在已通过动态音频得到增强。
