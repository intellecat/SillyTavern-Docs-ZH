[[{"i":"什么是-sillytavern","l":"什么是 SillyTavern？","p":["SillyTavern - 为高级用户打造的 LLM 前端界面","SillyTavern（简称 ST）是一个本地安装的用户界面，允许您与文本生成 LLM、图像生成引擎和 TTS 语音模型进行交互。我们的目标是为用户提供尽可能多的 LLM 提示词实用工具和控制能力，将陡峭的学习曲线视为乐趣的一部分。","SillyTavern 是由一群热衷于 LLM 的社区成员带来的热情项目，将永远保持免费和开源。始于 2023 年 2 月，作为 TavernAI 1.2.8 的一个分支，SillyTavern 现在已有超过 100 名贡献者和 2 年的独立开发历程，并继续作为精通 AI 的爱好者的领先软件。"]},{"l":"截图","p":["API 连接","聊天界面","高级格式化","世界信息"]},{"l":"安装要求","p":["硬件要求很低：任何能运行 NodeJS 18 或更高版本的设备都可以运行。如果您打算在本地机器上进行 LLM 推理，我们建议使用具有至少 6GB 显存的 3000 系列 NVIDIA 显卡。","请根据您的平台选择相应的安装指南：","Windows","Linux 和 Mac","Android","Docker"]},{"l":"分支","p":["SillyTavern 使用双分支系统开发，以确保所有用户获得流畅的体验。","release-\uD83C\uDF1F 推荐大多数用户使用。 这是最稳定且推荐的分支，仅在主要版本发布时更新。适合大多数用户。通常每月更新一次。","staging- ⚠️ 不推荐日常使用。 此分支具有最新功能，但请注意它可能随时出现问题。仅适用于高级用户和爱好者。每天更新多次。"]},{"i":"除了-sillytavern-之外我还需要什么","l":"除了 SillyTavern 之外我还需要什么？","p":["由于 SillyTavern 只是一个界面，您需要访问 LLM 后端来提供推理服务。您可以使用 AI Horde 进行即时开箱即用的聊天。除此之外，我们还支持许多其他本地和云端 LLM 后端：OpenAI 兼容 API、KoboldAI、Tabby 等等。您可以在 API 连接 部分阅读更多关于我们支持的 API 的信息。"]},{"l":"角色卡片","p":["SillyTavern 是围绕\"角色卡片\"的概念构建的。角色卡片是一组设置 LLM 行为的提示词，在 SillyTavern 中进行持续对话时需要使用。它们的功能类似于 ChatGPT 的 GPTs 或 Poe 的机器人。角色卡片的内容可以是任何内容：抽象场景、为特定任务定制的助手、著名人物或虚构角色。","名称字段是唯一必需的角色卡片输入。要与语言模型进行中性对话，只需创建一个名为\"Assistant\"的新卡片，并将其他框留空。要进行更有主题的聊天，您可以为语言模型提供各种背景细节、行为和写作模式，以及一个启动聊天的场景。","要在不选择角色卡片的情况下进行快速对话，或者只是测试 LLM 连接，只需在打开 SillyTavern 后在欢迎屏幕的输入栏中输入您的提示即可。请注意，此类聊天是临时的，不会被保存。","要了解如何定义角色卡片的一般思路，请参考默认角色（Seraphina）或从\"下载扩展和资源\"菜单下载精选的社区制作卡片。","您也可以从头开始创建自己的角色卡片。有关更多信息，请参阅 角色设计 指南。"]},{"l":"主要功能","p":["带有许多社区制作预设的高级 文本生成设置","世界信息支持：为您的角色卡片创建丰富的背景或节省令牌","群聊：多机器人房间，让角色与您和/或彼此交谈","丰富的 UI 自定义选项：主题颜色、背景图片、自定义 CSS 等","用户角色：让 AI 了解您的一些信息，以增强沉浸感","内置 RAG 支持：将文档添加到您的聊天中供 AI 参考","广泛的 聊天命令 子系统和自己的 脚本引擎"]},{"l":"扩展","p":["SillyTavern 支持扩展功能。","角色情感表情（精灵图）","聊天历史自动摘要","自动 UI 和 聊天翻译","Stable Diffusion/FLUX/DALL-E 图像生成","AI 回复消息的文本转语音（通过 ElevenLabs、Silero 或系统 TTS）","网络搜索功能，为您的提示添加额外的真实世界背景","更多扩展可从\"下载扩展和资源\"菜单下载。"]},{"i":"如何直接联系开发者","l":"如何直接联系开发者？","p":["Discord: cohee, rossascends, wolfsblvt","Reddit: /u/RossAscends, /u/sillylossy, u/Wolfsblvt","提交 GitHub 问题"]},{"i":"我喜欢你们的项目如何贡献","l":"我喜欢你们的项目！如何贡献？","p":["我们欢迎拉取请求！按照 贡献指南 开始。","我们也欢迎有帮助和信息的错误报告，请使用 GitHub 中提供的模板。","我们不接受项目本身的金钱捐赠。"]},{"l":"个人捐赠","p":["我们感谢您对个人贡献者的支持，但这不会影响 SillyTavern 的整体开发方向。","RossAscends 有个人 Patreon 和 Kofi"]},{"l":"许可证","p":["SillyTavern 是一个免费和开源项目，根据 AGPL-3.0 许可证 发布。"]}],[{"l":"安装指南","p":["请根据您的平台选择相应的安装指南：","Windows","Linux and Mac","Android","Docker"]},{"l":"分支说明","p":["SillyTavern 采用双分支开发系统，以确保所有用户获得流畅的使用体验。","release- \uD83C\uDF1F 推荐大多数用户使用。 这是最稳定且推荐的分支，仅在发布重要版本时更新。适合绝大多数用户使用。通常每月更新一次。","staging- ⚠️ 不建议普通用户使用。 此分支包含最新功能，但请注意它可能随时出现问题。仅适合专业用户和发烧友使用。每天更新多次。"]}],[{"l":"Windows 安装指南","p":["不要安装在任何 Windows 控制的文件夹中（Program Files、System32 等）。","不要以管理员权限运行 START.BAT","由于 Windows 7 无法运行 NodeJS 18.16，因此无法在 Windows 7 上安装"]},{"l":"通过 Git 安装","p":["安装 NodeJS（推荐使用最新的 LTS 版本）","安装 Git for Windows","打开 Windows 资源管理器（ Win+E）","浏览或创建一个不受 Windows 控制或监视的文件夹（例如：C:\\MySpecialFolder\\）","通过点击顶部的\"地址栏\"，输入 cmd 并按回车键，在该文件夹中打开命令提示符。","当黑色框（命令提示符）弹出后，输入以下其中一个命令并按回车：","Release 分支： git clone https://github.com/SillyTavern/SillyTavern -b release","Staging 分支： git clone https://github.com/SillyTavern/SillyTavern -b staging","克隆完成后，双击 Start.bat 让 NodeJS 安装所需的依赖。","服务器随后将启动，SillyTavern 将在您的浏览器中打开。"]},{"l":"通过 SillyTavern Launcher 安装","p":["在键盘上：按 WINDOWS + R 打开运行对话框。然后运行以下命令安装 git：","在键盘上：按 WINDOWS + E 打开文件资源管理器，然后导航到您想要安装启动器的文件夹。进入目标文件夹后，在地址栏中输入 cmd 并按回车。然后运行以下命令："]},{"l":"通过 GitHub Desktop 安装","p":["（这种方法仅允许在 GitHub Desktop 中使用 git，如果您也想在命令行中使用 git，您还需要安装 Git for Windows）","安装 NodeJS（推荐使用最新的 LTS 版本）","安装 GitHub Desktop","安装 GitHub Desktop 后，点击 Clone a repository from the internet....（注意：这一步 不需要 创建 GitHub 账户）","image","在菜单中，点击 URL 标签页，输入此 URL https://github.com/SillyTavern/SillyTavern，然后点击 Clone。您可以更改本地路径来改变 SillyTavern 的下载位置。","要打开 SillyTavern，使用 Windows 资源管理器浏览到您克隆仓库的文件夹。默认情况下，仓库将被克隆到： C:\\Users\\[您的 Windows 用户名]\\Documents\\GitHub\\SillyTavern","双击 start.bat 文件。（注意：文件名中的 .bat 部分可能被您的操作系统隐藏，在这种情况下，它看起来像一个名为 \" Start\" 的文件。这就是您需要双击运行 SillyTavern 的文件）","双击后，一个大的黑色命令控制台窗口将打开，SillyTavern 将开始安装运行所需的内容。","安装过程完成后，如果一切正常，命令控制台窗口应该如下所示，并且 SillyTavern 标签页应该在您的浏览器中打开：","连接到任何 支持的 API 并开始聊天！"]}],[{"i":"linuxmacos-安装指南","l":"Linux/MacOS 安装指南"},{"l":"手动 Git 安装","p":["对于 MacOS / Linux，所有这些操作都将在终端（Terminal）中完成。","安装 git 和 nodeJS（具体方法将根据您的操作系统而异）","克隆仓库","Release 分支： git clone https://github.com/SillyTavern/SillyTavern -b release","Staging 分支： git clone https://github.com/SillyTavern/SillyTavern -b staging","使用 cd SillyTavern 进入安装文件夹。","使用以下任一命令运行 start.sh 脚本：","./start.sh","bash start.sh"]},{"l":"SillyTavern Launcher"},{"l":"Linux 用户","p":["打开您喜欢的终端并安装 git","使用以下命令下载 Sillytavern Launcher： git clone https://github.com/SillyTavern/SillyTavern-Launcher.git","使用以下命令进入 SillyTavern-Launcher： cd SillyTavern-Launcher","使用以下命令启动安装程序： chmod +x install.sh ./install.sh 并选择您想要安装的内容","安装完成后，使用以下命令启动启动器： chmod +x launcher.sh ./launcher.sh"]},{"l":"Mac 用户","p":["打开终端并使用以下命令安装 brew：/bin/bash -c $(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)","然后使用以下命令安装 git： brew install git","使用以下命令下载 Sillytavern Launcher： git clone https://github.com/SillyTavern/SillyTavern-Launcher.git","使用以下命令进入 SillyTavern-Launcher： cd SillyTavern-Launcher","使用以下命令启动安装程序： chmod +x install.sh ./install.sh 并选择您想要安装的内容","安装完成后，使用以下命令启动启动器： chmod +x launcher.sh ./launcher.sh"]}],[{"i":"android-termux-安装指南","l":"Android (Termux) 安装指南","p":["SillyTavern 可以通过 Termux 在 Android 手机上原生运行。","请参考 ArroganceComplex#2659 提供的指南：","https://rentry.org/STAI-Termux"]},{"l":"常见错误"},{"i":"unsupported-platform-android-arm-letime-web","l":"Unsupported platform: android arm LEtime-web","p":["32位 Android 需要一个无法通过 npm 安装的外部依赖。","使用以下命令进行安装：","pkg install esbuild","然后按照指南中的步骤继续操作。"]}],[{"l":"Docker 安装指南","p":["本指南假设您在非 root（非管理员）文件夹中安装 SillyTavern。如果您在 root 文件夹中安装 SillyTavern，您可能需要使用管理员权限运行某些命令[sudo、 doas、Command Prompt (Administrator)]。"]},{"l":"安装"},{"l":"Linux","p":["Arch Linux (Manjaro/EndeavourOS/等)","Debian (Ubuntu/Pop! OS/等)","Fedora, Red Hat Enterprise Linux (RHEL), 等","Release (稳定分支)","Staging (开发分支)","不要 安装 Docker Desktop。","使用 sudo 打开 nano 并运行以下命令：","使用包管理器安装 Git。","克隆 SillyTavern 仓库。","在 127.0.0.1 下面添加一行，输入您从 Docker 复制的 IP 地址。完成后应该类似这样：","在 Docker 文件夹中运行以下命令执行 docker compose。","在 nano 中，找到 whitelist。您应该会看到类似下面的内容：","尽情享用！ :D","您应该会看到类似下面的输出：","打开新的浏览器并访问 http://localhost:8000。几分钟后您应该就能看到 SillyTavern 加载完成。","执行以下 Docker 命令获取 SillyTavern Docker 容器的 IP 地址。","按 Ctrl+S 保存文件，然后按 Ctrl+X 退出 nano。","按照 Docker 安装后配置指南 中的 以非 root 用户身份管理 Docker 部分进行操作。","注意，如果您将 Docker 网络配置为桥接模式，您也可以像往常一样将外部 IP 地址添加到白名单中。","记下您在 Gateway 中看到的 IP 地址，这很重要。","请按照 此处 的 Docker 安装指南安装 Docker。","重启 Docker 容器以应用新配置。"]},{"l":"Windows","p":["Release (稳定分支)","Staging (开发分支)","以管理员权限运行 Notepad 或您选择的代码编辑器，进入 config 目录并打开 config.yaml。","克隆 SillyTavern 仓库。","在 127.0.0.1 下面添加一行，输入您从 Docker 复制的 IP 地址。完成后应该类似这样：","在 Docker 文件夹中运行以下命令执行 docker compose。","在 Windows 上使用 Docker 非常 复杂。您不仅需要在\"启用或关闭 Windows 功能\"中激活 Windows Subsystem for Linux，还需要为虚拟化配置系统（Intel VT-d/AMD SVM），这因 PC 制造商（或主板制造商）而异。有时，某些系统上甚至没有这个选项。","在您选择的编辑器中，您应该会看到类似下面的内容：","安装 Git for Windows。","尽情享用！ :D","强烈建议您按照我们的 Windows 指南安装 SillyTavern。本节仅是在 Windows 上安装的一个_粗略_思路。","您应该会看到类似下面的输出：","打开新的浏览器并访问 http://localhost:8000。几分钟后您应该就能看到 SillyTavern 加载完成。","执行以下 Docker 命令获取 SillyTavern Docker 容器的 IP 地址。","按 Ctrl+S 保存文件，然后退出编辑器。","按照 此处 的 Docker 安装指南安装 Docker Desktop。","注意，如果您将 Docker 网络配置为桥接模式，您也可以像往常一样将外部 IP 地址添加到白名单中。","记下您在 Gateway 中看到的 IP 地址，这很重要。","重启 Docker 容器以应用新配置。"]},{"l":"macOS","p":["Add a new line below 127.0.0.1 and put in the IP you copied from Docker. It should look something similar to the following afterwards.","Enjoy! :D","If you can't run nano, either install it via Homebrew or use TextEdit.","Note that if you configured Docker network as a bridge, you could also add external IP addresses to the whitelist as usual.","Open an new browser and go to http://localhost:8000. You should see SillyTavern load in a few moments.","Release (稳定分支)","Restart the Docker Container to apply the new configuration.","Save the file by pressing Ctrl+S then exit nano by pressing Ctrl+X.","Staging (开发分支)","Within nano, go down to whitelist. You should see something similar to the following below.","使用 Homebrew 安装 git。","使用 sudo 打开 nano 并运行以下命令。","克隆 SillyTavern 仓库。","在 Docker 文件夹中运行以下命令执行 docker compose。","尽管 macOS 与 Linux 类似，但它没有 Docker Engine。您需要像 Windows 一样安装 Docker Desktop。 您还需要安装 Homebrew 以在 Mac 上安装 Git。本节仅是在 macOS 上安装的一个_粗略_思路。","您应该会看到类似下面的输出：","执行以下 Docker 命令获取 SillyTavern Docker 容器的 IP 地址。","按照 此处 的 Docker 安装指南安装 Docker Desktop。","记下您在 Gateway 中看到的 IP 地址，这很重要。"]},{"l":"Configuring SillyTavern","p":["SillyTavern's configuration file (config.yaml) will be located within the config folder. Configuring the config file should be no different than configuring it without Docker, however you will need to run nano or a code editor with administrator rights in order to save your changes.","Don't forget to restart the Docker container for SillyTavern in order to apply your changes! Make sure you execute this command within the docker folder."]},{"l":"Locating User Data","p":["SillyTavern's data folder will be within the data folder. Backing up your files should be easy to do, however, restoring or adding content into it may require you to do so with administrator rights."]},{"l":"Running Server Plugins","p":["Running plugins like HoYoWiki-Scraper-TS or SillyTavern-Fandom-Scraper within Docker is no different from running it on your system without Docker, however we will need to do a slight modification to the Docker Compose script in order to do so.","If you already see a plugins folder within the docker folder, you can skip Steps 1-2.","Using nano or a code editor, open docker-compose.yml and add the following line below volumes.","Create a new folder within the docker folder called plugins.","Follow your plugin's instructions on installing the plugin.","Using nano or a code editor with administrator rights, open config.yaml(within the config folder) and enable enableServerPlugins","Restart the Docker container.","Profit."]}],[{"l":"如何更新 SillyTavern","p":["找到您的操作系统并按照说明更新 ST。","本指南假设您已经至少安装并运行过一次 SillyTavern。"]},{"i":"linuxtermux-或-macos","l":"Linux/Termux 或 MacOS","p":["您肯定是通过 git 安装的，所以只需在 SillyTavern 目录中执行 'git pull'。","使用 cd SillyTavern 进入正确的文件夹。","使用 git pull 获取更新。","使用 ./start.sh 或 bash start.sh 启动 ST。"]},{"l":"Windows","p":["首先尝试使用位于 SillyTavern 安装根文件夹中的 UpdateAndStart.bat。","如果失败，请返回此处继续阅读。"]},{"i":"方法-1---git","l":"方法 1 - GIT","p":["我们始终建议用户使用 'git' 安装。原因如下：","当您通过 git clone 安装时，要更新只需 在 ST 文件夹的命令行中 输入 git pull。 或者，如果命令提示符出现问题（并且您已安装 GitHub Desktop），您可以使用 Repository 菜单并选择 Pull。","更新会自动安全地应用。"]},{"i":"帮助我最初是通过-zip-安装的现在想转换为-git-安装","l":"\"帮助！我最初是通过 Zip 安装的，现在想转换为 Git 安装\"","p":["您选择了一条明智的道路。","由于您的安装是通过 Zip 完成的，您需要使用 git 进行新的安装。","幸运的是，我们有 相关说明。","一旦您使用 git 在不同的文件夹中安装了新的 SillyTavern，请返回此页面并继续执行下面 'Zip 更新' 说明中的 第 4 步。"]},{"i":"方法-2---zip","l":"方法 2 - ZIP","p":["(*) '根据需要' = \"如果您创建了与这些文件夹相关的任何自定义内容\"。","1.12.0 包含自动迁移程序。仅在迁移被中断或出错时才需要执行以下步骤。","一旦这些文件夹/文件被复制，将它们粘贴到新安装的 /data/default-user 文件夹中（secrets.json 放在文件夹根目录中）。","下载新的发布 zip。","使用适合您操作系统的方法再次启动 SillyTavern，并祈祷一切正常。","如果一切都显示正常，您可以安全地删除旧的 ST 文件夹。","如果您坚持通过 zip 安装，以下是更新的繁琐过程：","将 /data 目录和 config.yaml 文件从一个安装复制到另一个安装。","将其解压到当前 ST 安装目录之外的文件夹中。","所有文件夹都不是强制性的，只复制您需要的内容。","按照您的操作系统的常规设置程序安装 NodeJS 要求。","根据需要(*)从旧的 ST 安装中复制以下文件/文件夹：","根据需要将文件从旧的 /public 转移到新的 /data/default-user。","注意：不要复制整个 /PUBLIC/ 文件夹","至少运行一次更新后的服务器安装以创建 /data/default-user 目录。","这样做可能会破坏新安装并阻止新功能的出现。"]},{"l":"常见更新问题"},{"i":"我使用-docker更新后所有数据都消失了","l":"我使用 Docker，更新后所有数据都消失了！","p":["如果您使用的是 Docker 容器，请参阅 容器化 Docker 安装。"]},{"i":"工作目录中有未解决的冲突","l":"\"工作目录中有未解决的冲突。\"","p":["这意味着您修改了在远程仓库中已更改的默认文件（如设置预设）。","要修复此问题，请在终端中运行以下命令。请谨慎使用，因为它可能具有破坏性。如有需要，请确保有备份。"]},{"l":"文件更改阻止 git pull","p":["如果您更改 SillyTavern 系统文件， git pull 可能无法工作。","有时更新可能需要我们更改重要文件，这可能导致相同的问题。","通常是默认预设文件或 package-lock.json。","在这种情况下，您可以尝试将文件移动到不同的文件夹（或删除文件），然后执行 git pull。","另一个解决方案是使用 git pull --rebase --autostash"]},{"i":"启动服务器时出现错误找不到模块-","l":"启动服务器时出现错误：找不到模块 \"***\"","p":["这意味着 SillyTavern 添加了新的 npm 包要求。","在 SillyTavern 目录中运行 npm install 可以修复此问题。提供的 Start.bat 和 start.sh 脚本会自动执行此操作。","没有帮助？删除 node_modules 文件夹","Windows","Unix/Linux"]}],[{"i":"1120-迁移指南","l":"1.12.0 迁移指南","p":["SillyTavern 1.12.0（代号 \"Neo Server\" 更新）包含几个可能影响您使用 SillyTavern 方式的关键更改。","本指南将帮助您为更新做好准备并提供进一步的指导。"]},{"l":"数据存储更新","p":["1.12.0 改变了 SillyTavern 处理用户数据的方式。","之前，所有持久数据都与前端部分一起存储在 /public 目录中，这造成了混乱和潜在的故障点，同时也使容器化和系统级应用程序安装变得相当具有挑战性。"]},{"i":"有什么变化","l":"有什么变化？","p":["所有来自 /public 的持久信息，如设置和聊天记录（完整列表见下文）都被移动到一个可配置路径的单独目录中，使其可移植且独立于 Web 服务器本身。当出于兼容性目的需要时，例如托管扩展、全尺寸角色卡片、用户图片上传等，已设置智能重定向以自动从数据目录托管用户文件。"]},{"l":"设置数据根目录","p":["您可以通过 config.yaml 或使用 --dataRoot 控制台参数启动服务器，提供数据根目录的绝对路径或相对路径（相对于 ST 仓库目录）。","YAML 示例","控制台示例","默认的数据根路径是 ./data，即 SillyTavern 仓库中的 data 目录。","数据根路径应该是 完整的绝对路径 或 完整的相对路径。您_不能_使用路径快捷方式，如 ~ 或 %APP_DATA%，因为这些是由 shell 解析的，而不是操作系统。"]},{"l":"迁移"},{"i":"重要-开始之前","l":"重要！ 开始之前","p":["仅当您想要从默认位置移动 dataRoot 时。否则，请跳过此部分。 在首次运行更新后的服务器之前设置数据根目录。运行 npm install 使 config.yaml 填充新值，或传递控制台参数。","所有数据将迁移到 default-user 账户中。更多信息请参见下面的 用户 部分。"]},{"i":"非容器裸机安装","l":"非容器（裸机）安装","p":["您不需要做任何事情！当您启动 ST 服务器并检测到旧的存储格式（通过检查 /public/characters 目录是否存在）时，自动迁移将为您处理一切。","移动任何文件时，将在 /backups/_migration/YYYY-MM-DD（解析为当前日期）目录中创建自动备份，但在运行迁移之前进行完整的手动备份始终是一个好习惯。"]},{"i":"容器化docker安装","l":"容器化（Docker）安装","p":["在 Docker 卷中迁移数据稍微复杂一些，但也很直接。虽然仓库提供的 docker-compose.yml 已更新以反映这些更改，但您可能需要调整自定义工作流程/部署。","第 1 步。 创建一个新卷，并将其挂载到容器内的 \"/home/node/app/data\" 路径。不要删除 config 卷。","第 2 步。 将除 config.yaml 文件外的所有内容从 config 卷移动到 data 卷的 default-user 子目录中。","第 3 步。 重建容器并启动它。","/public 目录和 config 卷之间的软链接不再需要，也不会内置到 Docker 容器中！"]},{"i":"需要迁移什么","l":"需要迁移什么？","p":["/data/default-user/assets","/data/default-user/backgrounds","/data/default-user/characters","/data/default-user/chats","/data/default-user/content.log","/data/default-user/context","/data/default-user/extensions","/data/default-user/group chats","/data/default-user/groups","/data/default-user/instruct","/data/default-user/KoboldAI Settings","/data/default-user/movingUI","/data/default-user/NovelAI Settings","/data/default-user/OpenAI Settings","/data/default-user/QuickReplies","/data/default-user/secrets.json","/data/default-user/settings.json","/data/default-user/stats.json","/data/default-user/TextGen Settings","/data/default-user/themes","/data/default-user/thumbnails","/data/default-user/vectors","/data/default-user/worlds","/default/content/content.log","/public/assets","/public/backgrounds","/public/characters","/public/chats","/public/context","/public/group chats","/public/groups","/public/instruct","/public/KoboldAI Settings","/public/movingUI","/public/NovelAI Settings","/public/OpenAI Settings","/public/QuickReplies","/public/scripts/extensions/third-party","/public/settings.json","/public/stats.json","/public/TextGen Settings","/public/themes","/public/worlds","/secrets.json","/thumbnails","/vectors","以下文件和目录需要进行数据迁移。假设使用默认配置，下表提供了迁移前后的路径。","迁移前","迁移后"]},{"l":"用户","p":["1.12.0 添加了（完全可选的）在同一服务器上创建多用户设置的功能，允许多个用户甚至同时使用他们自己完全隔离的 SillyTavern 实例。用户账户还可以通过密码保护，提供额外的隐私层。","更多信息请参阅 用户 文档。"]}],[{"i":"190-迁移指南","l":"1.9.0 迁移指南"},{"i":"如果我使用-maindev如何迁移到新分支","l":"如果我使用 main/dev，如何迁移到新分支？","p":["建议进行全新安装。 但是，如果您希望使用现有的 SillyTavern 副本，请按照以下说明操作。","重要！ 在做任何事情之前，请对您的安装进行 完整备份。在此过程中，您可能会 丢失数据，所以不要忽视这个警告。","有关更新说明，请参阅 从 1.12.0 更新到 1.12.0。","不确定需要备份哪些文件？请参阅此处的列表： 如何更新 SillyTavern"]},{"l":"git 安装","p":["在您的 SillyTavern 安装文件夹中打开终端提示符（cmd、PowerShell、Termux 等）。","输入 git fetch 然后 git pull 以拉取更新。","您可能会丢失设置。您做了备份吗？ git switch release 或 git switch staging 将分别切换您的分支","如果没有错误，请跳到下一项。您可能会遇到类似这样的情况：","您将看到受影响文件的列表。如果您不在意这些设置文件被替换， git switch -f release 或 git switch -f staging 将设置您的分支。 如果您想保存这些更改，请从备份中恢复。","输入 npm install 然后 npm run start 以测试一切是否正常运行。","尽情享用！如果需要，从备份中恢复数据。"]},{"i":"fatal-invalid-reference-release","l":"fatal: invalid reference: release","p":["如果您只从旧的远程仓库（在迁移到组织仓库之前）克隆了单个分支，可能会发生这种情况。要修复此问题，您需要从新的远程仓库添加并获取分支：","然后从第 5 步继续。"]},{"l":"ZIP 安装","p":["对您来说没有任何变化。像往常一样下载分支/发布 ZIP 即可。"]}],[{"l":"使用指南","p":["API 连接","世界信息","为 AI 或界面添加新功能和能力","以您的方式与 AI 互动。构建您的世界、您的工作或您的梦想。","关于 SillyTavern、AI 模型、创建角色、获得更好回应等常见问题","创建和使用角色来塑造 AI 的角色，以及定义您的身份的个性","向 AI 发送您的第一条消息并获得回应","回应配置 和 提示词","如何与 AI 聊天并使用聊天界面","存储和检索信息以用于 AI 的回应","常见问题","开发和自动化","快速入门","扩展","控制您发送给 AI 的请求以及它如何回应","数据库","管理信息以及何时将其插入提示词中","聊天","自动化任务，让您的 AI 与世界互动，并编写您自己的扩展","角色 和 个性","连接到 AI 模型以生成文本、图像等"]},{"l":"控制面板","p":["API 连接","世界信息","个性","为 AI 或界面添加新功能和能力","为 Text Completion API 自定义提示词构建","从左到右所有按钮的功能：","创建和管理 AI 使用的角色","创建和管理用于 AI 的个性","回应配置 和 提示词管理器","扩展","控制文本生成和采样。为 Chat Completion API 自定义提示词构建。","更改主题，以及消息和聊天的外观和感觉","更改背景图片","用户设置","管理信息以及何时将其插入提示词中","背景","角色","连接到 AI 模型以生成文本、图像等","高级格式化"]}],[{"l":"快速入门","p":["我完全不知道从何下手。请告诉我使用 SillyTavern 最简单最快的方法。 -- 匿名用户","您只需几分钟就可以开始使用 SillyTavern。以下是两种简单的入门方式：","您可以 使用 AI Horde，这是免费的。AI Horde 是一个社区驱动的 AI 服务，提供各种 AI 模型的访问。","如果您有 OpenAI 账户或想注册一个，您可以 使用 OpenAI。"]},{"l":"使用 AI Horde 快速入门","p":["按照 安装指南 安装并启动 SillyTavern。","在 SillyTavern 的引导界面中，为您的角色输入一个名字。这个名字将在聊天中使用。","这是一个可选的标题","点击顶部栏中的 API 连接按钮。","输入 AI Horde 的 API 密钥。您现在可以使用 0000000000，或者从 AI Horde 获取一个免费密钥。","选择一些要使用的 AI 模型。只需从顶部选择几个即可。您以后随时可以更改它们。","关闭 API 连接窗口。在底部的聊天框中输入消息并按回车键。","您的 AI 将在几分钟内回复。您可以继续与它 聊天。成功！"]},{"l":"使用 OpenAI 快速入门"},{"l":"安装 SillyTavern","p":["按照 安装指南 安装并启动 SillyTavern。"]},{"l":"获取 OpenAI 访问权限","p":["注册 OpenAI。","访问 https://platform.openai.com","点击右上角的账户图标，然后选择查看 API 密钥。","点击\"创建新的密钥\"。立即将其复制到某处。 不要分享这个密钥。任何拥有它的人都可以使用您的账户使用 GPT，费用由您承担。"]},{"l":"配置 SillyTavern 使用您的 API","p":["在 SillyTavern 的顶部栏中，点击 API 连接。","在 API 下，选择 Chat Completion (OpenAI)。","在 Chat Completion Source 下，选择 OpenAI。","粘贴您在上一步中保存的 API 密钥。","点击连接按钮。确认显示有效。","默认情况下，SillyTavern 将使用 GPT-4 Turbo。您可以选择不同的模型，但请了解相关定价。"]},{"l":"测试您的设置","p":["在 SillyTavern 的顶部栏中，点击最右侧的角色管理。","选择一个现有角色，如 Seraphina。","在底部的文本框中，向 Seraphina 写些什么，然后按回车键或点击发送按钮。","如果您一切设置正确，几秒钟后，Seraphina 应该会回复。"]}],[{"l":"常见问题"},{"l":"解释 SillyTavern 是什么","p":["现代 AI 语言模型（如 ChatGPT）已经变得如此强大，其中一些现在可以令人信服地模拟您创建的角色，您可以与之聊天、一起写小说等。例如，您可以让 AI 假装是一位来自中世纪日本的围棋教练 Jubei，它会相应地行动和回应。您可以与 Jubei 进行长时间的聊天，一起去酒馆，决定与武士打斗，任何您能想象的事情，AI 都会配合并围绕这些内容进行写作/反应，充当您的对手和地下城主。您的想象力就是极限。您可以让 AI 假装它是神奇女侠。您还可以指定场景（\"神奇女侠和我正在抢劫银行\"）、写作风格（\"神奇女侠说黑人英语\"），或任何您能想到的其他内容。","SillyTavern 是一个促进这些用途的应用程序：","它是一个处理与 AI 语言模型通信的用户界面。","它让您可以创建新的角色卡片（提示词），并轻松在它们之间切换。","它让您可以导入其他人创建的角色。","它会保存您与角色的聊天历史，允许您随时恢复、开始新的聊天、查看旧的聊天等。","在后台，它会为您做必要的事情来准备 AI 提示词。具体来说，它会发送一个系统提示（AI 的指令），让 AI 遵循某些规则以提高回应的准确性。"]},{"l":"给我一个 AI 模型选项的概述","p":["SillyTavern 可以与两种类型的 AI 交互：","Web 服务（基于云的，通常是付费的，专有的，封闭的）","自托管（本地的，免费的，开源的）"]},{"l":"付费 Web 服务 AI","p":["付费 Web 模型是黑盒子。您付费给公司使用他们的 AI 服务。您在 SillyTavern 中输入您的账户信息，它将代表您连接到您的提供商以使用 AI。","优点：","真的很容易上手。","最高质量的 AI 写作。","缺点：","使用需要付费。","所有内容都记录在他们的服务器上。隐私问题。","它们经常被审查，会拒绝与您讨论某些主题。"]},{"l":"自托管 AI","p":["自托管模型是您可以在 PC 上运行的免费模型，但需要强大的 PC 和更多的设置工作。","优点：","一旦设置好，即使没有互联网连接也可以免费使用。","完全的隐私。您写的所有内容都保存在您自己的 PC 上。","有各种各样的模型。作为一项社区驱动的技术，您可以找到适合您想要的特定任务或行为的模型。","缺点：","它们不如 SOTA 模型强大（即，它们写的对话更差，创造力更低等）。","运行本地模型需要至少 6GB VRAM 的 GPU。","如果您对使用这些感兴趣，请参考这里的专门指南： 如何使用自托管模型。"]},{"i":"我可以在手机或平板电脑上使用-sillytavern-吗","l":"我可以在手机或平板电脑上使用 SillyTavern 吗？","p":["iPhone 和 iPad 无法运行完整的 SillyTavern 应用程序，但由于它只是一个网络界面，您可以在家庭 Wi-Fi 上的另一台计算机上运行它，然后在移动浏览器中访问它。更多信息请参考 远程连接。","对于 Android 用户，除了上述方法外，您还可以使用 Termux 应用程序直接在手机上运行完整的 SillyTavern，无需 PC。请参考 安装（Android）。（注意：Termux 安装不受官方支持，我们不能保证它会正常工作。）"]},{"i":"我试图导入-png-角色卡片但收到无效的错误为什么","l":"我试图导入 PNG 角色卡片但收到无效的错误。为什么？","p":["两种可能性：","卡片内部没有嵌入定义，只是一个普通的图像文件。当您保存它们时，某些程序或文件管理器会从卡片中删除嵌入的定义。确保您使用的是分享者发布的原始 PNG 文件。","PNG 文件实际上是一个带有 .png 文件名的 WEBP 文件。您可以尝试在导入前将卡片重命名为 .webp，或寻找图像的正确 PNG 版本。"]},{"i":"我如何创建自己的-ai-角色","l":"我如何创建自己的 AI 角色？","p":["点击角色管理按钮","点击创建新角色","在角色名称下，给出一个名字，比如 Amanda","可选地，点击选择头像按钮为这个角色选择一个肖像图片","在描述下，描述这个角色，并包含您认为与聊天相关的任何信息。例如： Amanda 是一个在间隔年旅行的学生。她身高 6 英尺，是一名排球运动员。她有运动员的身材。她有长长的棕色头发。她喜欢维多利亚时期的英国，喜欢看与那个时期有关的电视和小说。 例如，如果您想让 Amanda 友好，那么您可以添加： Amanda 非常开朗外向。","在第一条消息下，写下开始新聊天时角色的问候语。例如：*Amanda 向您挥手* 嘿！你也是背包客吗？","点击创建角色按钮","现在您有了一个可以聊天的基本角色。从角色列表中选择 Amanda，新的聊天就会开始。","请注意，您可以使用描述和/或第一条消息来创建更具体的场景，和/或在描述中包含您自己。例如：","您包含的任何相关信息都可以被使用。使用得有多好取决于 AI 模型的能力水平。","注意：一旦创建了角色，您可以返回编辑任何这些信息，除了名字。"]},{"i":"我的-api-密钥存储在哪里为什么我看不到它们","l":"我的 API 密钥存储在哪里？为什么我看不到它们？","p":["SillyTavern 将您的 API 密钥保存在服务器目录中的 secrets.json 文件中。","默认情况下，在您输入它们并重新加载页面后，它们不会暴露给前端。","要启用通过点击 API 块中的按钮查看您的密钥：","在 config.yaml 文件中将 allowKeysExposure 的值设置为 true。","重启 SillyTavern 服务器。"]},{"i":"为什么-ui-这么慢不稳定","l":"为什么 UI 这么慢/不稳定？","p":["尝试在用户设置面板上启用无模糊效果（快速 UI）模式。","在 UI 主题设置中启用减少动画以移除装饰性动画。","确保您的浏览器正在使用硬件加速。"]},{"i":"如何让-ai-写得更多","l":"如何让 AI 写得更多？","p":["有时 AI 只会用一句话回应，而您希望它更详细。 这通常是本地运行模型的问题。","如果您只是想让机器人从最近回复的结尾继续写，您可以通过在输入栏中不输入任何内容并点击发送来发送一个空的用户消息。这将强制机器人继续故事。","解决策略：","降低 回应长度 设置的值","为角色设计一个好的 第一条消息，显示他们说话很啰嗦。AI 模型在得到您期望的写作风格指导时可以有很大改进。","在角色的描述框中添加一个短语，如\"喜欢说很多话\"或\"说话非常详细\"","对您的 作者注释 或 历史后指令提示词 做同样的事情","作为最后的手段，您可以尝试打开 自动继续（在用户设置面板中），但这会使回应变得更慢，因为它让 AI 产生连续的小回复，然后将它们全部组合成一个大回复。它也可能与某些 API 选项不兼容。"]},{"i":"如何让-ai-写得更少","l":"如何让 AI 写得更少？","p":["这主要只是 ChatGPT 或 Claude 等模型的问题。可以应用相同的策略，但方向相反。","降低 回应长度 设置的值","在角色的描述中给出\"说话简短\"或\"不怎么说话\"之类的短语。","给角色一个简短的第一条消息，为聊天设定基调和期望。","确保关闭 自动继续。"]},{"i":"如何让-ai-停止写我的角色的动作并自己驱动剧情","l":"如何让 AI 停止写我的角色的动作，并自己驱动剧情？","p":["这应该在 作者注释 中处理，结合以下短语：","{{char}} 的回应应该只是对 {{user}} 的动作被动和反应性的。","您的下一个回应应该仅从 {{char}} 的视角出发。","您永远不允许为 {{user}} 规定动作或言语"]}],[{"l":"聊天","p":["当您 连接到 API 后，可以通过在屏幕底部的聊天栏中输入消息来发送给 AI。然后点击 发送 或按回车键。 聊天栏","AI 将回复一条继续对话的消息。","聊天消息","现在您可以：","发送另一条消息","滑动回复：点击消息上的 滑动 按钮以生成不同的回复。","编辑消息：点击任何消息上的 编辑 按钮来 编辑消息内容。","消息操作：点击消息上的 消息操作 按钮，获取更多 消息选项，如 翻译、图像生成和故事分支。","聊天选项：点击聊天栏旁边的 选项 按钮，获取更多 聊天选项，如作者注释和聊天文件管理。","如果您希望说些不同的话，您可以编辑您的消息，然后滑动 AI 的回复以获得新的回复。","您也可以使用 右 箭头键来滑动，使用 上 箭头键来编辑聊天中的最后一条消息。要了解更多快捷键，请在聊天中使用 /help hotkeys 斜杠命令 或查看 快捷键 页面。"]},{"l":"消息操作面板","p":["通过消息上的省略号（•••）按钮管理单个聊天消息。","要在您的聊天中显示所有消息的这些选项，请在用户设置中启用 展开消息操作 设置。"]},{"l":"核心功能","p":["翻译：将消息转换为不同语言","生成图像：从消息内容 创建图像","朗读： 文本转语音 转换","提示词：查看生成提示词和 token 使用情况"]},{"l":"消息可见性","p":["包含：AI 可以看到此消息；点击以排除","排除：AI 看不到此消息；点击以包含"]},{"l":"内容管理","p":["嵌入： 附加文件或图像","检查点：创建故事检查点","检查点导航：点击以打开检查点聊天，Shift+点击以更新现有检查点","分支：开始替代故事路径","复制：复制消息文本","编辑：编辑消息内容"]},{"l":"编辑消息内容","p":["当您 编辑 聊天消息时出现的紧凑消息操作工具面板。"]},{"l":"核心操作","p":["确认：保存消息更改","取消：放弃消息更改"]},{"l":"消息操作","p":["复制：复制消息内容","删除：移除消息"]},{"l":"消息位置","p":["上移：将消息在聊天中向上移动","下移：将消息在聊天中向下移动","注意：根据消息在聊天历史中的位置，移动控件可能被禁用。"]},{"l":"聊天选项面板","p":["通过聊天界面左下角的 选项 按钮管理聊天设置和操作。"]},{"l":"显示控件","p":["关闭聊天：退出当前聊天会话","切换面板：显示/隐藏 界面面板"]},{"l":"生成设置","p":["作者注释：自定义上下文指令","CFG 比例：调整回复创造性","Token 概率：查看 token 生成统计"]},{"l":"聊天导航","p":["返回父聊天：返回主对话","保存检查点：创建故事检查点","转换为群组：转换为 群组聊天"]},{"l":"聊天管理","p":["开始新聊天：开始新的对话","管理聊天文件： 聊天文件操作，如导入、导出和重命名"]},{"l":"消息控件","p":["删除消息：选择并移除多条消息","重新生成：创建新的回复","扮演：AI 以用户身份写消息","继续：延伸最后一条消息","注意：根据上下文和聊天状态，某些选项可能被隐藏。"]},{"l":"Token 概率面板","p":["Token 概率面板让您深入了解 AI 的文本生成采样过程。它不仅显示 AI 写了什么，还显示它在文本的每个点上考虑的其他选项。","要打开它，请点击 聊天选项 面板中的 Token 概率 按钮。","示例消息","示例消息的 Token 概率显示","当您点击生成文本中的任何 token（单词、标点符号或格式字符）时，面板会显示 AI 在该位置考虑的替代 token，以及它们的概率分数。这让您深入了解 AI 的\"思考过程\"，并显示回复可能采取的其他方向。查看这些替代选项可以帮助您理解是有多个可能的选项还是只有一个明确的选择。","替代 token 和概率","如果您看到一个您认为 AI 应该选择不同的 token，选择一个替代选项，消息将从该点开始重新生成，可能会给您一个不同的回复。"]},{"l":"重新生成","p":["如果您更改特定 token 并重新生成回复，新回复中更改 token 之前的部分将与原始回复相同。这部分显示为灰色。由于它没有被生成，这部分没有概率信息。","您可能想看到基于您的替代 token 可能生成的其他回复。","您可以点击灰色部分来\"重新生成\"，给您文本的新变体。点击灰色部分的任何部分都会保留整个灰色部分并重新生成整个白色/着色部分。","在点击灰色部分中的 token 时按住 Ctrl 键将保留到被点击 token 的灰色部分并重新生成其余文本。在这种情况下，您选择的替代 token 不能被保留。"]},{"l":"控件","p":["Token 显示：","生成的文本被分割成单个 token","每个 token 都是可交互的，点击 token 可以查看 AI 考虑的替代选项","Token 被着色作为视觉辅助，但这并不表示概率","特殊字符（空格、换行）被明显标记","Token 选择：","点击 token 查看替代选项","点击替代选项以替换 token 并重新生成回复","将鼠标悬停在 token 上可以查看其原始对数概率分数","窗口控件：","用于面板重新定位的拖动手柄（仅限 MovingUI）","最大化/还原面板大小","展开/折叠面板内容","关闭面板"]},{"l":"可用性","p":["您必须在 用户设置 中选择 请求 token 概率 以启用此功能。","Token 概率仅适用于最新消息，且不会保存到聊天中。如果消息的 token 概率信息不再可用，面板将显示一条指示此情况的消息。","使用平滑流式传输时，Token 概率不可用。","并非所有 API 都提供 Token 概率。如果您使用的 API 不支持 token 概率，面板将打开但不会显示任何信息。"]},{"l":"文本补全","p":["LlamaCPP：可用","Text Generation WebUI（oobabooga）：可用","TabbyAPI：可用","NovelAI：可用","KoboldCPP：可用","Ollama：似乎不可用","OpenRouter Text：似乎不可用"]},{"l":"聊天补全","p":["OpenAI 或 Custom：可用，但不支持重新生成","Anthropic：似乎不可用","Google AI Studio：似乎不可用","OpenRouter Chat：似乎不可用"]}],[{"l":"斜杠命令","p":["这不是一个完整的列表，因为它很少更新。","要获取您的实例中可用的最新命令列表，请在任何 SillyTavern 聊天中使用 /help slash 聊天命令。","/help– 显示帮助信息","/api- 切换到不同的 API","/sys- 以系统叙述者的身份发送中立消息","/send- 以用户身份发送消息而不触发生成","/sendas– 以特定角色的身份发送消息","/comment- 向聊天添加对 AI 不可见的注释","/impersonate- 要求 AI 以您的身份写作，可选择添加提示词","/persona- 设置您的用户个性","/imagine- 从文本提示词生成图像","/bg- 通过文件名设置背景图像"]}],[{"l":"快捷键","p":["要获取您的 SillyTavern 实例中可用的最新快捷键列表，请在任何聊天中使用 /help hotkeys 斜杠命令。","移动设备上禁用快捷键。"]},{"l":"聊天快捷键","p":["上箭头 = 编辑聊天中的最后一条消息","Ctrl+上箭头 = 编辑聊天中最后一条用户消息","左箭头 = 向左滑动","右箭头 = 向右滑动（注意：当聊天栏中有输入内容时，滑动快捷键被禁用）","回车键（在选中聊天栏时）= 将您的消息发送给 AI","Ctrl+回车键 = 重新生成最后一条 AI 回复","Alt+回车键 = 继续最后一条 AI 回复","Esc 键","（在编辑消息时且启用了消息编辑自动保存）= 关闭编辑框。","（在 AI 消息生成或流式传输时）= 立即停止生成。"]},{"l":"Markdown 快捷键","p":["需要在\"用户设置\"标签下启用。在聊天栏和标有\"M↓\"图标的文本区域中有效：","Ctrl+B = **粗体**","Ctrl+I = *斜体*","Ctrl+U = __下划线__","Ctrl+K = `内联代码`","Ctrl+Shift+~= ~~删除线~~"]}],[{"l":"常用设置","p":["这些设置控制使用语言模型生成文本时的采样过程。这些设置的含义对所有支持的后端都是通用的。"]},{"l":"上下文设置"},{"i":"回应长度tokens","l":"回应长度（tokens）","p":["API 将生成的最大 token 数量。","回应长度越高，生成回应所需的时间就越长。","如果 API 支持，您可以启用 流式传输 来逐步显示正在生成的回应。","当 流式传输 关闭时，回应将在完成后一次性显示。"]},{"i":"上下文长度tokens","l":"上下文长度（tokens）","p":["SillyTavern 将作为提示词发送给 API 的最大 token 数量，减去回应长度。","上下文包括角色信息、系统提示词、聊天历史等。","消息之间的虚线表示聊天的上下文范围。该线以上的消息不会发送给 AI。","要在生成消息后查看上下文的组成，请点击 提示词项目化 消息选项（展开 ... 菜单并点击带线条的方形图标）。"]},{"l":"采样参数"},{"i":"temperature温度","l":"Temperature（温度）","p":["Temperature 控制 token 选择的随机性：","低温度（<1.0）会产生更可预测的文本，倾向于选择概率更高的 token","高温度（>1.0）通过给予低概率 token 更好的机会，增加输出的创造性和多样性。","设置为 1 以保持原始概率。"]},{"i":"repetition-penalty重复惩罚","l":"Repetition Penalty（重复惩罚）","p":["尝试通过根据 token 在上下文中出现的频率来惩罚它们以抑制重复。","将值设置为 1 以禁用其效果。"]},{"i":"repetition-penalty-range重复惩罚范围","l":"Repetition Penalty Range（重复惩罚范围）","p":["从最后生成的 token 开始，将考虑多少个 token 进行重复惩罚。如果设置得太高，可能会破坏回应，因为常用词如\"的、了、和\"等将受到最严重的惩罚。","将值设置为 0 以禁用其效果。"]},{"i":"repetition-penalty-slope重复惩罚斜率","l":"Repetition Penalty Slope（重复惩罚斜率）","p":["如果这个值和 重复惩罚范围 都大于 0，重复惩罚在提示词的末尾将有更大的效果。值越高，效果越强。","将值设置为 0 以禁用其效果。"]},{"l":"Top K","p":["Top K 设置可以选择的最大顶级 token 数量。例如，如果 Top K 是 20，这意味着只会保留排名最高的 20 个 token（无论它们的概率是多样的还是有限的）。","设置为 0（或 -1，取决于您的后端）以禁用。"]},{"l":"Top P","p":["Top P（又称核采样）将所需的顶级 token 相加以达到目标百分比。如果前 2 个 token 都是 25%，而 Top P 是 0.50，则只考虑前 2 个 token。","将值设置为 1 以禁用其效果。"]},{"l":"Typical P","p":["Typical P 采样基于 token 与集合平均熵的偏差来确定优先级。它保留累积概率接近预定阈值（例如 0.5）的 token，强调那些具有平均信息内容的 token。","将值设置为 1 以禁用其效果。"]},{"l":"Min P","p":["通过相对于最高 token 切断低概率 token 来限制 token 池。产生更连贯的回应，但如果设置得太高也可能加剧重复。","在低值如 0.1-0.01 时效果最好，但在高 Temperature 时可以设置更高。例如： Temperature: 5, Min P: 0.5","将值设置为 0 以禁用其效果。"]},{"l":"Top A","p":["Top A 基于最高 token 概率的平方设置 token 选择的阈值。例如，如果 Top-A 值为 0.2，最高 token 的概率为 50%，则概率低于 5%（0.2 * 0.5^ 2）的 token 将被排除。","将值设置为 0 以禁用其效果。"]},{"i":"tail-free-sampling尾部自由采样","l":"Tail Free Sampling（尾部自由采样）","p":["Tail-Free Sampling (TFS) 通过使用导数分析 token 概率的变化率来搜索分布中的低概率 token 尾部。它根据归一化的二阶导数保留阈值（例如 0.3）以内的 token。越接近 0，丢弃的 token 越多。","将值设置为 1 以禁用其效果。"]},{"i":"smoothing-factor平滑因子","l":"Smoothing Factor（平滑因子）","p":["使用二次变换增加高概率 token 的可能性，同时降低低概率 token 的可能性。旨在无论 Temperature 如何都产生更有创意的回应。","在没有截断采样器（如 Top K、 Top P、 Min P 等）时效果最好。","将值设置为 0 以禁用其效果。"]},{"i":"dynamic-temperature动态温度","l":"Dynamic Temperature（动态温度）","p":["根据最高 token 的可能性动态调整温度。旨在产生更有创意的输出而不牺牲连贯性。","接受从最小到最大的温度范围。例如： 最小温度: 0.75 和 最大温度: 1.25","指数 根据最高 token 应用指数曲线。","取消勾选以禁用其效果。"]},{"i":"epsilon-cutoffepsilon-截断","l":"Epsilon Cutoff（Epsilon 截断）","p":["Epsilon 截断设置一个概率下限，低于该下限的 token 将被排除在采样之外。单位为 1e-4；合理的值是 3。","设置为 0 以禁用。"]},{"i":"eta-cutoffeta-截断","l":"Eta Cutoff（Eta 截断）","p":["Eta 截断是特殊 Eta 采样技术的主要参数。单位为 1e-4；合理的值是 3。详情请参见论文 Truncation Sampling as Language Model Desmoothing by Hewitt et al. (2022)。","设置为 0 以禁用。"]},{"i":"dry-repetition-penaltydry-重复惩罚","l":"DRY Repetition Penalty（DRY 重复惩罚）","p":["DRY 惩罚那些会将输入的结尾扩展成先前在输入中出现过的序列的 token。如果您想允许逐字重复某些序列（例如名字），您可以将它们添加到序列中断器列表中。请参见 这里 的 Pull Request。","将乘数设置为 0 以禁用。"]},{"i":"exclude-top-choices-xtc排除顶级选择","l":"Exclude Top Choices (XTC)（排除顶级选择）","p":["XTC 采样算法移除最可能的 token，而不是修剪最不可能的 token。它以给定的概率移除除了满足给定阈值的最不可能的 token 之外的所有 token。这确保至少保留一个\"可行\"的选择，保持连贯性。请参见 这里 的 Pull Request。","将概率设置为 0 以禁用。"]},{"l":"Mirostat","p":["Mirostat 将输出的困惑度与输入的困惑度匹配，从而避免重复陷阱（在自回归推理产生文本时，输出的困惑度趋向于零）和混乱陷阱（困惑度发散）。详情请参见论文 Mirostat: A Neural Text Decoding Algorithm that Directly Controls Perplexity by Basu et al. (2020)。","模式选择 Mirostat 版本。","0 = 禁用，","1 = Mirostat 1.0（仅限 llama.cpp），","2 = Mirostat 2.0。"]},{"i":"beam-search束搜索","l":"Beam Search（束搜索）","p":["一种贪婪的暴力算法，用于 LLM 采样以找到最可能的词序或 token 序列。它一次性扩展多个候选序列，在每一步保持固定数量（束宽）的顶级序列。"]},{"l":"Top nsigma","p":["一种基于 logits 统计特性的采样方法。它保留在最大 logit 值的 n 个标准差内的 token，为 top-p/top-k 采样提供了一个更简单的替代方案，同时保持不同温度下的采样稳定性。"]}],[{"l":"API 连接","p":["SillyTavern 可以连接到多种 LLM API。 以下是对它们各自的优势、劣势和使用场景的描述。"]},{"i":"简单解释聊天补全与文本补全的区别","l":"简单解释：聊天补全与文本补全的区别","p":["当您第一次进入 ST 的\"API 连接\"页面时，您会注意到有一个下拉选项，可以在\"聊天补全\"和\"文本补全\"等选项之间选择。了解这些概念很有帮助。","它不是：很容易把\"文本补全\"理解为本地模型，把\"聊天补全\"理解为基于云的 LLM，但事实并非如此。同样，例如\"Novel AI\"或\"Kobold\"实际上也不是完全不同类型的模型，尽管它们在 ST 的 API 下拉菜单中是单独的选项。您可以通过适当的后端强制模型使用不同的 API 结构，但这不是本节的重点。","当您使用 ST 发送消息时，您的聊天、角色描述和其他提示词（如知识库或作者注释）会被构建成一个单一的\"提示词\"发送给模型。您使用的模型的 API\"类型\"决定了这个提示词将如何构建（ST 在后台会自动为您处理这些 - 您可以打开 ST 终端，看到发送给 AI 的提示词的确切内容）。"]},{"l":"聊天补全","p":["顾名思义，聊天补全模型会将您的提示词构建成用户（您）和助手（AI）或系统（中立）之间的一系列消息。为聊天补全训练的模型有助于营造\"聊天\"的感觉，让 AI\"回应\"最后一条消息。当您使用 ChatGPT 网站时，您在后台使用的就是聊天补全 API。"]},{"i":"文本补全又称补全","l":"文本补全（又称\"补全\"）","p":["另一方面，文本补全（同样顾名思义）会将您的提示词转换为一个长字符串，模型只是试图继续这个字符串（就像，字面上想象您所有的文本、数百条消息、所有格式、换行符等都被压缩成一个很长的句子）。","如果您在 ST 中的消息恰好被格式化为 YourPersona: 和 Character: 之间的一系列消息，文本补全模型会尝试继续这个模式，ST 会将其呈现为新的聊天消息，但实际上模型只是在尝试继续文本。如果您输入\"太阳从东方\"，文本补全模型很可能会用\"升起\"来完成这条消息。","大多数文本补全模型都有推荐的\"指令模板\"（通常在模型的文档或下载页面中提到），这些模板帮助它们像聊天补全模型一样\"回应\"消息和指令。ST 通常在\"高级格式设置\"页面中提供了大多数（如果不是全部）指令模板供您选择。"]},{"l":"本地 API","p":["这些 LLM API 可以在您的电脑上运行。","它们免费使用且没有内容过滤。","安装过程可能比较复杂（ SillyTavern 开发团队不提供此方面的支持）。","需要从 HuggingFace 单独下载 LLM 模型，每个模型可能有 5-50GB。","大多数模型不如云端 LLM API 强大。"]},{"l":"KoboldAI","p":["在您的电脑上运行，100% 私密，可使用多种模型","提供对 AI 生成设置的最直接控制","需要 GPU 中大量的 VRAM（6-24GB，取决于 LLM 模型）","模型限制在 2k 上下文","不支持流式传输","流行的 KoboldAI 版本：","Henky's United","0cc4m's 4bit-supporting United"]},{"l":"KoboldCpp","p":["易于使用的 API，支持 CPU 卸载（对低 VRAM 用户有帮助）和流式传输","在 Windows 上可以从单个 .exe 文件运行（在 MacOS 和 Linux 上必须从源代码编译）","支持 GGUF/GGML 模型","比仅 GPU 加载器（如 AutoGPTQ 和 Exllama/v2）慢","GitHub"]},{"l":"Oobabooga TextGeneration WebUI","p":["带有流式传输的一体化 Gradio UI","对量化模型（AWQ、Exl2、GGML、GGUF、GPTQ）和 FP16 模型的最广泛支持","提供一键安装程序","定期更新，有时可能会破坏与 SillyTavern 的兼容性","GitHub","正确连接 SillyTavern 到 Ooba 新 OpenAI API 的方法","确保您使用的是 Oobabooga's TextGen 的最新更新（截至 2023 年 11 月 14 日）。","编辑 CMD_FLAGS.txt 文件，在其中添加 --api 标志。然后重启 Ooba 的服务器。","将 ST 连接到 http://localhost:5000/（默认），不要勾选\"Legacy API\"框。您可以删除 Ooba 控制台提供的 URL 中的 /v1 后缀。","您可以使用 --api-port 5001 标志更改 API 托管端口，其中 5001 是您的自定义端口。"]},{"l":"TabbyAPI","p":["基于 Exllamav2 的轻量级 API，支持流式传输","支持 Exl2、GPTQ 和 FP16 模型","官方扩展 允许直接从 SillyTavern 加载/卸载模型","不推荐给低 VRAM 用户（无 CPU 卸载）","GitHub"]},{"l":"云端 LLM API","p":["这些 LLM API 作为云服务运行，不需要您电脑的资源","它们比大多数本地 LLM 更强大/更智能","但它们都有不同程度的内容过滤，大多数需要付费"]},{"i":"openai-chatgpt","l":"OpenAI (ChatGPT)","p":["易于设置和获取 API 密钥","需要预付费购买积分，按提示词收费","非常逻辑化。创意风格可能重复和可预测","大多数较新的模型（gpt-4-turbo、gpt-4o）支持多模态","网站， 设置说明"]},{"i":"claude-by-anthropic","l":"Claude (by Anthropic)","p":["推荐给希望 AI 聊天具有创意、独特写作风格的用户","需要预付费购买积分，按提示词收费","最新的模型（Claude 3）支持多模态","需要特定的提示词风格和使用 prefills 进行回复引导","网站"]},{"i":"mistral-by-mistral-ai","l":"Mistral (by Mistral AI)","p":["各种规模和用例的高效模型。您可以在 他们的平台 上创建账户和 API 密钥。","一般用途的上下文大小从 32k 到 128k，编码用途的上下文大小从 32k 到 256k。","有限制的免费层级。","合理的审核，Mistral 的主要原则是保持中立并赋能用户，更多信息 在此。"]},{"l":"OpenRouter","p":["WindowAI 浏览器扩展允许您使用自己的 API 密钥连接到上述云端 LLM","使用 OpenRouter 付费使用他们的 API 密钥","如果您不想在每个服务上创建单独的账户，这很有用","WindowAI 网站 和 OpenRouter 网站"]},{"l":"DreamGen","p":["针对可控创意写作调优的无审查模型","提供免费月度积分和付费订阅","模型范围从 7B 到 70B","设置说明"]},{"l":"AI Horde","p":["SillyTavern 可以开箱即用地访问此 API，无需额外设置","使用个人志愿者（Horde Workers）的 GPU 来处理您的聊天输入的回应","在生成等待时间、AI 设置和可用模型方面受制于 Worker","网站"]},{"l":"Mancer AI","p":["托管各种系列的无限制模型的服务","使用\"积分\"为各种模型的 token 付费","默认不记录提示词，但您可以启用它以获得 token 积分折扣","使用类似于 Oobabooga TextGeneration WebUI 的 API，详情请参见 Mancer 文档","网站， 设置说明"]},{"l":"NovelAI","p":["无内容过滤","需要付费订阅","网站， 设置说明"]}],[{"l":"连接配置文件","p":["保存连接配置文件以快速切换不同的 API、模型和格式化模板。当您积极使用多个 API 连接或需要在不同配置之间切换而无需浏览菜单时，这很有用。"]},{"l":"访问连接配置文件","p":["从 SillyTavern 1.12.6 或更高版本开始，此功能作为内置扩展默认启用，并在 API 连接菜单中可用。如果您希望 禁用 它，请打开扩展面板，点击\"管理扩展\"，在列表中找到连接配置文件，取消选中\"已启用\"复选框，然后点击\"关闭\"。"]},{"l":"保存的内容","p":["连接配置文件存储以下选项。"]},{"l":"通用","p":["API 类型、模型和服务器 URL","设置预设"]},{"l":"文本补全 API","p":["系统提示词及其状态","指令模式状态和模板","上下文模板","分词器"]},{"l":"聊天补全 API","p":["代理预设"]},{"l":"管理连接配置文件","p":["配置文件只保存下拉字段中的选择，而不了解底层设置。这意味着通过切换到不同的配置文件，您将丢失未保存的更改。为了防止这种情况，如果您不想丢失临时更改，请确保更新所有预设和模板。","要保存配置文件，请设置所有必需的设置并点击\"创建\"按钮。然后检查设置并为配置文件提供名称。 名称应该是唯一的。","要查看所选配置文件的详细信息，请点击\"信息\"按钮。再次点击以隐藏详细信息。","连接配置文件设置保存在 settings.json 中，在您按下\"更新\"按钮之前不会更改关联的配置文件保存文件。这意味着如果您设置了一个配置文件，但在更新之前切换到另一个配置文件，您将丢失所有先前的更改。","要从保存的配置文件恢复更改的选择，请点击\"重新加载\"按钮。","要删除配置文件，请点击\"删除\"按钮并确认删除。 此操作不可逆。"]},{"l":"斜杠命令","p":["可以使用以下斜杠命令管理连接配置文件。","/profile [name]- 如果提供了参数，则切换到该配置文件；如果没有提供参数，则获取当前配置文件的名称。","/profile-create [name]- 将当前设置保存为具有提供名称的新配置文件。","/profile-list- 返回可用配置文件名称的 JSON 序列化数组。","/profile-get [name]- 获取具有提供名称的配置文件的详细信息，作为 JSON 序列化对象。","/profile-update- 使用当前设置更新所选配置文件。"]}],[{"l":"自托管 AI 模型","p":["本指南基于作者的个人经验和知识，并不是绝对真理。所有陈述都应该谨慎对待。如果您有任何更正或建议，请在 Discord 上联系我们或向 SillyTavern 文档仓库 发送 PR。"]},{"l":"简介","p":["本指南旨在帮助您在自己的电脑上使用 SillyTavern 运行本地 AI（从现在开始，我们将使用正确的术语，称之为 LLM）。在询问技术支持问题之前，请先阅读本指南。"]},{"i":"哪些大语言模型最好","l":"哪些大语言模型最好？","p":["这个问题无法回答，因为没有标准化的\"最佳\"衡量标准。社区在 Reddit 和 Discord 上有足够的资源和讨论，可以形成对首选/常用模型的一些看法。您的体验可能会有所不同。"]},{"i":"什么是最佳配置","l":"什么是最佳配置？","p":["如果存在最佳或显而易见的设置，还需要配置吗？最佳配置是适合您的配置。这是一个反复试验的过程。"]},{"l":"硬件要求和方向","p":["这是一个复杂的主题，所以我会坚持基本要点并进行概括。","您可以从互联网上下载数千个免费的 LLM，类似于 Stable Diffusion 有大量可用于生成图像的模型。","运行未经修改的 LLM 需要具有大量 VRAM（GPU 内存）的强大 GPU。比您能拥有的还要多。","可以通过使用 GPTQ 或 AWQ 等量化技术来压缩模型，从而减少 VRAM 要求。这使模型的能力略有下降，但大大减少了运行它所需的 VRAM。突然间，这让拥有 3080 等游戏 GPU 的人也能运行 13B 模型。虽然它不如未量化的模型好，但仍然不错。","更好的是：还存在一种称为 GGUF（以前称为 GGML）的模型格式和量化方法，它已成为没有强大 GPU 的普通用户的首选格式。这允许您完全不使用 GPU 就能运行 LLM。它只会使用 CPU 和 RAM。这比在 GPU 上使用 GPTQ/AWQ 运行 LLM 要慢得多（可能慢 15 倍），特别是在提示词处理期间，但模型的能力同样出色。然后 GGUF 创建者通过添加一个配置选项进一步优化了 GGUF，该选项允许拥有游戏级 GPU 的用户将模型的部分内容卸载到 GPU，使他们能够以 GPU 速度运行部分模型（注意，这不会减少 RAM 要求，它只会提高您的生成速度）。","有不同大小的模型，根据它们训练时使用的参数数量命名。您会看到像 7B、13B、30B、70B 等名称。您可以将这些视为模型的大脑大小。来自同一模型系列的 13B 模型将比 7B 更强大：它们在相同的数据上训练，但更大的大脑可以更好地保留知识并思考得更连贯。更大的模型也需要更多的 VRAM/RAM。","有几种量化程度（8 位、5 位、4 位等）。位数越低，模型退化越严重，但硬件要求也越低。因此，即使在性能较差的硬件上，您也可能能够运行所需模型的 4 位版本。甚至还有 3 位和 2 位量化，但在这一点上，您已经在浪费时间了。还有进一步的量化子类型，命名为 k_s、k_m、k_l 等。k_m 比 k_s 好，但需要更多资源。","上下文大小（您的对话在模型丢弃部分内容之前可以变得多长）也会影响 VRAM/RAM 要求。幸运的是，这是一个可配置的设置，允许您使用较小的上下文来减少 VRAM/RAM 要求。（注意：基于 Llama2 的模型的上下文大小是 4k。Mistral 宣传为 8k，但实际上是 4k。）","2023 年的某个时候，NVIDIA 更改了他们的 GPU 驱动程序，如果您需要的 VRAM 超过 GPU 所拥有的，任务不会崩溃，而是会开始使用常规 RAM 作为备用。这会降低 LLM 的写入速度，但模型仍然可以工作并提供相同质量的输出。幸运的是，这种行为 可以禁用。","考虑到以上所有因素，硬件要求和性能完全取决于模型系列、模型类型、模型大小、量化方法等。"]},{"l":"模型大小计算器","p":["您可以使用 Nyx 的模型大小计算器 来确定需要多少 RAM/VRAM。","记住，您想要运行可以适应您内存的最大、最少量化的模型，即不会导致 磁盘交换。"]},{"l":"下载 LLM","p":["要开始，您需要下载一个 LLM。找到和下载 LLM 最常见的地方是 HuggingFace。那里有数千个可用的模型。查找 GGUF 模型的好方法是查看 bartowski 的账户页面： https://huggingface.co/bartowski。如果您不想要 GGUF，他会链接到原始模型页面，在那里您可能会找到该模型的其他格式。","在给定模型的页面上，您会找到一堆文件。","您可能不需要所有这些文件！对于 GGUF，您只需要 .gguf 模型文件（通常 4-11GB）。如果您找到多个大文件，通常都是同一模型的不同量化版本，您只需要选择一个。","对于 .safetensors 文件（可以是 GPTQ 或 AWQ 或 HF 量化或未量化），如果您在文件名中看到像 model-00001-of-00003.safetensors 这样的数字序列，那么您需要所有 3 个 .safetensors 文件 + 仓库中的所有其他文件（分词器、配置等）才能获得完整的模型。","截至 2024 年 1 月，Mixtral MOE 8x7B 被广泛认为是本地 LLM 的最新技术。如果您有 32GB 的 RAM 来运行它，一定要尝试一下。如果您的 RAM 少于 32GB，那么使用 Kunoichi-DPO-v2-7B，尽管它的大小较小，但一开始就表现出色。"]},{"l":"下载 Kunoichi-DPO-v2-7B 的步骤","p":["我们将在本指南的其余部分使用 Kunoichi-DPO-v2-7B 模型。它是一个基于 Mistral 7B 的出色模型，只需要 7GB RAM，并且表现远超其规模。注意：Kunoichi 使用 Alpaca 提示。","前往 https://huggingface.co/brittlewis12/Kunoichi-DPO-v2-7B-GGUF","点击\"Files and versions\"。您会看到几个文件的列表。这些都是同一个模型，但提供了不同的量化选项。点击文件\"kunoichi-dpo-v2-7b.Q6_K.gguf\"，这给我们一个 6 位量化。","点击\"download\"按钮。您的下载应该开始了。"]},{"l":"如何识别模型类型","p":["像 TheBloke 这样优秀的模型上传者会给出描述性的名称。但如果他们没有：","文件名以 .gguf 结尾：GGUF CPU 模型（显然）","文件名以 .safetensors 结尾：可以是未量化的，或 HF 量化的，或 GPTQ，或 AWQ","文件名是 pytorch-***.bin：与上面相同，但这是一个较旧的模型文件格式，允许在加载模型时执行任意 Python 脚本，被认为是不安全的。如果您信任模型创建者，或者别无选择，您仍然可以使用它，但如果有选择，请选择 .safetensors。","存在 config.json？查看它是否有 quant_method。","q4 表示 4 位量化，q5 是 5 位量化，等等","您看到像 -16k 这样的数字？那是增加的上下文大小（即您的对话在模型忘记聊天开始之前可以变得多长）！注意，更高的上下文大小需要更多的 VRAM。"]},{"i":"安装-llm-服务器oobabooga-或-koboldai","l":"安装 LLM 服务器：Oobabooga 或 KoboldAI","p":["现在 LLM 在您的电脑上了，我们需要下载一个工具，作为 SillyTavern 和模型之间的中间人：它将加载模型，并将其功能作为本地 HTTP Web API 暴露出来，供 SillyTavern 使用，就像 SillyTavern 与 OpenAI GPT 或 Claude 等付费网络服务通信一样。您使用的工具应该是 KoboldAI 或 Oobabooga（或其他兼容工具）。","本指南涵盖了这两个选项，您只需要一个。","如果您在 Docker 上托管 SillyTavern，请使用 http://host.docker.internal: 而不是 http://127.0.0.1:。这是因为 SillyTavern 从运行在 Docker 容器中的服务器连接到 API 端点。Docker 的网络栈与主机的网络栈是分开的，因此回环接口不共享。"]},{"i":"下载和使用-koboldcpp无需安装gguf-模型","l":"下载和使用 KoboldCpp（无需安装，GGUF 模型）","p":["访问 https://koboldai.org/cpp，您将看到最新版本和各种可下载的文件。 在撰写本文时，他们列出的最新 CUDA 版本是 cu12，这将在现代 Nvidia GPU 上运行最好，如果您有较旧的 GPU 或不同品牌，您可以使用常规的 koboldcpp.exe。如果您有旧 CPU，KoboldCpp 可能会在您尝试加载模型时崩溃，在这种情况下，尝试 _ oldcpu 版本看看是否能解决您的问题。","KoboldCpp 不需要安装，一旦您启动 KoboldCpp，您就可以使用\"Model\"字段旁边的\"Browse\"按钮立即选择您的 GGUF 模型，如上面链接的模型。","默认情况下，KoboldCpp 的最大上下文为 4K，即使您在 SillyTavern 中设置更高，如果您希望以更高的上下文运行模型，请确保在启动模型之前调整此屏幕上的上下文滑块。请记住，更多的上下文大小意味着更高的（视频）内存要求，如果您设置得太高或加载的模型对您的系统来说太大，KoboldCpp 将自动开始使用您的 CPU 来处理无法放入 GPU 的层，这将慢得多。","点击\"Launch\"，如果一切顺利，将打开一个新的网页，显示 KoboldAI Lite，您可以在那里测试一切是否正常工作。","打开 SillyTavern 并点击 API 连接（顶部栏中的第二个按钮）","将 API 设置为\"文本补全\"，API 类型设置为 KoboldCpp。","将服务器 URL 设置为 http://127.0.0.1:5001/ 或 KoboldCpp 给您的链接（如果它不在同一系统上运行）（您可以激活 KoboldCpp 的远程隧道模式以获取可从任何地方访问的链接）。","点击连接。它应该成功连接并检测到 kunoichi-dpo-v2-7b.Q6_K.gguf 作为模型。","与角色聊天以测试它是否工作。"]},{"l":"优化 KoboldCpp 速度的提示","p":["Flash Attention 将帮助减少内存要求，根据您的系统，它可能更快或更慢，并且将允许您在 GPU 上放置比默认更多的层。","KoboldCpp 会为其他软件留出一些空间，当它猜测层以防止问题时，如果您打开的程序很少，并且无法将模型完全放入 GPU，您可能可以添加一些额外的层。","如果模型对上下文大小使用了太多内存，您可以通过量化 KV 来减少这个问题。这将降低输出质量，但可以帮助您在 GPU 上放置更多层。要做到这一点，您需要转到 KoboldCpp 中的 Tokens 标签，然后禁用 Context Shifting 并启用 Flash Attention。这将解锁量化 KV 缓存滑块，数字越低意味着模型的内存/智能越少。","在较慢的系统上运行 KoboldCpp，处理提示词需要很长时间？当您避免使用知识库、随机化或其他动态更改输入的功能时，Context Shifting 效果最好。保持启用 context shifting，KoboldCpp 将帮助您避免长时间的重新处理。"]},{"l":"安装 Oobabooga","p":["这是一个更正确/傻瓜式的安装程序：","git clone https://github.com/oobabooga/text-generation-webui（或在浏览器中将他们的仓库下载为 .zip，然后解压）","运行 start_windows.bat 或您的操作系统对应的文件","当被问及时，选择您的 GPU 类型。即使您打算使用 GGUF/CPU，如果您的 GPU 在列表中，现在就选择它，因为它将给您一个称为 GPU 分片的速度优化选项（无需从头重新安装）。如果您没有游戏级 dGPU（NVIDIA、AMD），选择 None。","等待安装完成","将 kunoichi-dpo-v2-7b.Q6_K.gguf 放在 text-generation-webui/models 中","打开 text-generation-webui/CMD_FLAGS.txt，删除里面的所有内容并写入：--api","重启 Oobabooga","访问 http://127.0.0.1:5000/docs。它是否加载了一个 FastAPI 页面？如果没有，您在某个地方出错了。"]},{"l":"在 Oobabooga 中加载我们的模型","p":["在浏览器中打开 http://127.0.0.1:7860/","点击 Model 标签","在下拉菜单中，选择我们的 Kunoichi DPO v2 模型。它应该已经自动选择了 llama.cpp 加载器。","（可选）我们之前多次提到\"GPU 卸载\"：那就是这个页面上的 n-gpu-layers 设置。如果您想使用它，在加载模型之前设置一个值。作为基本参考，将其设置为 30 对于 13B 及以下的模型使用不到 6GB VRAM。（它随模型架构和大小而变化）","点击 Load"]},{"l":"配置 SillyTavern 与 Oobabooga 通信","p":["点击 API 连接（顶部栏中的第二个按钮）","将 API 设置为\"文本补全\"","将 API 类型设置为\"默认（Oobabooga）\"","将服务器 URL 设置为 http://127.0.0.1:5000/","点击连接。它应该成功连接并检测到 kunoichi-dpo-v2-7b.Q6_K.gguf 作为模型。","与角色聊天以测试它是否工作"]},{"l":"结论","p":["恭喜，您现在应该有一个正常工作的本地 LLM 了。"]}],[{"l":"聊天补全"},{"l":"OpenAI"},{"l":"API 密钥","p":["如何获取：","前往 OpenAI 并登录。","使用\" 查看 API 密钥\"选项创建新的 API 密钥。","重要提示！","丢失的 API 密钥无法恢复！请确保将其安全保存！"]},{"l":"Claude","p":["如果您有访问 Anthropic 的 Claude API 的权限：","在\"聊天补全来源\"中选择\"Claude\"。","输入您的 API 密钥。","点击连接。"]},{"l":"Mistral AI","p":["Mistral AI 是一个开发开源和专有模型的团队，具有高科学标准和开放性重点。您可以通过本地或通过他们的 API 服务 La Plateforme 运行他们的模型。"]},{"l":"API","p":["第一步是在 La Plateforme 创建账户。","完成后，您可以选择一个 计划 并设置您的支付信息，或选择免费层级。","接下来，您可以创建您的 API 密钥。密钥可能需要几分钟才能生效！","重要提示！ 丢失的 API 密钥无法恢复！您需要创建一个新的。请确保将其安全保存！"]},{"l":"代理","p":["LiteLLM","LM Studio","LocalAI","切换到\"聊天补全\" API 类型。","勾选\"显示'外部'模型（由 API 提供）\"将在下拉列表中显示您的自定义 API 端点报告的可用外部模型（滚动到 OpenAI 模型之后）。这允许您直接从 SillyTavern 选择不同的 API 模型，而无需进入您的自定义应用程序更改模型。","勾选\"绕过 API 状态检查\"告诉 SillyTavern 停止提醒您关于不工作的 API 端点。如果您的 API 端点正常工作，但 SillyTavern 仍然发出警告，请勾选此项。","可以为 OpenAI 的后端配置代理/替代端点。这个自定义端点可以连接到支持通用 OpenAI API 架构的替代聊天补全 API。","在\"AI 连接\"标签中，您可以找到两个可选的复选框：","在\"聊天补全来源\"中选择\"OpenAI\"。","在那里，您可以输入代理/自定义端点，如果需要，还可以在\"代理密码\"下输入 API 密钥。 例如，TabbyAPI 会提供您必须使用的 API 密钥。","大多数文本补全 API 支持比 OpenAI 标准允许的更多的自定义选项。这些更大的自定义选项，如 Min-P 采样器，对 SillyTavern 用户来说可能值得一试，这可以大大提高生成质量。","如果您打算使用此代理功能来使用本地端点，如 TabbyAPI、Oobabooga、Aphrodite 或类似的服务，您可能需要查看 这些服务的内置兼容性。此代理功能主要用于其他暴露 OpenAI 兼容的 API 聊天补全端点的服务和程序。","实现此 API 的后端示例包括：","将 API 密钥等详细信息留空。","打开\"AI 响应配置\"标签，滚动到\"OpenAI / Claude 反向代理\"部分。","提示： 如果不工作，请尝试在端点 URL 末尾添加 /v1！","显示\"外部\"模型（由 API 提供）。","此功能不是自定义 API 端点工作所必需的，并且可能不是在每个后端都可用。","绕过 API 状态检查。","访问此功能的方法是：","请注意，我们不为您可能遇到的问题提供支持！ 我们不保证与每个可能的 API 端点的兼容性！"]}],[{"l":"OpenRouter","p":["由于地理限制或等待列表而无法访问 OpenAI / Claude API？使用 OpenRouter。","OpenRouter 的工作原理是让您使用他们拥有的密钥来访问 GPT-4 和 Claude 2 等模型，所有服务都在一个共享的积分池中。","它有免费试用（约 1 美元）和之后的付费访问。没有订阅或月费 - 您只需为实际使用的部分付费。某些模型在上下文大小有限的情况下可以免费访问。","OpenRouter 定价详情","创建 OpenRouter 账户： openrouter.ai","OpenRouter-连接面板","从上到下（见上图）：","选择\"聊天补全\" API","选择 OpenRouter 来源","点击\"授权\"使用 OAuth 流程获取密钥。或者，在 这里 生成 API 密钥并将其粘贴到框中。","点击\"连接\"并选择一个模型","（可选）使用\"测试消息\"按钮验证您的连接"]},{"l":"WindowAI","p":["WindowAI 是 OpenRouter 制作者开发的浏览器扩展，允许您在任何启用的网站或网络应用程序中控制 OpenRouter 连接。","您也可以在那里使用您自己的 Claude 和 OpenAI API 密钥。"]}],[{"l":"AI Horde"},{"l":"免责声明","p":["AI Horde 是一个完全由志愿者运行的众包分布式 GPU 集群。","默认情况下，您的输入是匿名发送的，运行 Horde Worker 的人无法看到响应。","但是，由于它是一个开源程序，恶意 Worker 可能会修改代码以：","记录您的活动（输入提示词、AI 响应）。","产生不良或冒犯性的响应。","使用 Horde 时 切勿发送 任何个人信息，如姓名、电子邮件地址等。","打开\"仅限可信 Worker\"复选框将限制可用 Worker 的选择，只选择那些已在 Horde 上托管一段时间且通常被认为是可信的 Worker。但他们仍然可能会看到提示词，例如通过使用未记录的软件进行托管。","为了帮助减少这个问题，SillyTavern 内置了以下功能：","当 Horde Worker 生成聊天响应时，SillyTavern 会记录 Worker 的 ID 和他们使用的模型。","将鼠标光标悬停在聊天项目上可以看到这些信息（见下图）。","如果您认为收到了恶意响应，可以将这些信息传递给 AI Horde Discord 上的 Horde 管理员进行审查，并可能对该 Worker 采取纪律处分。","Horde Worker 信息弹窗"]},{"l":"设置","p":["SillyTavern 可以开箱即用地连接 Horde，无需额外设置。","在 ST API 面板中的 API 下拉选择器中选择\"AI Horde\"。","从面板底部的模型选择器中选择一个或多个模型（角色的\"AI 大脑\"）。","选择一个角色并开始聊天。","ST Kobold Horde API 连接面板","默认情况下，您的 SillyTavern 实例连接到 Horde 的低优先级\"访客账户\"。 这意味着您可能需要等待很长时间才能得到回复。 要减少等待时间，请遵循下面的提示。"]},{"l":"提示","p":["在 Horde 网站上注册账户，然后将您的 Horde 密钥添加到 SillyTavern Horde API 密钥框中。","设置 Horde Worker 为他人提供您的 GPU。","让他人使用您的 GPU 可以赚取\"Kudos\"，一种仅限 Horde 的货币。","您的账户拥有的 kudos 越多，从其他 Horde Worker 获得聊天响应的速度就越快。","Kudos 也可以用于在 Stable Horde 上创建 AI 图像。","SillyTavern 开箱即支持 Stable Horde 图像生成。","如果您的 GPU 不够强大无法运行 AI，或者您没有电脑，您仍然可以 通过各种方式参与 Horde 社区以赚取 Kudos。"]}],[{"l":"DreamGen","p":["DreamGen 是一个用于 AI 驱动的创意写作的应用程序和 API。他们提供免费层级，以及付费订阅，后者允许无限制地访问他们专门为可控 AI 辅助写作目的制作的高质量内部文本生成模型。创建账户以开始使用： https://dreamgen.com/。","（免费）积分在每个日历月初重置。查看 定价 以了解每个模型的积分成本，查看 使用情况 以了解您剩余的积分。"]},{"l":"连接到 DreamGen"},{"l":"获取 API 密钥","p":["前往 DreamGen API 密钥 页面并点击\"新建 API 密钥\"按钮。确保将 API 密钥复制到剪贴板。","创建新的 DreamGen API 密钥 复制 DreamGen API 密钥"]},{"l":"连接","p":["前往 SillyTavern 连接设置。","选择 API：文本补全","选择 API 类型：DreamGen","输入 API 密钥","（可选）选择一个模型","连接到 DreamGen"]},{"l":"模型","p":["DreamGen 提供 opus-v1-sm、 opus-v1-lg 和 opus-v1-xl。模型越大，它在遵循指令和写出好故事方面就越好。"]},{"l":"格式设置","p":["DreamGen 模型需要特定的输入格式，这在 此处有文档说明。","SillyTavern 带有专为 DreamGen 制作的内置预设。确保使用这些设置作为您的基准。 这些设置尽可能地遵循 DreamGen 格式，但由于角色卡片的格式不规则，它并不总是完美的。","前往\"高级格式设置\"页面。","在\"上下文模板\"下选择 DreamGen Role-Play V1 Llama3 / ChatML，具体取决于模型（*）。","启用\"指令模式\"。","在\"指令模式预设\"下选择 DreamGen Role-Play V1 Llama3 / ChatML。","DreamGen 上下文设置 DreamGen 指令设置","（*）什么时候使用 Llama 3，什么时候使用 ChatML？截至 2024/06/17， opus-v1-sm 是 ChatML，所有其他模型都是基于 Llama3 的。 在运行本地模型时，模板将在模型的 HuggingFace 卡片中指示。"]},{"l":"补全设置","p":["DreamGen 支持：","\"温度\"、\"Top P\"、\"Top K\" 和 \"Min P\"","\"存在惩罚\"、\"频率惩罚\"和\"重复惩罚\"（无范围）","\"最小长度\" -- 让您强制模型至少生成 min(min_length, max_tokens) 个 token","好的起始值可能是：","Min P：0.05","温度：0.8","重复惩罚：1.1"]},{"l":"格式化提示","p":["DreamGen 模型与常规的指令遵循模型（如 OpenAI 的 ChatGPT）不同。","这些模型经过微调，可以根据提供的描述写故事，这些描述通常包括情节描述、风格描述、角色、地点、背景等。模型也可以在故事中途被 引导，让您成为导演，告诉角色他们应该做什么或情节应该如何展开。","一个格式良好的 系统提示词 消息应该是这样的：","注意， 提示词应该是故事的描述，而不是关于如何写故事的指令或指示。 避免使用以下短语：","\"像...一样写故事\"","\"确保...\"","等等","查看更多关于情节、风格和角色描述应该是什么样子的 示例。","默认的\"DreamGen Role-Play V1\"模板将不同部分替换如下：","## Plot description: 将由 {{scenario}} 和 {{wiBefore}} 组成。","## Style description: 未提供，您应该将其添加到高级设置中的系统提示词下，或添加到角色卡片中 {{scenario}} 的末尾。此部分有助于影响叙事风格（第一人称、第二人称、第三人称）、时态（过去时、现在时）、细节和详细程度等。","## Characters: 将有一个 {{char}} 角色，其描述由 {{description}} 和 {{personality}} 组成，以及一个 {{user}} 角色，其描述由 {{persona}} 组成。"]},{"l":"消息示例和初始消息","p":["DreamGen 模型对上下文非常敏感 -- 它们将在很大程度上坚持前面对话轮次中呈现的写作风格（和事实）。 这使得消息示例和初始消息变得非常重要。"]},{"l":"格式化消息示例","p":["{{mesExamples}} 被附加在系统提示词的末尾。要充分利用指令格式，请确保您的示例用 START 分隔符分隔。例如："]},{"l":"示例","p":["这里有几个为 DreamGen 适配的示例卡片，考虑到了独特的提示方式。这些卡片还利用了上述描述的 {{mesExamples}}。"]},{"l":"Seraphina","p":["这是对 SillyTavern 默认内置的流行 Seraphina 卡片的编辑。"]},{"l":"Lara Lightland","p":["这是对 Deffcolony 的 Lara Lightland 卡片的编辑。"]},{"l":"常见问题"},{"i":"我应该使用什么采样设置","l":"我应该使用什么采样设置？","p":["您可以从以下设置开始：","温度：1.0","MinP：0.05","存在惩罚：0.1","频率惩罚：0.1"]},{"i":"如何让回复更长或更短","l":"如何让回复更长或更短？","p":["您有几个选项：","在系统提示词或模型卡片中更改或添加 ## Style description:。您可以尝试添加类似\"句子通常很长，叙述以极其详细的方式描述场景。\"的内容。","在补全设置中更改 最小长度。","在指令模式下的高级格式设置中添加类似以下的 最后输出序列：","这是一个使用 Llama 3 模板的 最后输出序列 示例，可能有助于让模型以更详细的方式回应：","使用 ChatML 模板表达相同内容：","您可以将文本更改为更适合您的场景或上下文的内容。"]},{"i":"如何阻止模型重复自己","l":"如何阻止模型重复自己？","p":["如果模型重复上下文中的内容，您可以尝试在补全设置中增加\"重复惩罚\"，或者尝试重新措辞被重复的上下文部分。 如果模型在一条消息中重复自己，您可以尝试增加\"存在惩罚\"或\"频率惩罚\"。"]},{"i":"如何引导故事","l":"如何引导故事？","p":["如果您想指导角色做某事，或将情节引向某个方向，您可以使用 user 角色（即 |im_start|user 前言）。","目前，这个功能在 SillyTavern 中没有很好地原生集成，但您可以使用上述描述的 最后输出序列 来插入 user（指令）回合。在 这里 查看指令应该是什么样子的示例。"]}],[{"l":"KoboldCpp","p":["KoboldCpp 是一个用于 GGML 和 GGUF 模型的独立 API。","Nyx 的这个 VRAM 计算器 将告诉您模型大约需要多少 RAM/VRAM。"]},{"l":"Nvidia GPU 快速入门","p":["KoboldCpp 1.58","下载最新版本：https://github.com/LostRuins/koboldcpp/releases","即使您的 VRAM 较低，也不要勾选\"低 VRAM\"。","启动 KoboldCpp。您可能会看到 Microsoft Defender 的弹出窗口，点击\"仍要运行\"。","在\"快速启动\"标签下，选择模型和您首选的\"上下文大小\"。","在\"硬件\"标签下，勾选\"高优先级\"。","差不多吧。","当您加载模型时，\"GPU 层数\"应该已经填充。暂时保持不变。","恭喜！您完成了！","您应该看到类似这样的内容：","截至 1.58 版本，KoboldCpp 应该是这样的：","本指南假设您使用的是 Windows。","点击\"保存\"，这样您就不必在每次启动时都配置 KoboldCpp。","点击\"启动\"并等待模型加载。","现在您可以在 SillyTavern 中使用 http://localhost:5001 作为 API URL 连接到 KoboldCpp 并开始聊天。","选择\"使用 CuBLAS\"并确保\"GPU ID\"旁边的黄色文本与您的 GPU 匹配。","除非您使用的是 Nvidia 10 系列或更旧的 GPU，否则取消勾选\"使用 QuantMatMul (mmq)\"。"]},{"l":"GPU 层数","p":["KoboldCpp 正在工作，但您可以通过确保尽可能多的层卸载到 GPU 来提高性能。您应该在终端中看到类似这样的内容：","不要害怕这些数字；这部分比看起来更容易。 CPU buffer size 指的是正在使用的系统 RAM 数量。忽略它。 CUDA0 buffer size 指的是正在使用的 GPU VRAM 数量。 CUDA_Host KV buffer size 和 CUDA0 KV buffer size 指的是为模型的上下文专门分配的 GPU VRAM 数量。在这种情况下，KoboldCpp 使用了大约 9 GB 的 VRAM。","我有 12 GB 的 VRAM，只有 2 GB 的 VRAM 用于上下文，所以我还剩下大约 10 GB 的 VRAM 来加载模型。因为 9 层使用了大约 7 GB 的 VRAM，而 7000 / 9 = 777.77，所以我们可以假设每层使用大约 777.77 MIB 的 VRAM。 10,000 MIB / 777.77 = 12.8，所以我会向下取整，从现在开始用这个模型加载 12 层。","现在使用您系统的模型、上下文大小和 VRAM 进行自己的计算，并重启 KoboldCpp：","如果您很聪明，之前点击了\"保存\"，现在您可以用\"加载\"加载您之前的配置。否则，选择您之前选择的相同设置。","将\"GPU 层数\"更改为您新的、VRAM 优化的数字（在我的情况下是 12 层）。","点击\"保存\"以保存您更新的配置。","您现在应该看到类似这样的内容：","KoboldCpp 使用了我 12 GB VRAM 中的大约 11.5 GB。这应该比 KoboldCpp 自动生成的设置表现得更好。","恭喜！您（真的）完成了！","要更深入地了解 KoboldCpp 设置，请查看 Kalmomaze 的 Simple Llama + SillyTavern 设置指南。"]}],[{"l":"Mancer","p":["Mancer 是一个大语言模型推理服务，让您可以运行任何您想要的提示词，并且不会审查响应。截至撰写时（2024-11-28），大多数模型需要预先充值余额才能开始聊天，但有一个免费模型。","模型","定价"]},{"l":"如何开始","p":["在 mancer.tech 注册账户。","点击仪表板并复制您的 API 密钥。","2024/2/27 的 Mancer 仪表板","在 SillyTavern 中，选择文本补全 API，然后在 API 类型下选择 Mancer。","输入您的 Mancer API 密钥并点击连接。","API 密钥","现在您应该可以与任何您选择的 Mancer 模型聊天了。"]},{"l":"匿名日志记录","p":["如果您不介意您的聊天可能被用于训练模型、改进 Mancer 的服务、发布数据集或他们可能决定用它做的 其他任何事情，您可以选择加入匿名日志记录，以获得特定模型 25% 的 token 折扣。只需前往您的 Mancer 仪表板 并勾选\"启用匿名日志记录\"。"]},{"l":"支持","p":["还需要帮助？前往 SillyTavern Discord 的 #mancer 支持频道。"]}],[{"l":"NovelAI","p":["NovelAI 是一个付费订阅服务，提供无限制的每月访问权限，可使用他们高质量的自研文本生成、图像生成和文本转语音模型。在这里注册账户即可开始使用： https://novelai.net/","你将获得 50次免费生成 用于评估模型。当出现**\"Not eligible for this model\"** 错误时，这表示你已用完试用期，需要订阅付费计划。"]},{"l":"API密钥","p":["要获取NovelAI API密钥，请按以下步骤操作：","点击左侧边栏顶部的齿轮图标。 Left Sidebar","在\"User Settings\"下选择\"Account\"。 User Settings","选择\"Get Persistent API Token\"。 Account","点击复制图标将NovelAI API令牌复制到剪贴板。 Persistent API Token"]},{"l":"模型","p":["如果你订阅了Opus套餐，那么Erato是最佳选择。如果没有Opus，那么Kayra是最好的可用模型。","Clio在Tablet/scroll套餐下有更大的上下文大小，但Kayra的性能通常可以弥补这个差异。"]},{"l":"设置","p":["设置文件位于这里（ SillyTavern/data/user-handle/NovelAI Settings）。 你也可以手动添加自己的设置文件。"]},{"l":"响应长度","p":["你希望每条消息生成多少文本。请注意，NovelAI每次响应的限制是150个令牌。"]},{"l":"上下文大小","p":["在任何时候保持在上下文中的聊天令牌数量。最大上下文大小取决于模型和你的订阅等级：","Kayra (Tablet) - 3072个令牌","Kayra (Scroll) - 6144个令牌","Erato (Opus专属), Kayra (Opus) 和 Clio (所有等级) - 8192个令牌"]},{"l":"前言","p":["插入在聊天内容正上方的文本，用于修改写作风格。推荐的格式是简短标签列表，如\"[Style: chat, detailed, sensory ]\"。"]},{"l":"预设描述","p":["根据Novel AI的说明，以下是默认预设的适用场景。"]},{"l":"Erato","p":["Golden Arrow - 一个全能型预设。","Wilder - 词汇选择更加多样，重新生成时差异更大，更容易出错。","Zany Scribe - 避免错误和重复。优先使用更复杂的词汇。","Dragonfruit - 语言丰富复杂，很少重复。更容易出现错误和矛盾。","Shosetsu - 为日语写作设计。也适用于英语。"]},{"l":"Kayra","p":["Asper - 用于创意写作。期待意想不到的转折。","Carefree - 一个全能型预设","Fresh-Coffee - 保持故事在轨道上。很好地处理指令。","Pro_Writer - 模仿畅销小说的节奏和感觉","Stelenes - 更倾向于选择合理的替代方案。重试时有更多变化。","Tea_Time - 开始后会越来越好。","Writers-Daemon - 极具想象力，有时过于丰富。"]},{"l":"Clio","p":["Edgewise - 能很好地处理各种生成风格","Fresh Coffee - 保持故事在轨道上。","Long-Press - 适用于创意散文。","Talker Chat - 为聊天风格生成设计。","Vingt-Un - 一个偏向散文的优秀通用默认预设。"]},{"l":"在SillyTavern中使用NovelAI的提示和常见问题","p":["从其他ST后端API切换到NovelAI时，会出现许多常见问题和疑问。这些差异源于模型的训练目的不同。很可能你之前使用的是OpenAI或Anthropic模型（或模仿这些的本地模型），这些模型是围绕遵循用户指令而构建的。NovelAI的模型纯粹围绕文本补全构建：它们不是将你的输入作为消息并制定响应，而是试图继续输入的提示。由于这种差异，适用于其他API的许多提示和常识可能不适用于NAI。"]},{"l":"调整NovelAI的设置","p":["在高级格式设置（A图标）下：","将\"Context Template\"设置为\"NovelAI\"","将\"Tokenizer\"设置为\"Best match\"","勾选\"Always add character's name to prompt\"","勾选\"Collapse Consecutive Newlines\"","在\"Instruct Mode\"下取消勾选\"Enabled\"","在用户设置（带齿轮的人像）下：","开启\"Swipes\"（虽然不是NAI特有的，但非常有用，建议开启）"]},{"i":"为novelai构建调整角色卡","l":"为NovelAI构建/调整角色卡","p":["要为NovelAI优化你的角色卡，有两种推荐的方法来编写角色描述：散文式和属性式。","散文式简单到让人觉得不可能有效：\"Sylpheed是一个看起来年轻但实际上900岁的精灵。她身材矮小娇小，有着长长的白发，在她编成侧马尾的发辫处渐变成绿色，眼睛是十字形的祖母绿色。[...]\"没错，就是这样。只需用普通句子写出角色的外貌、行为等，AI就会理解。","如果你不信任自己的写作能力或想要一个更有结构的方法，可以使用在NovelAI训练数据中存在的属性方法。这是一个简单的不同类型角色特征列表。以下是经过测试证明对NovelAI模型有效的可能属性：","\"Type: character\"是用来告诉AI这是在描述一个角色（而不是位置、物品或其他类型的东西）。其余的属性是可选的，有些是重复的（例如，Personality、Mind和Mental基本上意思相同），但这些都经过测试，与NovelAI的模型配合良好。填写与你的角色相关的属性即可。属性应该用小写字母书写，用逗号分隔，不需要在单词周围加引号。例如：","推荐这些方法是因为它们存在于NovelAI的训练数据中，所以特别适合这个模型。"]},{"l":"示例角色卡","p":["这里有几个专门为NovelAI制作的示例角色卡，展示了不同的创建方法。第一个角色卡Valka使用属性方法描述角色，而第二个角色卡Eris使用散文描述，并包含大量对话示例。","Valka","Eris"]},{"l":"不应该做什么","p":["大多数现有的角色卡格式都不太适合NovelAI。它们可能会给你一些结果，甚至一些不错的结果，但存在很多问题。W++ 是最大的问题之一，它与NovelAI模型的训练内容完全不同，而且经常使用方括号/大括号/引号消耗了大量令牌，增加了卡片的大小但没有实际好处。","在现有的非NovelAI原生格式中，AliChat最有可能有效，因为它依靠使用示例消息来同时传达角色信息和他们的语气，采用你希望AI输出的消息格式。","对于大多数其他格式，由于它们通常是列出特定角色的不同特征的方式，可以相当直接地转换为属性方法。"]},{"i":"我应该使用哪个模块","l":"我应该使用哪个模块？","p":["可能是No Module（无模块）。如果你希望角色说话更加华丽，Prose Augmenter很有用，但要注意不要过度使用。Text Adventure可能适用于文字冒险风格的角色卡/故事。"]},{"i":"不用instruct模块吗","l":"不用instruct模块吗？","p":["你可以在需要时调用Instruct模块。在消息中创建新行，并将指令放在大括号中，如：{ CharName is offended by that seemingly innocuous statement }（文本和括号之间的空格是_必需的_）。这样做会自动让AI短暂切换到Instruct模块。你不会想一直使用Instruct模块，因为它往往比其他模块产生的输出创意性更低，只在你需要强烈引导AI朝特定方向发展时使用。"]},{"i":"为什么我的响应总是被截断","l":"为什么我的响应总是被截断？","p":["NovelAI将响应长度限制在总共约150个令牌，即使你将滑块设置得更高。当达到滑块中的令牌数或150个（以较低者为准）时，它将生成最多20个额外的令牌，寻找停止序列或句子结尾，所以响应的有效限制是170个令牌，到达这个点时它就会停止，导致截断。","如果被截断，你可以选择继续选项（文本框左侧的三线菜单中）让角色继续他们的响应。","如果你经常想要超过170个令牌的响应，可以这样绕过限制：","将响应长度保持在150个令牌。","在高级格式设置中启用Auto-continue。","将\"Target length\"设置为所需长度。","这将链接多个生成以给你更长的消息，但如果模型决定停止，不能保证回复一定是所需长度的100%。"]},{"i":"如何让机器人写出更长的响应","l":"如何让机器人写出更长的响应？","p":["阅读上面关于响应被截断的内容。这将帮助确保响应不会因为达到生成长度限制而过早截断。","如果你的响应没有被截断但仍然太短，很可能是\"垃圾进垃圾出\"的问题 - 如果你给模型不好的例子，它会产生不好的输出。如果角色卡没有对话示例或只有简短的对话示例，而且你发送给机器人的消息很短，模型会认为这是可接受的方式，响应也会很短。所以，写更长的示例对话和更长的消息给机器人。（你可以让NovelAI为你写一些示例对话，而不是自己写。）"]},{"i":"如何让机器人停止替我说话","l":"如何让机器人停止替我说话？","p":["检查角色卡的第一条消息和示例对话是否包含角色替你采取行动 - 如果有，重写它们以去除替你行动的部分","确保勾选了\"Always add character's name to prompt\"","确保你当前使用的用户角色与聊天的其余部分相同。如果你更改了用户角色但没有改回（或没有将角色锁定到该聊天），通常用于阻止为你生成的规则将失效","在Custom Stopping Strings中添加[\"\\n{{user}}:\"]（通常不需要，但有时有帮助）"]},{"i":"为什么我的角色没有回应","l":"为什么我的角色没有回应？","p":["这可能有很多原因，所以我们需要检查几个地方：","确保在高级格式设置中勾选了\"Always add character's name to prompt\"","检查是否有来自API的错误。虽然你可以使用NAI免费试用版的SillyTavern，但一旦用完，就只会收到错误","检查\"Custom Stopping Strings\"中有什么 - 如果这些在响应开始时被生成，可能会过早截断"]},{"i":"我应该如何使用authors-note","l":"我应该如何使用Author's Note？","p":["一般来说，你可能不应该使用。它被插入在上下文的非常靠近末尾的位置，使用NAI的模型时，它经常会压倒上下文中的其他所有内容。它主要是较旧、较弱的模型中的产物，当时更有必要使用。"]},{"i":"如何进行场景转换时间跳跃","l":"如何进行场景转换/时间跳跃？","p":["将以下内容作为系统消息或在下一条消息开头的新行中：","然后在下一行放置你的消息其余部分。方括号中的文本可以是时间跳跃、新位置或任何其他内容。\"***\"（有趣的是被称为\"dinkus\"）告诉AI场景已经改变，方括号中的文本为此提供更多上下文。"]},{"i":"ai一直重复特定词语短语该怎么办","l":"AI一直重复特定词语/短语，该怎么办？","p":["如上所述，你可以稍微提高重复惩罚滑块，但推得太远可能会使输出变得不连贯。 要更彻底地解决问题，回顾上下文，特别是最近的消息，删除重复的词语/短语。从上下文中删除它会让AI减少开始说它的理由。"]}],[{"l":"Scale","p":["Scale 是一种通过部署充当 API 端点的\"应用程序\"来访问 GPT-4 和其他 LLM 的简单方法。","目前，Scale 不支持通过 SillyTavern 的 UI 进行 token 流式传输和配置温度等参数。","Scale API 不是免费的，但如果您绑定信用卡，可以获得 5 美元的试用额度。"]},{"l":"快速开始","p":["{{ input }}","最大 Token 数： 400 - 600（取决于消息长度偏好）","创建一个\"变体\"，用于设置参数（系统提示词、模型、温度、响应 token 限制等）","创建一个具有任意名称和描述的\"应用程序\"","在 https://spellbook.scale.com 创建 Scale Spellbook 账户（如果您所在的国家不受支持，请使用 VPN）","在这个虚构的聊天中完成下一个回复。","导航到 SillyTavern，选择\"聊天补全\" API 和 Scale 来源","将 API 密钥和 URL 粘贴到相应的字段中，然后点击\"连接\"","将提示词的\"用户\"部分内容替换为以下内容：","模型： GPT-4","温度：~ 0.6 - 0.9","点击\"保存新变体\"","转到您的新变体并点击部署","这将为您的机器人创建一个 API 密钥和 URL","选择要部署的适当语言模型（推荐使用 GPT-4）","配置模型参数。"]},{"l":"致谢","p":["实现和文档的灵感来自 khanon 在 TavernAIScale 上的工作。"]}],[{"l":"TabbyAPI","p":["一个基于 FastAPI 的应用程序，使用 Exllamav2 后端生成文本，支持 Exl2、GPTQ 和 FP16 模型。","GitHub"]},{"l":"快速开始","p":["按照官方 TabbyAPI GitHub 上的 安装说明 进行操作。","创建您的 config.yml 来设置您的模型路径、默认模型、序列长度等。如果您愿意，可以忽略大部分（如果不是全部）这些设置。","启动 TabbyAPI。如果成功，您应该看到类似这样的内容：","TabbyAPI 终端","在 SillyTavern 的文本补全 API 下，选择 TabbyAPI。","从 TabbyAPI 终端复制您的 API 密钥到\"Tabby API key\"，并确保您的\"API URL\"正确（默认应该是 http://127.0.0.1:5000）。","如果您正确完成了所有操作，您应该在 SillyTavern 中看到类似这样的内容：","TabbyAPI SillyTavern","现在您可以使用 TabbyAPI 进行聊天了！"]},{"l":"TabbyAPI 加载器","p":["TabbyAPI 的开发者创建了一个官方扩展，可以直接从 SillyTavern 加载/卸载模型。安装很简单：","在 SillyTavern 中，点击扩展标签并导航到\"下载扩展和资源\"。","将 https://raw.githubusercontent.com/theroyallab/ST-repo/main/index.json 复制到\"资源 URL\"中，并点击右侧的插头按钮。","您应该看到类似这样的内容。点击 Tabby Loader 旁边的下载按钮。","Tabby 加载器","如果安装成功，您应该在屏幕顶部看到一个绿色的弹出消息。在扩展标签下，导航到 TabbyAPI 加载器，并将您的管理员密钥从 TabbyAPI 终端复制到\"管理员密钥\"中。","点击\"模型选择\"旁边的刷新按钮。当您点击它下面的文本框时，您应该看到模型目录中的所有模型。","Tabby 加载器扩展","现在您可以直接从 SillyTavern 加载和卸载您的模型了！"]},{"l":"支持","p":["还需要帮助？访问 TabbyAPI GitHub 获取开发者官方 Discord 服务器的链接，并 阅读 wiki。"]}],[{"l":"提示词","p":["当您向 AI 发送消息时，您写的文本会与其他文本组合，形成发送给 AI 的单个请求。这个组合的文本被称为\"提示词\"，有时也称为\"请求\"或\"上下文\"。","提示词可以包含各种不同类型的文本，包括：","关于如何生成回应的 主要指令","AI 应该扮演的角色 的定义","您要扮演的角色 的定义","关于 AI 正在交互的 世界信息","来自 数据库 的相关文档或信息","过去对话的 摘要","网络搜索 或其他 外部数据源 的结果","对话中的前几条消息","您给 AI 的消息","关于如何生成回应的 最终指令","这可能需要管理很多内容！为了帮助您理解如何构建和修改发送给 AI 的请求，SillyTavern 识别了您可能想要包含在提示词中的不同元素。然后，您可以构建您的提示词，包含适合您想要与 AI 交互方式的内容。","许多这些元素在您需要更改它们的部分中都有解释。例如，要描述您希望 AI 扮演的角色，您可以使用 角色设计 中的 描述 字段。"]},{"l":"查看提示词","p":["阅读发送给 AI 的最终提示词对于理解 AI 被告知了什么，以及为什么它生成了这样的回应非常有帮助。您可以通过以下几种方式查看提示词：","使用 AI 回复消息上的提示词项目化图标","使用 Prompt Inspector 扩展","检查运行 SillyTavern 的终端窗口中的日志","检查浏览器开发者工具中的控制台"]},{"l":"更改提示词的构建方式","p":["以正确的方式向 AI 呈现提示词的所有部分对于获得最佳回应至关重要。您可以控制提示词的构建方式。","使用 高级格式化 面板为 Text Completion API 自定义提示词构建。","使用 提示词管理器 为 Chat Completion API 自定义提示词构建。"]},{"i":"主提示词系统提示词","l":"主提示词（系统提示词）","p":["主提示词（或系统提示词）定义了模型要遵循的一般指令。它为对话设定了基调和上下文。例如，它告诉模型要充当 AI 助手、写作伙伴或虚构角色。","系统提示词 是 故事字符串 的一部分，通常是模型接收的提示词的第一部分。","主提示词是 提示词管理器 中的默认提示词之一。它通常是模型接收的上下文中的第一条消息，归属于（\"发送自\"）系统角色。","默认的主提示词是：","Write {{char}}'s next reply in a fictional chat between {{char}} and {{user}}.","{{char}} 和 {{user}} 占位符会被替换为您在对话中定义的角色和个性的名称。","您可以在主提示词中使用任何支持的 {{macro}} 标签来包含可能在对话之间变化或随对话进展而变化的信息。"]},{"l":"调整主提示词","p":["默认的主提示词帮助模型理解它应该如何处理后续的角色和个性信息，如何解释过去的对话，以及生成什么样的回应。这是一个灵活的通用提示词，适用于许多情况，因为它确立了 AI 是作为一个角色在与您的个性进行对话。","但是，您可以调整主提示词以更好地满足您的需求。以下是调整主提示词的一些常见原因：","提供额外指令：例如，您希望 AI 解释其推理过程，遵循特定规则，或避免某些主题","明确 AI 的角色：例如，您希望 AI 充当叙述者、讲故事者或向导","改变对话的上下文：例如，您希望 AI 作为 AI 助手、文字冒险游戏或写作伙伴来回应","本指南中的所有示例都对其他用户有效，但适合您的需求和您使用的模型的提示词可能不同。尝试不同的指令和提示词风格，看看什么最适合您。如果您不确定要尝试什么，您可以随时在 SillyTavern Discord 中寻求帮助。","在主提示词中给 AI 额外的指令可以帮助它理解您想要从对话中得到什么。","Write one reply only. Write at least one paragraph, up to four.","Markdown is enabled. Use it to format your response. Enclose code snippets in triple backticks.","Write character dialogue in quotation marks. Write {{char}}'s thoughts in parentheses.","You are an anime roleplay generation model for users aged 13 to 17. You always generate fun, age-appropriate responses.","Answer truthfully and write out your thinking step by step to be sure you get the right answer.","AI 更容易遵循关于它应该做什么的指令，而不是它不应该做什么的指令。例如，如果您希望 AI 避免以某种方式写作，最好告诉它您希望它如何写作。虽然 \"Do not decide what {{user}} says or does\" 经常包含在提示词中以防止 AI 控制您的个性，但一些用户发现 \"Write {{char}}'s responses in a way that respects {{user}}'s autonomy\" 更有效。","通常有比主提示词更好的地方来包含关于用户或角色的信息，修改角色的写作和说话风格，或给出其他具体指令。主提示词最适合用于关于整个对话的一般指令，或关于您想要进行的对话类型的指令。"]},{"l":"消息历史的影响","p":["在调整主提示词以改善 AI 的回应时，请考虑 AI 从消息历史中获取了很多信息。历史是它对过去事件、角色互动和关系的记忆，也是它的词汇选择和写作风格的指南。","通过提供 示例消息 来展示您希望 AI 如何回应，利用这一点。展示您想要的通常比试图解释它更容易！","当您的对话已经有历史时，更改主提示词对 AI 的回应的影响是有限的。在事件和关系方面，AI 假设主提示词发生在遥远的过去，而消息历史更新了它。在写作风格和词汇选择方面，AI 假设历史中的所有消息都是根据 当前 主提示词中的规则生成的，并且它应该继续以相同的方式生成消息。处理这种情况的一些建议是：","在消息历史的末尾或之后插入当前指令，例如使用 作者注释","通过开始新的对话来测试您对主提示词的更改","编辑消息历史以删除或纠正不想要的行为的示例","使用 历史后指令 为 AI 提供最终指令","永远不要让 AI \"逃脱\"您不希望它做的事情。如果您不喜欢 AI 的回应，不要继续对话好像它是正确的。相反，修改提示词，重新生成消息，然后从那里继续。这将帮助 AI 学习您想要什么。"]},{"i":"移除虚构聊天上下文","l":"移除\"虚构聊天\"上下文","p":["在某些情况下，\"虚构聊天\"可能不是您对话的正确上下文。","您可以从主提示词中移除\"虚构\"上下文：","Write {{char}}'s next reply in a conversation with {{user}}.","您可能不希望 AI 认为自己在角色扮演。与其移除角色的概念，您可以移除 AI 的概念：","You are {{char}}, a helpful assistant. You provide useful information and help {{user}} with their questions."]},{"l":"AI 作为叙述者或讲故事者","p":["如果您希望 AI 充当叙述者，从全知的角度描述事件，发明自己的角色和场景呢？","一种方法是为 AI 创建一个命名的角色作为叙述者。这个角色可以叫做\"叙述者\"或\"AI\"，表明 AI 是一个通用的讲故事者，或者可以根据特定场景或设定命名，给 AI 在该设定中讲故事的任务。然后可以在 角色 或 世界信息 中定义设定的细节。","您需要调整默认的主提示词以反映 AI 的角色。对于通用叙述者，您可以使用：","You are {{char}}, a skilled and versatile storyteller. Narrate the story.","或者对于特定设定：","You are the narrator of a fantasy scenario. Play as the characters that visit {{char}}.","明确用户在对话中的角色很有帮助。您的消息是故事的一部分，还是对叙述者关于您的角色做什么或说什么的指令？包含用户在故事中的示例：","The story should progress by responding to the actions and dialogue of {{user}}. Narrate the story in third person.","将用户排除在故事之外的示例：","Enter Adventure Mode. Narrate the story based on {{user}}'s dialogue and actions after \">\". Describe the surroundings in vivid detail. Be detailed, creative, verbose, and proactive. Move the story forward by introducing fantasy elements and interesting characters.","定义用户的角色不仅帮助 AI 理解如何回应您的消息，还帮助它理解它在多大程度上可以控制您的个性。这避免了 AI 为您的个性做出您宁愿自己做出的决定的情况。"]},{"l":"历史后指令","p":["历史后指令是在主提示词和用户消息之后发送给 AI 的额外指令。它们可以用于根据消息历史为 AI 提供额外的上下文或指令。","由于历史后指令是在用户消息之后发送的，它们是 AI 在生成回应之前收到的最后指令。AI 通常给它们比主提示词更高的优先级，它们可以覆盖主提示词的指令。","历史后指令不能全局定义。您可以使用 作者注释 达到相同的效果。","要使用每个角色的历史后指令，将它们添加到角色的 历史后指令 中，并启用 both 优先使用角色指令 和 允许历史后指令。","历史后指令作为一个不可见的用户角色注入添加，位于提示词的最后一行之前（通常包含回应消息\"标题\"）。","历史后指令是 提示词管理器 中的默认提示词之一。它通常是模型接收的上下文中的最后一条消息，归属于（\"发送自\"）系统角色。如果您的 Chat Completion API 不支持系统角色，它通常会归属于用户角色。"]},{"i":"添加到提示词世界信息","l":"添加到提示词（世界信息）","p":["您可以使用 世界信息 功能在提示词的任何位置插入额外信息。通过设置何时应该插入信息的条件，您可以引导 AI 包含特定细节，改变它的回应方式，或向对话添加新元素。","世界信息的一些常见用途包括：","关于世界或设定的\"知识书\"或\"百科全书\"","管理各种角色和情况的不同系统提示词的方式","存储 AI 应该在对话中\"回忆\"的记忆的地方","创建、编辑和共享角色细节的更模块化系统","AI 要反应的随机事件和惊喜的来源，或让您做出反应的来源！"]}],[{"l":"高级格式设置","p":["本节提供的设置允许对 提示词构建 策略进行更多控制，主要针对文本补全 API。","本面板中的大多数设置不适用于聊天补全 API，因为它们由提示词管理器系统管理。","系统提示词","上下文模板","分词器","自定义停止字符串","系统提示词：不适用，请使用 提示词管理器","上下文模板：不适用，请使用 提示词管理器"]},{"l":"后端定义的模板","p":["不适用于聊天补全 API，因为它们使用不同的提示词构建器。","一些文本补全源提供了自动选择模型作者推荐模板的功能。这通过比较模型的 tokenizer_config.json 文件中定义的聊天模板的哈希值与 SillyTavern 默认模板之一来实现。","必须在 高级格式设置 菜单中启用 派生模板 选项。这可以应用于上下文、指令或两者。","必须选择支持的后端作为文本补全源。目前只有 llama.cpp 和 KoboldCpp 支持派生模板。","在建立与 API 的连接时，模型必须正确报告其元数据。如果这不起作用，请尝试将后端更新到最新版本。","报告的聊天模板哈希值必须与 已知的 SillyTavern 模板 之一匹配。这仅涵盖默认模板，如 Llama 3、Gemma 2、Mistral V7 等。","如果哈希值匹配，且模板存在于模板列表中（即未重命名或删除），则会自动选择该模板。"]},{"l":"系统提示词","p":["对于聊天补全 API 中的等效设置，请使用 提示词管理器。 主提示词 是聊天补全 API 中系统提示词的等效项。","系统提示词定义了模型需要遵循的一般指令。它为对话设置基调和上下文。例如，它告诉模型充当 AI 助手、写作伙伴或虚构角色。","系统提示词是 故事字符串 的一部分，通常是模型接收的提示词的第一部分。","查看 提示词指南 以了解更多关于系统提示词的信息。"]},{"l":"上下文模板","p":["对于聊天补全 API 中的等效设置，请使用 提示词管理器。","通常，AI 模型需要您以某种特定方式提供角色数据。SillyTavern 包含了一系列针对不同模型的预制转换规则，但您可以根据需要自定义它们。","本节的选项在 上下文模板 中有详细说明。"]},{"l":"分词器","p":["分词器是一个将文本分解成更小单位（称为 token）的工具。这些 token 可以是单个词，甚至是词的部分，如前缀、后缀或标点符号。一个经验法则是，一个 token 通常对应 3~ 4 个字符的文本。","本节的选项在 分词器 中有详细说明。"]},{"l":"自定义停止字符串","p":["接受 JSON 序列化的停止字符串数组。示例：[\\n, \\nUser:, \\nChar:]。如果您不确定格式，请使用 在线 JSON 验证器。如果模型输出 以任何停止字符串结尾，它们将从输出中移除。","支持的 API：","KoboldAI Classic（1.2.2 及更高版本）或 KoboldCpp","AI Horde","文本补全 API：Text Generation WebUI (ooba)、Tabby、Aphrodite、Mancer、TogetherAI、Ollama 等","NovelAI","OpenAI（最多 4 个字符串）和兼容的 API","OpenRouter（文本和聊天补全）","Claude","Google AI Studio"]}],[{"l":"上下文模板","p":["对于聊天补全 API 中的等效设置，请使用 提示词管理器。","通常，AI 模型需要您以某种特定方式提供角色数据。SillyTavern 包含了一系列针对不同模型的预制转换规则，但您可以根据需要自定义它们。","在\" 高级格式设置\"面板中编辑这些设置。"]},{"l":"故事字符串","p":["此字段是聊天前角色数据的模板（在内部称为故事字符串）。 这是为文本补全和指令模型格式化角色卡片的主要方式。","模板支持 Handlebars 语法和任何自定义文本注入或格式化。请参阅此处的语言参考： https://handlebarsjs.com/guide/","我们为 Handlebars 模版引擎提供以下参数（用双大括号包裹它们）：","description- 角色的描述","scenario- 角色的场景","personality- 角色的个性","system- 系统提示词 或角色的主提示词覆盖（如果存在且在用户设置中启用了\"优先使用角色提示词\"）","persona- 选定的个性描述","char- 角色名称","user- 选定的个性名称","wiBefore 或 loreBefore- 位置设置为\"角色定义之前\"的已激活世界信息条目的组合","wiAfter 或 loreAfter- 位置设置为\"角色定义之后\"的已激活世界信息条目的组合","mesExamples- （可选）角色的示例对话，使用分隔符进行指令格式化。将\"示例消息行为\"设置为\"永不包含示例\"以避免重复。","支持特殊的 {{trim}} 宏来移除其周围的任何换行符。如果您希望某些文本部分与前一行之间 不 用换行符分隔，请使用它（ 空格不会被修剪）。","警告：如果故事字符串模板中缺少上述某些参数，它们将完全不会被发送到提示词中。"]},{"l":"示例分隔符","p":["用作示例对话块的块头和分隔符。示例对话中的任何 START 标签实例都将被此字段的内容替换。"]},{"l":"聊天开始","p":["在渲染的故事字符串之后和示例对话块之后，但在上下文中的第一条消息之前插入作为分隔符。"]},{"l":"将分隔符作为停止字符串","p":["将\"示例分隔符\"和\"聊天开始\"添加到停止字符串列表中。","如果模型倾向于产生幻觉或泄露由分隔符前导的整个示例对话块，这很有帮助。"]},{"l":"将名称作为停止字符串","p":["将角色和用户个性名称添加到停止字符串列表中。","建议保持开启以防止模型冒充。"]},{"l":"允许历史后指令","p":["在提示词末尾包含历史后指令，格式化为最后一条用户消息。","历史后指令提示词应该在角色卡片中定义，并且应该启用\"优先使用角色指令\"设置。","应谨慎使用，因为在上下文中较低位置放置指令可能会导致较小模型的输出质量下降。"]},{"l":"始终在提示词中添加角色名称","p":["将角色名称附加到提示词以强制模型以角色身份完成消息："]}],[{"l":"指令模式","p":["指令模式允许您调整针对各种提示词格式训练的指令遵循模型的提示词，如 Alpaca、ChatML、Llama2 等。","对于 Chat Completion API，请使用 提示词管理器 获取等效设置。"]},{"l":"API 支持"},{"l":"Text Completion API","p":["完全支持。这包括：","Text Completion 下的所有来源","KoboldAI Classic","AI Horde"]},{"l":"选择格式","p":["选择的指令模板必须与后端运行的实际模型的期望相匹配。","这通常反映在 HuggingFace 上的模型卡片中，有些甚至提供 SillyTavern 兼容的 JSON 文件。","示例： NeverSleep/Noromaid-13b-v0.1.1"]},{"i":"chat-completion-apiopenaiclaude-等","l":"Chat Completion API（OpenAI、Claude 等）","p":["这不支持**（也不需要）** Chat Completion API。它们使用完全不同的提示词构建器。"]},{"l":"NovelAI","p":["虽然 NovelAI 技术上 支持，但他们的模型都没有经过训练来理解指令格式。NovelAI 模型可以使用一个特殊的指令模块，当在聊天消息中遇到用大括号包裹的指令时 自动 激活，因此对整个提示词使用指令模式将导致输出质量 降低。","以下是自动激活 NovelAI 指令模块的示例："]},{"l":"指令模式设置"},{"l":"系统提示词","p":["系统提示词现在是一个独立的实体。有关更多详细信息，请参见 高级格式化 页面。"]},{"l":"模板","p":["为一些知名的指令模型提供带有序列的现成模板。","更改模板会将未保存的设置重置为最后保存的状态！如果您进行了任何不想丢失的更改，请记得保存您的模板。"]},{"l":"激活正则表达式","p":["如果定义为有效的正则表达式，当连接到模型且其名称匹配此正则表达式时，将自动选择此模板。","需要预先启用指令模式。只有模板中的第一个正则表达式匹配会被选中（按字母顺序评估）。"]},{"l":"用换行符包装序列","p":["在插入提示词时，每个序列文本都会用换行符包装。Alpaca 及其衍生品需要此功能。","如果您想完全控制行终止符，请禁用此功能。"]},{"l":"替换序列中的宏","p":["如果启用，在消息包装序列中定义的已知 {{macro}} 替换将被替换。","此外，可以在消息前缀中使用特殊的 {{name}} 宏来引用附加到消息的实际名称（而不是当前活动的 {{char}} 或 {{user}}），这在使用群组聊天或 /sendas 命令时很有帮助。如果无法确定名称，则使用\"System\"作为后备占位符。"]},{"l":"包含名称","p":["如果启用，在前缀序列后将角色和用户名添加到聊天历史记录中。","以下选项可用：","从不：不在消息内容前添加名称前缀。","群组和过去的个性：仅为群组角色和过去的个性的消息添加名称前缀。","始终：始终在消息内容前添加名称前缀。"]},{"i":"序列系统提示词包装","l":"序列：系统提示词包装","p":["定义系统提示词的包装方式。"]},{"l":"系统提示词前缀","p":["插入在系统提示词之前。"]},{"l":"系统提示词后缀","p":["插入在系统提示词之后。","** 重要：** 这 仅 适用于系统提示词本身， 不 适用于整个故事字符串！如果您想包装故事字符串，请将这些序列添加到上下文模板部分中的故事字符串模板。"]},{"i":"序列聊天消息包装","l":"序列：聊天消息包装","p":["这些设置定义了在构建提示词时如何包装属于不同角色的消息。","所有前缀序列也会自动用作停止字符串。"]},{"l":"用户消息前缀","p":["在用户消息之前插入，并在扮演时作为最后一行提示词。"]},{"l":"用户消息后缀","p":["在用户消息之后插入。"]},{"l":"助手消息前缀","p":["在助手消息之前插入，并在生成 AI 回复时作为最后一行提示词。"]},{"l":"助手消息后缀","p":["在助手消息之后插入。"]},{"l":"系统消息前缀","p":["在系统（由斜杠命令或扩展添加）消息之前插入。"]},{"l":"系统消息后缀","p":["在系统消息之后插入。"]},{"l":"系统与用户相同","p":["如果选中为真，系统消息将使用用户角色消息序列。","否则，系统消息使用它们自己的序列（如果不为空）或根本不进行任何包装（如果为空）。"]},{"l":"其他序列","p":["用于提示词构建的更精细调整的各种高级配置"]},{"l":"第一个助手前缀","p":["在第一个助手的消息之前插入。","只有 聊天历史 中的第一条消息才算数，而不是实际首先进入提示词的消息！"]},{"l":"最后一个助手前缀","p":["在最后一个助手的消息之前插入，或在生成 AI 回复时作为最后一行提示词。","在后台生成文本时不使用（例如 Stable Diffusion 提示词或摘要）。将使用系统指令前缀或常规助手前缀。"]},{"l":"系统指令前缀","p":["在后台生成中性/系统文本时（例如 Stable Diffusion 提示词或摘要）作为最后一行提示词插入。"]},{"l":"用户填充消息","p":["如果聊天历史不是以用户消息开始，将在聊天历史开始时插入。","** 用例：** 当指令格式 严格要求 提示词必须以用户开始，并且消息角色只能交替出现时，例如：Llama 2 Chat、Mistral Instruct。"]},{"l":"停止序列","p":["表示回复结束的文本。也作为停止字符串发送到后端 API。","如果生成了停止序列，输出中该序列之后的所有内容都将被删除（包括序列本身）。"]}],[{"l":"分词器","p":["AI21 API：Jamba 分词器（需要一次性下载）。","API 分词器。直接从模型查询生成 API 以获取 token 计数。已知支持的后端：Text Generation WebUI (ooba)、koboldcpp、TabbyAPI、Aphrodite API。 如果您使用支持的后端，请选择这个。","Chat Completion API （不可覆盖）：","Claude：通过 WebTokenizers 的模型相关分词器。","Cohere API：Command-R 分词器（需要一次性下载）。","DeepSeek API：DeepSeek 分词器（需要一次性下载）。","DeepSeek 分词器。由 DeepSeek 模型（如 R1）使用。 如果您使用 DeepSeek 模型，请选择这个。","Gemma 分词器。由 Gemini/Gemma 模型使用。 如果您使用 Gemma 模型，请选择这个。","Google AI Studio：Gemma 分词器。","KoboldAI Classic / AI Horde：Llama 分词器。","KoboldCpp：模型 API 分词器。","Llama 3 分词器。由 Llama 3/3.1 模型使用。 如果您使用 Llama 3/3.1 模型，请选择这个。","Llama 分词器。由 Llama 1/2 模型家族使用：Vicuna、Hermes、Airoboros 等。 如果您使用 Llama 1/2 模型，请选择这个。","Mistral Nemo 分词器。由 Mistral Nemo 模型家族及其微调版本使用。 如果您使用 Mistral Nemo/Pixtral 模型，请选择这个。","Mistral V1 分词器。由较旧的 Mistral 模型家族及其微调版本使用。 如果您使用较旧的 Mistral 模型，请选择这个。","MistralAI API：Mistral V1 或 V3 分词器（需要一次性下载）。","NerdStash v2 分词器。由 NovelAI 的 Kayra 模型使用。 如果您使用 Kayra 模型，请选择这个。","NerdStash 分词器。由 NovelAI 的 Clio 模型使用。 如果您使用 Clio 模型，请选择这个。","NovelAI Clio：NerdStash 分词器。","NovelAI Kayra：NerdStash v2 分词器。","OpenAI：通过 tiktoken 的模型相关分词器。","OpenRouter：对应模型的 Llama、Mistral、Gemma、Yi 分词器。","Scale API：GPT-4 分词器。","SillyTavern 提供了一个\"最佳匹配\"选项，根据使用的 API 提供商使用以下规则尝试匹配分词器。","Text Completion API （可覆盖）：","Text Completion：API 分词器（如果支持）或 Llama 分词器。","Yi 分词器。由 Yi 模型使用。 如果您使用 Yi 模型，请选择这个。","分词器是一个将文本分解成更小单位（称为 token）的工具。这些 token 可以是单个词，甚至是词的部分，如前缀、后缀或标点符号。一个经验法则是，一个 token 通常对应 3~ 4 个字符的文本。","后备分词器：GPT-3.5 turbo 分词器。","如果您得到不准确的结果或想要实验，您可以设置一个_覆盖分词器_供 SillyTavern 在向 AI 后端发送请求时使用：","无。每个 token 估计为 ~ 3.3 个字符，向上取整到最接近的整数。 如果您的提示词在高上下文长度时被截断，请尝试这个。 这种方法被 KoboldAI Lite 使用。"]},{"l":"额外分词器","p":["由于大小原因，这些分词器不包含在默认安装中。首次使用时需要一次性下载。","Qwen2 分词器。","Command-R 分词器。由 Chat Completion 中的 Cohere 源使用。","Mistral V3 (Nemo) 分词器。由 Chat Completion 中的 MistralAI 源使用（Nemo 和 Pixtral 模型）。","DeepSeek (deepseek-chat) 分词器。由 Chat Completion 中的 DeepSeek 源使用。","如果您不想使用互联网下载，可以在 config.yaml 中选择退出： enableDownloadableTokenizers。设置为 false 以禁用下载。","您也可以从 SillyTavern-Tokenizers 仓库手动下载分词器。下载 JSON 文件并将它们放在数据根目录的 _cache 子目录中，默认路径是 ./data/_cache。如果 _cache 目录不存在，请创建它。之后，重启 SillyTavern 服务器以重新初始化分词器。","如果所需的分词器模型未缓存且下载被禁用，将使用后备分词器（Llama 3）进行计数。"]},{"l":"Token 填充","p":["SillyTavern 将始终为 Chat Completion 模型使用匹配的分词器，因此不需要 token 填充。","除非 SillyTavern 使用由运行模型的远程后端 API 提供的分词器，否则在提示词生成期间假定的所有 token 计数都是基于所选 分词器 类型的估计。","由于在接近模型定义的最大值的上下文大小上，分词结果可能不准确，提示词的某些部分可能会被修剪或删除，这可能会对角色定义的连贯性产生负面影响。","为了防止这种情况，SillyTavern 将上下文大小的一部分分配为填充，以避免添加超过模型容纳能力的聊天项。如果您发现即使选择了最匹配的分词器，提示词的某些部分仍被截断，请调整填充以确保描述不被截断。","您可以输入负值进行反向填充，这允许分配超过设定的最大 token 数量。"]}],[{"i":"cfg无分类器引导","l":"CFG（无分类器引导）","p":["页面作者：kingbri","贡献者：kingbri, Guillaume \"Vermeille\" Sanchez, AliCat"]},{"i":"这是什么","l":"这是什么？","p":["CFG（classifier-free guidance，无分类器引导）是一种用于帮助使提示词的某些部分变得更不突出或更突出的方法。"]},{"l":"支持的后端 API","p":["目前支持的后端包括 oobabooga 的 textgen WebUI、NovelAI 和 TabbyAPI。 NovelAI 有其自己的 CFG 文档。","警告：由于需要处理多个提示词，CFG 会增加显存使用量！如果在使用 CFG 生成提示词时 GPU 内存耗尽，请考虑减小上下文大小、使用参数较少的模型或完全关闭 CFG。"]},{"l":"配置","p":["访问 CFG 设置的方式与访问作者注释相同：","CFGhamburgermenupng","以下是 CFG 面板的样子：","CFGchatpanelpng","CFG 面板中有四个下拉菜单：","聊天 CFG","将 CFG 比例和提示词的范围限定在当前聊天中","角色 CFG","将 CFG 比例和提示词的范围限定在指定角色","全局 CFG","全局覆盖 CFG 比例和提示词（也会覆盖模型预设！）","CFG 高级设置（以前称为 CFG 提示词级联）","用于组合前三个下拉菜单中的提示词并设置插入深度的位置。","注意：如果引导比例设置为 1，由于这是 CFG 的\"关闭\"状态，因此不会发送任何内容。"]},{"l":"群聊","p":["在群聊中，CFG 比例面板看起来是这样的：","CFGpanelgcpng","主要变化是移除了角色 CFG，并在聊天 CFG 下拉菜单中添加了一个名为\"使用角色 CFG 比例\"的复选框。这允许使用当前角色的引导比例，而不是聊天 CFG 比例设置的值。","此功能的主要用途是根据每个角色的个别需求来调整比例。","此外，在提示词级联中勾选\"角色负面提示词\"框将会在聊天提示词（如果启用）的基础上附加独立的角色负面提示词。"]},{"l":"概念"},{"i":"这不是在-stable-diffusion-中使用的吗","l":"这不是在 Stable Diffusion 中使用的吗？","p":["是也不是。LLM 中的 CFG 的工作方式与 Stable Diffusion 中的不同。基于 LLM 的 CFG 基于\"提示词混合\"原理工作。CFG 公式接受一个正面提示词和一个负面提示词，然后混合它们之间的 差异。之后，发送组合的提示词并生成响应！","这里有一个插图帮助理解这个概念。红色代表负面提示词，蓝色代表中性提示词，紫色代表被解释的混合结果。所有三个提示词中相同的白色空间不会用于 CFG 混合。","stcfgdiagrampng","如果您想了解更多关于 CFG 和 LLM 的信息，Vermifuge 的原始论文在这里。建议您阅读/收听：","论文 - [2306.17806] Stay on topic with Classifier-Free Guidance (arxiv.org)","音频版本 - https://www.youtube.com/watch?v=MGY00YFcyco"]},{"i":"我需要-cfg-提示词吗","l":"我需要 CFG 提示词吗？","p":["不需要！CFG 提示词完全是可选的。仅仅将引导比例调整到 1 以上也会对响应产生影响，这可以突出聊天和角色互动。"]},{"i":"什么是好的-cfg-提示词","l":"什么是好的 CFG 提示词？","p":["我们已经确定 CFG 提示词与 Stable Diffusion 的负面标签和嵌入不同。那么我们如何制作提示词呢？","警告：这假设您使用 PLists 和 Ali:Chat 创建了一个角色。如果没有，请随意尝试各种提示词技巧。","假设我有一个名叫\"John\"的角色。从他的示例对话中可以看出，John 应该一直感到快乐和兴奋。然而，在与 John 聊天时，他有时会表现得悲伤和沮丧。","为了消除这种情况，CFG 来救场！只需将负面提示词设为 [John's feelings: sad, depressed] 来帮助消除悲伤部分。您可以选择将正面提示词设为 [John's feelings: happy, joyful] 来进一步突出 John 的快乐部分。"]},{"l":"正面提示词","p":["我在上一节中提到了这一点，但我想再详细说明一下。正面提示词用于进一步突出角色的某些部分。让我们再次以 John 为例。通过使用正面提示词 [John's feelings: happy, joyful] 使他更快乐，John 应该会开始输出比不包含正面提示词时更快乐的对话。"]},{"i":"但是","l":"但是...","p":["这些只是基于特定角色格式经验的 宽松指南。还有许多其他方法可以创建提示词，您应该进行实验。请随意与其他用户分享您的想法！"]},{"l":"引导比例","p":["这里有一个经验法则。引导比例为 1 意味着 CFG 被禁用。实际上，如果引导比例为 1，SillyTavern 不会向后端发送任何内容。引导比例 1 将在不同程度上产生其他部分所示的结果。","然而，引导比例 1 将产生 相反 的效果，因为这里负面提示词被用作主要提示词。","让我们再次以 John 为例。负面提示词是 [John's feelings: sad, depressed]，正面提示词是 [John's feelings: happy, joyful]，引导比例为 0.8。","这将反过来更多地突出 负面 提示词，您会看到 John 开始表现得比正常情况更悲伤，而不是更快乐。","简而言之：使用引导比例 1.5，然后根据您的输出向上或向下调整。"]},{"l":"提示词级联","p":["负面和正面提示词可以在 CFG 类型之间级联（类型包括每次聊天、每个角色和全局覆盖）。有关更多信息，请参见配置标题。"]},{"l":"插入深度","p":["遵循基本规则：在提示词中位置越低，对响应的影响就越大。对于聊天，我建议使用默认深度 1，因为它与 SillyTavern 的其他组件非常灵活。","然而，如果您想要实验，插入深度 0 是开放的。但是，这些可能会显著改变您的响应的外观，并且不建议在这里使用提示词级联！"]}],[{"l":"提示词管理器","p":["提示词管理器是一个系统，允许对 Chat Completion API 的 提示词构建 策略进行更多控制。","对于 Text Completion API，请使用 高级格式化 获取等效设置。","请注意，如果预设与您的某个角色卡片共享名称，在与该特定角色开始聊天时，它将被自动选择。为预设命名一些独特的名称以避免这种行为。","通过点击导航栏中的\"AI 回应配置\"按钮访问提示词管理器。提示词管理器位于 常用设置 面板下方。"]}],[{"l":"世界信息","p":["World Info（也称为 Lorebooks 或 Memory Books）是 ST 中的一个强大工具，可以动态地将提示词插入到您的聊天中，以帮助引导 AI 回复。","通常，World Info（简称 WI）用于增强 AI 对您的虚拟世界细节的理解，但您也可以使用 World Info 条目来插入任何您想要插入到提示词中的内容。","它的功能类似于一个动态字典，只有当与条目相关的关键词出现在消息文本中时，才会插入来自 World Info 条目的相关信息。","SillyTavern 引擎会激活并无缝地将适当的设定整合到提示词中，为 AI 提供背景信息。","需要注意的是，虽然 World Info 有助于引导 AI 生成所需的内容，但它不能保证这些内容一定会出现在生成的输出消息中。这取决于您的模型在利用额外信息方面的能力！"]},{"l":"专业提示","p":["World Info 引擎是一个非常强大的提示词管理工具。不要仅仅局限于添加角色设定，可以自由尝试。","激活关键词、标题和其他不在 内容 字段中的信息不会插入到上下文中，因此每个 World Info 条目都应该有一个全面、独立的描述。","要创建丰富详细的世界设定，条目可以通过使用递归激活相互链接和引用。更多信息请参见下面的 递归。","SillyTavern 为插入的背景信息提供灵活的上下文预算。为了节省提示词 token，建议保持条目内容简洁。"]},{"l":"延伸阅读","p":["World Info 百科全书：由 kingbri、Alicat、Trappu 编写的 World Info 和 Lorebooks 深入指南。"]},{"l":"角色设定","p":["可选地，一个 World Info 文件可以分配给一个角色，作为该角色在所有聊天（包括群组）中的专用设定来源。","要做到这一点，导航到角色管理面板并点击地球按钮，然后从下拉列表中选择 World Info 并点击\"确定\"。"]},{"l":"角色设定插入策略","p":["在生成 AI 回复时，来自角色 World Info 的条目将与来自全局 World Info 选择器的条目使用以下策略之一进行组合："]},{"i":"均匀排序默认","l":"均匀排序（默认）","p":["所有条目将根据它们的插入顺序进行排序，就像它们是一个大文件的一部分一样，忽略来源。"]},{"l":"角色设定优先","p":["来自角色 World Info 的条目将根据它们的插入顺序首先包含，然后是来自全局 World Info 的条目。"]},{"l":"全局设定优先","p":["来自全局 World Info 的条目将根据它们的插入顺序首先包含，然后是来自角色 World Info 的条目。"]},{"l":"World Info 条目"},{"l":"关键词","p":["触发 World Info 条目激活的关键词列表。默认情况下，关键词不区分大小写（这是 可配置的）。"]},{"i":"正则表达式regex作为关键词","l":"正则表达式（Regex）作为关键词","p":["关键词通过支持 regex 提供了更灵活的匹配方法。这使得可以匹配更多动态内容，包括可选的词或字符、间距以及 regex 提供的所有其他实用工具。 如果定义的关键词是有效的 regex（Javascript regex 风格，使用 / 作为分隔符。允许所有标志），在检查条目是否应该被触发时，它将被视为 regex。多个 regex 可以作为单独的关键词输入，并且可以相互配合工作。在 regex 内部，可以使用逗号。纯文本关键词不支持逗号，因为它们被视为关键词分隔符。","高级 regex 匹配的一个用例示例： 当角色执行与天气相关的动作时应该插入的条目/指令","有关 Regex 语法和可能性的更多信息： Regular expressions - JavaScript | MDN"]},{"l":"高级 Regex 每条消息匹配","p":["ST 在 WI 扫描缓冲区中的每条聊天消息前加上 角色名称:，在 v1.12.6 之后，使用字符值 1（\\x01）进行连接。 这意味着您可以使用与该分隔字符相关的 regex 来匹配特定角色的输入或输出。","例如，要仅匹配用户说\"hello\"，您可以使用以下 regex："]},{"l":"关键词输入","p":["有两种输入关键词的模式，每种模式的 UI 略有不同。在 ⌨️ 纯文本模式（默认）中，关键词可以在单个文本字段中以逗号分隔的列表形式输入。也可以包含 regex，但它们没有任何特殊高亮显示。在 ✨ 花哨模式 中，关键词显示为单独的元素，regex 将被高亮显示。该控件支持编辑和删除关键词。可以通过输入控件内的内联按钮切换模式。"]},{"l":"可选过滤器","p":["与主关键词一起使用的补充关键词列表。请参见 可选过滤器。这些关键词也支持 regex。"]},{"l":"条目内容","p":["条目激活时插入到提示词中的文本。"]},{"l":"插入顺序","p":["数值。定义当多个条目同时激活时的优先级。具有更高顺序数字的条目将被插入到上下文的末尾，因为它们对输出的影响更大。"]},{"l":"插入位置","p":["控制条目插入到提示词的位置。可用选项：","角色定义之前：在角色描述和场景之前插入此条目。对对话有中等影响。","角色定义之后：在角色描述和场景之后插入此条目。对对话有更大影响。","示例消息之前：将 World Info 条目解析为示例对话块，并插入到角色卡提供的示例之前。","示例消息之后：将 World Info 条目解析为示例对话块，并插入到角色卡提供的示例之后。","作者笔记顶部：将 World Info 条目插入到作者笔记内容的顶部。影响程度取决于作者笔记的位置。","作者笔记底部：将 World Info 条目插入到作者笔记内容的底部。影响程度取决于作者笔记的位置。","@ D：将 World Info 条目插入到聊天中的特定深度（深度 0 为提示词底部）。","⚙️ - 作为系统角色消息","\uD83D\uDC64 - 作为用户角色消息","\uD83E\uDD16 - 作为助手角色消息","示例消息条目将根据提示词构建设置进行格式化：指令模式或聊天完成提示词管理器。它们也遵循示例消息行为规则：在完整上下文时逐渐被推出、始终保留或完全禁用。","如果您的作者笔记被禁用（插入频率 = 0），则位于作者笔记位置的 World Info 条目将被忽略！"]},{"i":"条目标题备注","l":"条目标题/备注","p":["一个方便您标记条目的文本字段，不会被 AI 或任何触发逻辑使用。","如果为空，可以通过点击\"填充空备注\"按钮使用条目的第一个关键词进行回填。"]},{"l":"策略","p":["\uD83D\uDD35 (蓝圈) = 该条目将始终存在于提示词中。","\uD83D\uDFE2 (绿圈) = 该条目仅在存在关键词时触发。","\uD83D\uDD17 (链条) = 该条目允许通过嵌入相似性插入。","每个条目还有一个切换开关，允许您启用或禁用该条目。"]},{"l":"选择性","p":["这些选项决定了主关键词与可选过滤器之间的逻辑关系：","AND ANY：要激活此条目，必须匹配一个主关键词 并且 至少匹配一个可选过滤器关键词。","AND ALL：要激活此条目，必须匹配一个主关键词 并且 匹配所有可选过滤器关键词。","NOT ANY：要激活此条目，必须匹配主关键词 并且 不匹配任何可选过滤器关键词。","NOT ALL：如果匹配了所有可选过滤器关键词，即使匹配主关键词，也不会激活此条目。否则，只要匹配主关键词，就会激活。","这些逻辑规则允许创建复杂的包含和排除组合，以精确控制何时激活条目。如果未提供可选过滤器参数，则忽略此功能。所有选项都支持正则表达式匹配。","这些选项允许创建包含和排除的复杂组合，以准确控制何时激活条目。"]},{"l":"触发百分比","p":["如果设置为小于 100 的值，只有在达到该随机几率时，该条目才会被激活。这是一种极好的在插入和排除提示词内容方面添加随机性的方法。例如，设置为 10% 意味着即使匹配了所有关键词，该条目的内容也只有大约十分之一的聊天消息会被包含在内。","使用此功能在您的聊天中创建随机事件。例如，每条消息都有 1% 的机会在提到上古神的名字时唤醒它。"]},{"l":"包含组","p":["包含组控制当多个具有相同组标签的条目同时触发时如何选择条目。如果激活了多个具有相同组标签的条目，只有一个会被插入到提示词中。","默认情况下，根据它们的组权重（默认为 100 点）随机选择选定的条目 — 数字越高，被选择的概率越高。这允许在触发的条目之间进行随机选择，为互动添加惊喜和变化元素。","如果将多个组定义为逗号分隔的列表，单个条目可以是多个包含组的一部分。上述相同的逻辑将适用。如果该条目被触发，它将 禁用 属于其任何组的所有其他条目。因此，如果激活了任何组，该条目将不会被激活。"]},{"l":"优先包含","p":["为了对通过 包含组 激活的条目提供更多控制，您可以使用\"优先包含\"设置。此选项允许您确定性地指定要选择的条目，而不是随机掷组权重机会。","如果激活了多个具有相同组标签且启用此设置的条目，将选择具有最高\"顺序\"值的条目。这对于通过包含组创建回退序列很有用。例如，优先考虑低深度条目以获得更多强调，或者在两者都有效时选择特定的场景设置指令而不是另一个。"]},{"l":"使用组评分","p":["当此设置全局启用或每个条目启用时，激活的条目关键词数量决定组胜者选择。只有具有最高关键词匹配数的组子集将被留下以通过组权重或包含优先级激活 - 其余的将被停用并从组中移除。","使用此功能为大组中的单个条目提供更多特异性。例如，它们可以有一个共同的关键词和一个特定的关键词。当没有提供特定关键词时，将插入随机条目，反之亦然。","主关键词的分数计算逻辑是 1 个匹配 = 1 分。","对于次要关键词，交互取决于所选的选择性逻辑：","AND ANY：1 个次要匹配 = 1 分。","AND ALL：如果所有次要关键词都匹配，则每个次要关键词得 1 分。","NOT ANY 和 NOT ALL：无变化。","示例：","条目 1. 关键词：song, sing, Black Cat. 组：songs","条目 2. 关键词：song, sing, Ghosts. 组：songs","输入 sing me a song 可以激活任一条目（都激活了 2 个关键词），但 sing me a song about Ghosts 将只激活条目 2（激活了 3 个关键词）。"]},{"l":"自动化 ID","p":["允许将 World Info 条目与快速回复扩展中的 STscripts 集成。如果快速回复命令和 WI 条目具有相同的自动化 ID，当具有匹配 ID 的条目被激活时，该命令将自动执行。","自动化按照它们被触发的顺序执行，遵循您指定的排序策略，将 角色设定插入策略 与\"优先级\"排序相结合。这导致 蓝圈 条目首先处理，然后是其他按照指定的\"顺序\"处理。递归触发的条目将按照相同的顺序在之后处理。","如果激活了多个具有相同自动化 ID 的条目，脚本命令将只运行一次。"]},{"l":"向量存储匹配","p":["Vector Storage 扩展通过使用最近聊天消息和 World Info 条目内容之间的相似性，提供了关键词匹配的替代方案。","要启用和使用此功能，需要满足以下先决条件：","Vector Storage 扩展已启用，并配置为使用可用的嵌入源之一。","Vector Storage 扩展设置中的\"为 World Info 启用\"复选框已勾选。","要么允许无关键词匹配的 World Info 条目具有\"向量化\"（\uD83D\uDD17）状态，要么在 Vector Storage 设置中勾选了\"为所有条目启用\"选项。","这里不会涉及扩展中的向量化模型选择和\"嵌入\"这个术语背后的理论含义。如果您需要更多关于这个主题的信息，请查看 数据库 指南。","Vector Storage 匹配遵循以下规则：","可以通过\"最大条目数\"设置调整允许通过 Vector Storage 匹配的最大条目数。这个数字只设置限制，不影响 World Info 激活设置中设置的 token 预算。所有预算规则仍然适用。","此功能仅替换关键词检查。所有额外检查都必须满足才能插入条目：触发%、角色过滤器、包含组等。","不使用激活设置或条目覆盖中的\"扫描深度\"设置。而是使用 Vector Storage 的\"查询消息\"值来获取要匹配的文本。这允许像\"扫描深度\"设置为 0 这样的配置，因此不会进行常规关键词匹配，但条目仍然可以通过向量激活。","\"向量化\"状态只是一个额外的标记。如果设置了关键词，条目仍然会像正常的、启用的、非常量记录一样，通过关键词激活。如果您希望它们只通过向量激活，请删除关键词。","由于检索质量完全取决于嵌入模型的输出，无法准确预测会插入哪些条目。如果您想要确定性和可预测的结果，请坚持使用关键词匹配。"]},{"l":"定时效果","p":["通常，World Info 评估是无状态的，这意味着评估的结果是相同的，只取决于当前的聊天上下文。但是，通过引入定时效果，您可以创建具有激活延迟、在触发后保持活动或在激活后无法触发的条目。"]},{"l":"定时效果规则","p":["效果的时间框架以消息为单位测量（不是消息对/交换），0 表示没有效果。","效果仅适用于激活条目的聊天。分支继承父聊天的状态。","如果聊天没有前进，例如如果最后一条消息被滑动或删除，则会删除活动的定时效果。","对当前处于定时效果的条目进行任何更改都会导致效果被强制删除。","如果效果已经处于活动状态，后续触发关键词不会刷新效果持续时间。"]},{"l":"定时效果类型","p":["粘性 - 条目在激活后保持活动 N 条消息。粘性条目在到期之前的后续扫描中忽略概率检查。","冷却 - 条目在激活后的 N 条消息内无法激活。可以与粘性一起使用：当粘性持续时间结束时，条目进入冷却。","延迟 - 除非在评估时聊天中至少有 N 条消息，否则条目无法激活。","延迟 = 0 -> 条目可以在任何时候激活。","延迟 = 1 -> 条目不能在聊天为空时激活（无问候语）。","延迟 = 2 -> 条目不能在聊天中有零条或只有一条消息时激活，以此类推。"]},{"l":"定时效果示例","p":["条目配置：粘性 = 3，冷却 = 2，延迟 = 2。"]},{"l":"激活设置","p":["位于 World Info 屏幕顶部的可折叠菜单。"]},{"l":"扫描深度","p":["可以在条目级别上覆盖。","定义应该扫描聊天历史中的多少条消息以查找 World Info 关键词。","如果设置为 0，则只评估递归条目和作者注释。","如果设置为 1，则 SillyTavern 只扫描最后一条消息。","2 = 最后两条消息，以此类推。"]},{"l":"包含名称","p":["定义聊天参与者的名称是否应该作为消息前缀包含在扫描的文本缓冲区中。这允许激活使用名称作为关键词的条目，而无需在消息中直接提到名称。","假设聊天参与者名为 Alice 和 Bob，请参见下面要扫描的文本示例。","启用（默认）：","禁用："]},{"i":"上下文---预算","l":"上下文 % / 预算","p":["定义 World Info 条目一次可以使用多少 token。 您可以相对于 API 的最大上下文设置定义阈值（上下文 %）或定义一个客观的 token 阈值（预算）。","如果预算用尽，即使提示词中存在关键词，也不会激活更多条目。","常量条目将首先插入。然后是具有更高顺序号的条目。","通过直接提到关键词插入的条目比那些在其他条目内容中提到的条目具有更高的优先级。"]},{"l":"最小激活数","p":["此设置与最大递归步骤互斥。","最小激活数：如果设置为非零值，这将忽略\"扫描深度\"的限制，从最新消息向后搜索整个聊天记录中的关键词，直到触发了指定数量的条目。这仍然会受到最大深度设置或总预算上限的限制。","由最小激活数触发的额外扫描不会检查在前面步骤中由递归添加的条目。只有聊天消息和扩展提示词可以触发这些额外激活。但是，由最小激活数激活的条目可以像往常一样触发其他条目。"]},{"l":"最大深度","p":["使用最小激活数设置时要扫描的最大深度。"]},{"l":"递归扫描","p":["递归扫描允许条目激活其他条目或被其他条目激活，从而实现不同 World Info 条目之间的复杂交互和依赖关系。此功能可以显著增强您创意场景的动态性。 是否启用递归扫描可以通过全局设置 递归扫描 来控制。 每个条目有三个选项可以控制递归：","不可递归：选中此复选框时，该条目不会被其他条目激活。这对于不应改变或不受其他世界信息条目影响的静态信息很有用。","防止进一步递归：选择此选项可确保一旦此条目被激活，它将不会触发任何其他条目。这有助于避免意外的激活链。","延迟直到递归：此条目将仅在递归检查期间激活，这意味着它不会在初始传递中触发，但可以被启用了递归的其他条目激活。现在，通过为这些延迟添加的 递归级别，条目按级别分组。最初，只有第一级（最小数字）会匹配。一旦找不到匹配项，下一级就有资格匹配，重复此过程直到检查完所有级别。这允许更好地控制在递归过程中如何以及何时揭示更深层的信息，特别是在与 NOT ANY 或 NOT ALL 关键词匹配组合等条件结合使用时。","条目可以通过在内容文本中提到其他条目的关键词来激活它们。","例如，如果您的 World Info 包含两个条目：","如果消息文本仅提到 Bessie， 两个 条目都会被拉入上下文中。"]},{"l":"最大递归步骤","p":["此设置与最小激活数互斥。","当设置为零时，递归嵌套仅受您的提示词预算限制。当设置为非零值时，将总扫描次数限制为所需的最大\"嵌套级别\"。","示例值：","1 实际上禁用了递归，因为检查在第一步后停止。","2 只能激活一次递归条目。","3 可以触发两次递归..."]},{"l":"区分大小写关键词","p":["可以在条目级别上覆盖。","要被拉入上下文中，条目关键词需要与它们在 World Info 条目中定义的大小写匹配。","当您的关键词是常见词或常见词的一部分时，这很有用。","例如，当此设置激活时，关键词 'rose' 和 'Rose' 将根据输入被区别对待。"]},{"l":"匹配整词","p":["可以在条目级别上覆盖。","只包含一个词的条目关键词只有在搜索文本中出现完整词时才会匹配。默认启用。","例如，如果启用此设置且条目关键词是 \"king\"，则文本 \"long live the king\" 会匹配，但 \"it's not to my liking\" 不会。","重要： 此设置在用于不使用空格分隔词的语言（如日语或中文）时可能会产生不利影响。如果您用这些语言编写条目，建议保持关闭。"]},{"l":"溢出警告","p":["如果激活的 World Info 超过分配的 token 预算，则显示警告。"]}],[{"l":"用户设置","p":["UI 自定义","根据您的偏好更改聊天界面的主题、外观和感觉。","视觉小说模式","像在《心跳文学部》等著名视觉小说游戏中那样，与带有精灵的角色聊天。"]},{"l":"常规设置","p":["这些是影响您整体 SillyTavern 体验的核心设置。"]},{"l":"UI 语言","p":["SillyTavern 的用户界面提供多种语言。语言选择器提供以下选项：","默认：如果可用，使用您的系统语言","英语：无论系统设置如何，都强制使用英语界面","通过下拉菜单提供其他语言","注意：此设置仅影响用户界面文本。对于 AI 对话翻译，请使用 聊天翻译 扩展。"]},{"l":"软件版本","p":["您当前的 SillyTavern 版本显示在右上角。此信息对以下方面至关重要：","故障排除","确保与扩展的兼容性","确定是否有可用更新","要更新 SillyTavern 到最新版本，请参阅 更新 文档。"]},{"l":"账户管理","p":["控制您的 SillyTavern 用户账户，备份您的设置和用户数据，并在 多用户模式 下管理用户角色和权限。"]},{"l":"账户","p":["下载备份：导出所有用户数据的完整备份","个人资料信息","危险区域","在账户对话框中，您可以查看和编辑您的个人资料信息，更改密码，并管理账户设置。","密码状态（锁定/解锁图标表示保护状态）","显示名称（通过铅笔图标编辑）","更改密码：更新您的账户安全凭证","用户头像（也可以使用 角色 更改）","用户角色","设置快照：创建、管理和恢复用户设置备份","账户创建日期","账户操作","账户标识","重置所有：完全清除账户并恢复出厂设置","重置设置：将所有设置恢复为出厂默认值","需谨慎使用的关键账户操作："]},{"l":"管理面板","p":["多账户功能需要在 config.yaml 中将 enableUserAccounts 设置为 true。","选择 管理用户 以查看和管理现有用户账户。"]},{"l":"用户资料","p":["自定义头像管理（上传/删除）","显示名称和标识","角色和状态信息","账户创建日期","密码保护状态"]},{"l":"账户控制","p":["编辑显示名称","启用账户","禁用账户","提升为管理员","降级为普通用户"]},{"l":"管理操作","p":["下载用户数据备份","更改用户密码","删除账户"]},{"l":"新用户","p":["选择 新用户 以创建新用户账户。","显示名称*（例如：\"John Snow\"）","用户标识*（仅限小写字母、数字和破折号）","密码（可选）","密码确认","创建新用户时会自动在 /data/ 目录中生成一个以用户标识为名的子文件夹。"]},{"l":"登出","p":["退出当前会话。"]},{"l":"设置搜索","p":["一个方便的搜索栏，帮助您快速找到特定设置：","输入任何关键词以过滤和突出显示用户设置中的任何位置的设置","搜索设置名称和描述","帮助更高效地导航复杂设置"]},{"l":"UI 主题","p":["根据您的偏好更改聊天界面的外观。","有关 用户设置 中此部分设置的更多信息，请参阅 UI 自定义。"]},{"l":"角色处理","p":["角色列表子标题：选择在 角色 列表中角色名称下显示的其他信息：","角色版本","创建者","导入卡片标签：控制导入角色卡片时如何处理标签：","询问 - 每次导入时显示对话框","无 - 不导入任何标签","全部 - 导入所有标签","现有 - 仅导入已存在的标签","高级角色搜索：启用时，使用模糊匹配并搜索所有角色数据字段，而不仅仅是名称。","优先使用角色提示词：如果启用，在可用时使用角色卡片的系统提示词覆盖。","优先使用角色指令：如果启用，在可用时使用角色卡片的历史后指令覆盖。","永不调整头像大小：防止裁剪/调整导入的角色图像大小。禁用时，图像会调整为 512x768。","显示头像文件名：在角色列表中显示角色头像的实际文件名。","防剧透模式：在编辑器面板中将角色定义隐藏在剧透按钮后面。"]},{"l":"杂项","p":["重新加载聊天：重新加载并重绘当前聊天。","调试菜单：访问调试选项。","平滑流式传输：实验性功能，用于更平滑的文本生成。包括速度控制滑块。","消息声音：在消息生成完成时播放声音。","仅背景声音：仅在浏览器标签未聚焦时播放声音。","宽松 API URL：减少 API URL 的格式要求。","知识库导入对话框：导入带有嵌入知识的角色时显示世界信息/知识库导入对话框。","自动选择输入文本：点击某些输入字段时自动选择文本。","Markdown 快捷键：启用 markdown 格式化的键盘快捷键。","恢复用户输入：在页面刷新时保留未保存的用户输入。","可移动 UI：允许通过拖动重新定位 UI 元素（仅限 PC）。","重置 按钮以恢复默认位置","用于保存/加载 UI 布局的预设系统"]},{"i":"聊天消息处理","l":"聊天/消息处理"},{"l":"消息显示设置","p":["控制如何在聊天界面中加载和显示消息。这些设置影响整体聊天体验和性能。","加载消息数量：分页前加载的聊天历史消息数量（0 = 全部）","流式传输 FPS：流式文本的更新速度（5-100 FPS）","示例消息行为：","逐步推出","始终包含示例","永不包含示例"]},{"l":"输入和响应控制","p":["决定如何发送消息以及 AI 如何继续其响应的设置。","回车发送：选择禁用、自动（PC）或启用","\"发送\"继续：使用发送按钮继续 AI 响应","快速\"继续\"按钮：显示扩展 AI 最后消息的按钮","快速\"扮演\"按钮：显示单消息角色扮演的按钮","滑动：显示替代 AI 响应的箭头按钮（PC 和移动设备）","手势：启用生成的滑动手势（仅限移动设备）"]},{"l":"自动管理","p":["帮助管理聊天流程和内容的自动化功能。","自动加载最后聊天：启动时自动加载最近的聊天","自动滚动聊天：自动滚动到最新消息","自动保存消息编辑：无需确认即可保存消息编辑","确认删除消息：删除消息前提示","自动修复 Markdown：自动纠正 markdown 格式"]},{"l":"自动滑动","p":["根据可配置的标准自动拒绝和重新生成 AI 消息。","启用自动滑动：自动滑动功能的主开关","最小生成消息长度：如果消息短于此值则触发自动滑动","黑名单词：可触发自动滑动的词列表，用逗号分隔","触发滑动的黑名单词数：必须检测到的最小黑名单词数以触发自动滑动"]},{"l":"自动继续","p":["如果模型在达到特定长度之前停止，则自动继续响应。","这让您的 AI 可以分多个部分写长响应，因此您可以使用较短的 响应长度设置 同时仍获得长回复。","它不会让 AI 写出超出其原本会写的内容。要求 AI 继续一个它认为\"已完成\"的消息通常不会奏效。有关其他想法，请参阅 如何让 AI 写更多？。","启用自动继续：自动继续功能的主开关","允许聊天完成 API：为聊天完成 API 端点启用自动继续功能","目标长度（tokens）：所需的消息长度（以 tokens 为单位）- 如果消息短于此值将触发继续（0-1024）"]},{"l":"消息格式和显示","p":["控制如何格式化消息以及显示什么内容。","禁止外部媒体：阻止来自外部域的嵌入媒体","在响应中显示 {{char}}:：如果生成则保留响应中的角色名称前缀","在响应中显示 {{user}}:：如果生成则保留响应中的用户名称前缀","在响应中显示标签：允许在响应中将（某些）HTML 标签显示为 HTML","在群组中放宽消息修剪：允许 AI 在群组聊天中为其他角色发言，而不是停止响应生成","显示群组聊天队列：在群组聊天的角色列表中显示响应顺序"]},{"l":"提示词检查和调试","p":["将提示词记录到控制台：将提示词输出到浏览器控制台","请求 token 概率：从 API 请求 AI 响应的 token 概率。在可用的情况下，这些可以在 Token 概率 中查看。"]},{"l":"自动完成","p":["自动隐藏详情","匹配样式（开头匹配/包含/模糊）","视觉样式（主题/深色/浅色）","键盘选择选项","字体缩放","宽度控制"]},{"l":"STscript 设置","p":["STscript 解析器 的配置选项。"]},{"l":"STRICT_ESCAPING","p":["Pipes don't need to be escaped in quoted values.","A backslash in front of a symbol can be escaped to provide the literal backslash followed by the functional symbol.","See Strict Escaping for more information."]},{"l":"REPLACE_GETVAR","p":["Helps to avoid double-substitutions when the variable values contain text that could be interpreted as macros.","See Replace Variable Macros for more information."]},{"l":"Debug menu","p":["Do not use them unless you fully understand their consequences.","The Debug Menu provides functionality for troubleshooting, maintenance, and development purposes. These functions should be used with caution as they can significantly impact your SillyTavern installation.","Because extensions can add debug functions, the available options will vary depending on the extensions you have installed."]},{"i":"translation--locale-functions","l":"Translation & Locale Functions","p":["Get missing translations: Analyzes the current locale (or all locales if English is selected) for missing translations and outputs results to browser console","Apply locale: Forces a refresh of the current language settings by reapplying the selected locale"]},{"i":"cache--storage-management","l":"Cache & Storage Management","p":["Clear WebSearch cache: Removes all stored search results from local cache","Purge all vector indices: Completely removes all stored vectors across all sources","Reset token cache: Clears stored token counts, forcing complete re-tokenization of all chats","Delete itemized prompts: Removes all itemized prompts from local storage"]},{"i":"data--statistics","l":"Data & Statistics","p":["Refresh Stat File: Rebuilds the statistics file using existing chat data","Backfill token counters: Recalculates token counts for all messages in current chat","Useful when switching between models with different tokenizers","Triggers chat reload after completion","Visual changes only, does not modify chat content"]},{"i":"api--extension-testing","l":"API & Extension Testing","p":["Change Mancer base URL: Modify the base URL for Mancer API server","Test WebSearch extension: Performs a test search using current settings","Send a generation request: Tests text generation using the currently selected API"]},{"i":"system--debug-tools","l":"System & Debug Tools","p":["Force onboarding: Restarts the onboarding process","Toggle event tracing: Enables/disables event tracking for debugging","Copy ST setup: [Work in Progress] Copies system configuration data to clipboard for bug reports","Each function can be executed using the \"Execute\" button beneath its description. Consider backing up your data before using these tools, as some operations cannot be undone."]}],[{"l":"UI 自定义"},{"l":"UI 主题"},{"l":"主题管理","p":["主题文件允许您保存、共享和重复使用您的 UI 自定义设置。您可以维护多个主题以适应不同的心情或用途，并在它们之间即时切换。","导入/导出主题文件","删除现有主题","保存对当前主题的更改","另存为新主题","本节中的所有设置都保存到当前主题。如果您切换主题，这些设置将被新主题的设置替换。"]},{"l":"显示设置","p":["这些显示选项影响角色和消息在聊天界面中的呈现方式。"]},{"l":"头像样式","p":["在圆形、方形或矩形之间选择。"]},{"l":"聊天样式","p":["样式","描述","斜杠命令","平面","干净连续的\"聊天日志\"样式，一个让您的 AI 互动栩栩如生的平面画布。","/flat/default","气泡","\"即时通讯\"样式，每条消息都有独特的气泡，令人愉悦的圆角和微妙的 3D 效果。","/bubble/bubbles","文档","紧凑的文档式外观，带有点击编辑模式和以文本为中心的布局。隐藏过去消息的头像、时间戳和消息控制按钮。","/single/story"]},{"l":"主题颜色","p":["自定义每个 UI 元素的配色方案，创建您完美的主题。可以使用颜色选择器选择颜色，并在适用的情况下包括透明度选项。","主要文本","斜体文本","下划线文本","引用文本","文本阴影","聊天背景","UI 背景","UI 边框","用户消息","AI 消息"]},{"l":"布局和视觉设置","p":["使用这些滑块微调界面的视觉呈现。","聊天宽度：调整聊天窗口宽度（屏幕的 25-100%）","字体缩放：自定义文本大小（0.5-1.5 倍）","模糊强度：控制 UI 面板模糊度（0-30）","阴影宽度：调整文本阴影强度（0-5）"]},{"l":"主题开关","p":["减少动画：禁用动画和过渡效果","头像悬停放大：悬停时的头像缩放效果","展开消息操作：始终显示完整的消息上下文菜单","所有消息显示滑动编号：在所有消息上显示滑动编号（移动设备）","无文本阴影：禁用文本阴影效果","无模糊效果：移除背景模糊以提高性能","标签作为文件夹：使用标签作为文件夹组织角色","模型图标：显示消息的 AI 模型图标","消息 ID：显示顺序消息编号","消息 Token 计数：显示每条消息的 token 数","消息计时器：显示 AI 回应生成时间","疯狂实验室模式：无限制的参数范围","视觉小说模式：带背景精灵的紧凑聊天","禅意滑块：简化的参数控制","紧凑输入区域：单行输入（仅限移动设备）","聊天时间戳：显示消息时间戳","角色快速切换：收藏角色的快速选择按钮","这些开关控制各种 UI 功能和行为。一些选项可以提高低端设备的性能，而其他选项则为聊天界面添加有用的信息或功能。","隐藏聊天头像：从聊天中移除头像"]},{"l":"自定义 CSS","p":["允许您应用自定义 CSS 样式以进一步自定义聊天界面的外观。","使用 展开 来扩展编辑器窗口以获得更好的可见性和编辑体验。","如果您切换主题，您的自定义 CSS 将被新主题的自定义 CSS 替换。如果您想在切换主题时保留您的自定义 CSS，请确保将其保存到主题中。","如果您使用大量自定义 CSS，或想在多个主题中使用相同的自定义 CSS，非官方的 CSS Snippets 扩展 可以帮助您管理和组织您的自定义 CSS。"]},{"l":"消息声音","p":["要在收到机器人的新消息时播放您自己的自定义声音，请替换 SillyTavern 文件夹中的以下 MP3 文件：","public/sounds/message.mp3","以 80% 音量播放。","如果启用了\" 仅背景声音\"选项，则仅在 SillyTavern 窗口 未聚焦 时播放声音。","有关更多信息，请参阅 杂项。"]},{"l":"公式渲染","p":["要启用数学公式渲染，请使用 LaTeX 扩展。要获取该扩展，您需要通过 SillyTavern 中的\"下载扩展和资源\"菜单安装它。","在代码块中使用 latex 或 asciimath 语言标识符分别输入 LaTeX 和 AsciiMath 公式。该扩展使用 KaTeX 进行渲染。","不再支持传统的 $ 和 $$ 包装语法。请使用以下正则表达式脚本来兼容旧语法：","$$ - LaTeX","$ - AsciiMath"]}],[{"i":"视觉小说vn模式","l":"视觉小说（VN）模式","p":["视觉小说模式是 SillyTavern 中的一种特殊屏幕布局，允许您与带有精灵图（或其角色卡片图像）的角色聊天，类似于《心跳文学部》、《灰色的果实》、《Fate: Stay/night》等著名视觉小说游戏的风格。"]},{"l":"切换视觉小说模式"},{"l":"启用视觉小说模式","p":["视觉小说模式是 SillyTavern 的内置功能，可以通过进入 用户设置（用户设置图标）并在 无文本阴影 下方勾选 视觉小说模式 来切换。","用户设置"]},{"l":"禁用视觉小说模式","p":["禁用视觉小说模式的步骤与启用相同。取消勾选视觉小说模式，您就会回到正常的聊天界面。","某些扩展（如 Prome VN 扩展）在使用其各自的 VN 模式时会自动开启\"视觉小说模式\"。从 用户设置 菜单启用/禁用 VN 模式也会影响这些扩展。"]},{"l":"视觉小说界面","p":["VN 显示","在视觉小说模式下，界面略有改变以适应显示在中央的角色精灵图（或角色卡片图像）。然而，在多角色群聊中，角色精灵图会相互分散开来，如下图所示。","群组 VN 显示"]},{"l":"带有 MovingUI 的 VN 模式","p":["要切换 MovingUI，请进入 用户设置 并勾选 MovingUI。请注意，此功能 仅 适用于桌面设备。","如果在 用户设置 中启用了 MovingUI，您可以移动精灵图（或角色卡片图像）到屏幕上的特定位置。","如果您的角色精灵图相对较大，使用 MovingUI 移动某些精灵图可能会比较困难，因为拖动精灵图的按钮可能被现有精灵图覆盖。您可能需要多次移动它们，特别是当屏幕上有更多角色时，以获得更好的布局。","群组 VN 显示（MovingUI）"]},{"l":"获取角色精灵图","p":["获取角色精灵图可以通过浏览网络寻找现有精灵图，比如来自视觉小说或使用视觉小说功能的游戏（如 DDLC 或 CounterSide）中的现有角色。如果您想要的角色还没有精灵图，您还有以下几个选择：","在角色帖子中搜索精灵图 ZIP 包或精灵图包链接。","一些机器人创建者可能会在发布机器人时附带精灵图包（可能在同一帖子中或在精灵图频道中）。搜索这些帖子，看看是否有人已经制作了您想要的角色的精灵图。","使用 LoRAs 和 Stable Diffusion 创建自己的精灵图。","从头开始生成精灵图非常耗时（特别是如果您的角色没有现成的 LoRAs 和/或您想使用的 Stable Diffusion 模型），并且需要decent的硬件配置，如果您计划制作 28 个表情精灵图而不是 6 个，以及如果您使用 SDXL 和/或将精灵图提升到更高分辨率，这一点尤为重要。","使用角色卡片图像。虽然它可能不像精灵图，但至少您有东西可以在屏幕上看。但是，VN 模式下不能使用多个角色卡片。","在 Prome 视觉小说扩展 1.0.6+ 版本中，有一个名为 将角色卡片模拟为精灵图 的功能，允许您通过将角色卡片用作聊天中的精灵图来进行同时包含精灵图和非精灵图角色的群组聊天。","角色卡片群组聊天"]},{"l":"VN 扩展"},{"l":"Prome 视觉小说扩展","p":["Prome 视觉小说扩展是由 Bronya Rand 和 Prometheus 开发的认可第三方扩展，它进一步增强了 SillyTavern 中的视觉小说体验，具有诸如信箱模式（使视觉小说界面更\"电影化\"）、带有角色精灵图变暗的焦点模式、传统 VN 模式（聊天中只显示最后一条消息）等功能，并计划添加更多功能！","信箱模式","传统 VN 模式","水平信箱模式","隐藏对话框","焦点模式（带精灵图变暗）","对话框隐藏","带精灵图变暗的焦点模式","要安装 Prome 视觉小说扩展，您可以通过进入 下载扩展和资源 并找到 Prome 视觉小说扩展 来安装，或按照 Prome 视觉小说扩展 Github 页面上的安装说明进行操作。调整 Prome 的设置可以在 扩展-> ** Prome（视觉小说扩展）** 中找到，或通过 \uD83E\uDE84（魔杖）菜单访问。"]}],[{"l":"个性"},{"i":"什么是个性persona","l":"什么是个性（persona）？","p":["在 SillyTavern 中，个性代表用户名称和头像的组合，为您在聊天中扮演的角色或您自己的身份创建一个独特的标识。","创建用户个性是可选的，但这是自动化常规操作的好方法。"]},{"i":"如何创建个性","l":"如何创建个性？","p":["创建个性的步骤：","在顶部栏中打开个性管理面板（笑脸图标）。","选择一个现有头像，或使用虚拟图像创建一个空白个性（\"创建\"按钮）。","在列表中找到个性并选择最左边的上下文操作按钮（\"为该头像绑定名称\"）。","在弹出窗口中输入所需的名称。点击\"确定\"按钮确认。","该头像现在代表一个个性。点击头像选择它，这也会自动更新用户名。"]},{"l":"个性描述","p":["此字段的内容代表您想要绑定到所选个性的任何特定信息。 它可以是您的用户角色的任何类型的描述：心理和身体特征、年龄、职业等。 在这里您也可以使用替换宏，如 {{user}}、{{char}} 和其他支持的参数。","如果定义了个性描述，它将被插入到 AI 提示词中的以下位置之一：","在提示词管理器（Chat Completion API）或故事字符串（其他 API）中。这是默认位置。","作者注释的顶部（如果作者注释未禁用）。","作者注释的底部（如果作者注释未禁用）。","但是，请记住，当您在未绑定的头像上设置了用户描述时，选择个性将不会保留您的更改。","要永久保存用户描述，请将当前选择的头像绑定到用户名。"]},{"l":"个性锁定","p":["一个选定的个性可以锁定到当前打开的个人或群组聊天。 如果当前选择的个性与锁定的个性不同，当您打开该聊天时，它将自动被选择。"]},{"l":"锁定个性的方法","p":["打开聊天（群组或个人）。","通过点击头像选择所需的个性。","点击名称输入框旁边按钮行中的锁定图标。","要撤销此操作，点击解锁图标。然后当重新打开聊天时，个性不会自动更改。","或者，您可以使用 /lock 和 /unlock 斜杠命令来达到相同的效果。"]},{"l":"默认个性","p":["您可以选择一个个性作为您的首选默认身份，它会自动为所有新聊天和未锁定个性的聊天选择该个性。 默认个性在个性管理面板上用黄色轮廓表示。","要将个性设置为默认，点击个性块中的\"皇冠\"按钮，然后确认您的操作。","要撤销此操作并取消设置默认个性，再次点击\"皇冠\"按钮。"]},{"l":"专业提示","p":["在聊天中切换用户个性不会自动更改之前发送的用户消息的归属。这样就可以同时使用多个用户角色。","您可以通过点击个性管理面板上的\"同步\"按钮或使用 /sync 斜杠命令，将当前打开的聊天中的所有用户发送的消息归属到当前选择的个性。","要在不删除个性的情况下更改个性图像，将鼠标悬停在个性管理面板上的头像上，然后点击左下角的按钮。 然后选择一个新图像，它将被替换，同时保留您设置的描述和聊天锁定状态。","要在聊天时快速更改个性而不打开个性管理面板，请使用 /persona 斜杠命令。例如，/persona Blaze。","您可以备份您的个性，并在需要时使用之前保存的文件恢复它们。在个性管理面板中查找\"备份\"和\"恢复\"按钮。"]}],[{"l":"角色","p":["角色是您可以创建和管理的 AI 身份，用于塑造 AI 在对话中的角色。每个角色都有名字、个性和对话历史。您可以创建任意数量的角色，并随时在它们之间切换。","角色可以用于单独聊天，或者添加多个角色到群组聊天中，让它们相互交流。"]},{"l":"角色管理面板","p":["从导航栏打开 角色 面板以访问角色列表。点击一个角色或群组来与其聊天或编辑，或选择 创建新角色 来添加新角色。"]},{"l":"面板控制","p":["固定面板：在交互时保持面板打开","角色列表：返回角色列表视图","快速切换栏：快速访问收藏的角色"]},{"l":"角色列表","p":["创建新角色：添加新角色","导入角色：从文件加载角色","外部导入：从 URL 导入","创建群组：开始新的群组聊天"]},{"l":"搜索和排序","p":["搜索栏：按名称或属性筛选角色","排序下拉菜单：多种排序选项：","字母顺序（A-Z，Z-A）","时间顺序（最新，最旧）","使用情况（最近，最多/最少聊天）","大小（最多/最少 token）","特殊（收藏，随机）"]},{"l":"按类型或标签筛选角色","p":["收藏筛选：显示收藏的角色","群组筛选：仅显示群组聊天","标签作为文件夹：按标签层级组织","管理标签： 标签配置","标签列表：查看所有可用标签","清除筛选：重置所有筛选器"]},{"i":"角色创建编辑面板","l":"角色创建/编辑面板","p":["头像图片：上传和预览角色头像","Token 数量：角色的 Token 使用量","统计：聊天历史和使用统计","标签管理"]},{"l":"快速操作","p":["收藏切换","高级定义","角色设定","聊天设定：将聊天链接到 世界信息","导出角色","复制","删除"]},{"l":"扩展选项","p":["世界信息链接","卡片设定导入","场景覆盖","个性转换","角色重命名","源链接","替换/更新","标签导入","图库视图"]},{"l":"内容字段","p":["角色描述：简短的角色概述","第一条消息：开始新聊天时的初始问候或提示","替代问候语：定义多个第一条消息，在开始聊天时可以滑动切换"]},{"l":"高级定义面板","p":["点击 高级定义 按钮访问扩展角色设置。"]},{"i":"提示词覆盖聊天补全指令模式","l":"提示词覆盖（聊天补全/指令模式）","p":["主提示词：替换默认的 主/系统提示词，可以使用 {{original}} 占位符包含原始提示词","历史后指令：覆盖默认的 历史后指令"]},{"l":"创建者元数据","p":["关于角色的非提示词信息：","创建者名称/联系方式","角色版本","创建者注释","嵌入的标签列表"]},{"l":"角色个性","p":["个性概述：角色特征的简要概述","场景：对话的背景和情境","角色注释：自定义消息，可选择深度和消息角色（另见 作者注释）","健谈程度（群组聊天）：滑块从 害羞 → 正常 → 健谈","示例消息：角色写作风格的示例"]},{"l":"群组聊天管理","p":["如果这是一个群组聊天，您可以从此面板管理群组成员和设置。","更多详情请参见 群组聊天。"]}],[{"l":"角色设计"},{"l":"角色描述","p":["用于添加 AI 应该知道的角色描述和其他信息。这将始终出现在提示词中，所以所有重要的事实都应该包含在这里。","例如，您可以添加关于行动发生的世界的信息，并描述您正在扮演的角色的特征。","它可以是任何长度（无论是 200 还是 2000 个 token）并以任何风格格式化（自由文本、W++、对话风格等）。"]},{"l":"方法和格式","p":["角色格式化方法是一个复杂的主题，超出了本文档页面的范围。","推荐的经过测试或依赖于 SillyTavern 功能的指南：","Trappu 的 PLists + Ali:Chat 指南： https://wikia.schneedc.com/bot-creation/trappu/creation","AliCat 的 Ali:Chat 指南： https://rentry.co/alichat","kingbri 的简约指南： https://rentry.co/kingbri-chara-guide"]},{"l":"角色 token","p":["简而言之：如果您使用的 AI 模型的上下文 token 限制为 2048，那么您的 1000 token 角色定义会将 AI 的\"记忆\"减半。","为了说明这一点，一个好的 AI 的优质回应很容易达到 200-300 个 token。在这种情况下，AI 只能\"记住\"大约 3 次对话交流的聊天历史。"]},{"i":"为什么我的角色的-token-计数器变红了","l":"为什么我的角色的 token 计数器变红了？","p":["当我们看到您的角色在其定义中的 token 超过了模型定义的上下文长度的一半时，我们会为您突出显示它，因为这可能会降低 AI 提供愉快对话的能力。"]},{"i":"如果我的角色有太多-token-会发生什么","l":"如果我的角色有太多 token 会发生什么？","p":["不用担心 - 它不会破坏任何东西。最坏的情况是，如果角色的永久 token 太多，这仅意味着上下文中留给其他内容的空间会更少（见下文）。","这唯一可能产生的负面影响是 AI 的\"记忆\"会更少，因为它可以处理的聊天历史更少。","这是因为每个 AI 模型都有一次可以处理的上下文量的限制。"]},{"i":"上下文","l":"\"上下文\"？","p":["这是每次您要求 AI 生成回应时发送给它的信息：","角色定义","聊天历史","作者注释","特殊格式字符串","[方括号命令]","SillyTavern 会在发送信息给 AI 模型之前自动计算分配可用上下文 token 的最佳方式。"]},{"i":"什么是角色的永久-token","l":"什么是角色的\"永久 Token\"？","p":["这些内容将始终在每次生成请求时发送给 AI：","角色名称（保持名称简短！在每条角色消息的开头发送）","角色描述框","角色个性框","场景框"]},{"i":"角色定义的哪些部分不是永久的","l":"角色定义的哪些部分不是永久的？","p":["第一条消息框 - 仅在聊天开始时发送一次。","示例消息框 - 仅保留到聊天历史填满上下文（可选择强制保留在上下文中）"]},{"l":"流行 AI 模型的上下文 Token 限制","p":["LLaMA 3 及其微调版本 - 8192","OpenAI GPT-4 - 最高 128k","Anthropic 的 Claude - 200k（Claude 3）或 100k（Claude 2）","NovelAI - 8192（Erato 和 Kayra，Opus 级别；Clio，所有级别），6144（Kayra，Scroll 级别），或 3072（Kayra，Tablet 级别）"]},{"l":"个性概述","p":["简短的个性描述。","示例：","开朗，狡黠，挑逗","阿库娅喜欢什么都不做，也喜欢喝醉"]},{"l":"第一条消息","p":["第一条消息是一个重要的内容，它确切地设定了角色将如何以及以什么风格进行交流。","角色的第一条消息应该很长，这样之后角色回应很短消息的可能性就会更小。","您也可以使用星号 ** 来描述角色的动作。","例如："]},{"l":"对话示例","p":["描述角色如何说话。在每个示例之前，您需要添加 <START> 标签。只有在上下文中有空闲空间时才会插入示例对话块，并且会按块从上下文中推出。<START> 不会出现在提示词中，因为它只是一个标记 - 它将被文本补全 API 的高级格式设置中的\"示例分隔符\"和聊天补全 API 的\"新示例聊天\"实用程序提示词的内容替换。","使用 {{char}} 代替角色名称。","使用 {{user}} 代替用户名称。","示例："]},{"l":"场景","p":["对话的情境和背景。"]},{"l":"收藏角色","p":["将角色标记为收藏，通过选择\"收藏\"排序选项可以在侧边菜单栏中快速筛选。收藏的角色在列表中有金色高亮显示。这也会使角色头像出现在快速切换区域（如果在用户设置中启用）。"]}],[{"i":"宏替换标签","l":"宏（替换标签）","p":["此列表可能不完整或已过时。在任何 SillyTavern 聊天中使用 /help macros 斜杠命令来获取您的实例中可用的宏列表。","宏可以在角色描述、作者注释、世界信息和许多其他地方使用，并在生成回应时替换为相应的值。它们可以用于在提示词中插入动态内容，如用户名称、角色描述或当前时间。宏用双大括号括起来，例如 {{user}}，通常不区分大小写。 请注意，目前不支持宏嵌套。","注意：某些扩展可能还会添加特定于上下文的特殊宏，这些宏只在某些区域有效（即扩展提示词的特殊占位符）。除非该宏不绑定到特定功能，否则这里不会记录这些宏。"]},{"l":"通用宏","p":["{{// (note)}}","{{banned text here}}","{{bias text here}}","{{char_version}}","{{char}} 或 BOT","{{charJailbreak}}","{{charPrompt}}","{{currentSwipeId}}","{{date}}","{{datetimeformat ...}}","{{description}}","{{firstIncludedMessageId}}","{{group}} 或 {{charIfNotGroup}}","{{groupNotMuted}}","{{idle_duration}}","{{input}}","{{isodate}}","{{isotime}}","{{lastCharMessage}}","{{lastGenerationType}}","{{lastMessage}}","{{lastMessageId}}","{{lastSwipeId}}","{{lastUserMessage}}","{{mesExamples}}","{{model}}","{{newline}}","{{noop}}","{{original}}","{{persona}}","{{personality}}","{{pick::(args)}}","{{pipe}}","{{random::arg1::arg2}}","{{random:(args)}}","{{reverse:(content)}}","{{roll:(formula)}}","{{scenario}}","{{time_UTC±X}}","{{time}}","{{timeDiff::(time1)::(time2)}}","{{trim}}","{{user}} 或 USER","{{weekday}}","random 的替代方案，但如果源字符串保持不变，则在当前聊天的后续评估中选择的参数是稳定的。","random 的替代语法，支持其参数中的逗号。","time1 和 time2 之间的时间差。接受时间和日期宏。","上下文中包含的第一条消息的 ID。需要在当前会话中至少运行一次生成。","与 {{group}} 相同但不包括已静音的成员。","为 AI 设置行为偏差，直到下一个用户输入。文本周围需要引号。","仅用于斜杠命令批处理。替换为前一个命令的返回结果。","从列表中返回一个随机项（例如 {{random:1,2,3,4}} 将随机返回 4 个数字中的 1 个）。","使用 D&D 骰子语法生成随机值：XdY+Z（例如 {{roll:d6}} 生成 1-6 的值）。","修剪此宏周围的换行符。","允许留下将被替换为空内容的注释。AI 不可见。","最后一个排队的生成请求的类型。值：normal（正常）、impersonate（扮演）、regenerate（重新生成）、quiet（静默）、swipe（滑动）、continue（继续）。","最后一条聊天消息的 ID。","最后一条聊天消息的文本。","最后一条聊天消息的滑动次数。","动态将引号中的文本添加到 Text Generation WebUI 后端的禁用词序列中。对其他后端无效。需要引号。","反转宏的内容。","可以在提示词覆盖字段中使用，以包含系统设置中的默认提示词。仅适用于聊天补全 API 和指令模式。","宏","当前 ISO 日期（YYYY-MM-DD）。","当前 ISO 时间（24 小时制）。","当前星期几。","当前显示的最后一条消息滑动的基于 1 的 ID。","当前系统日期。","当前系统时间。","当前选择的 API 的文本生成模型名称。 可能不准确！","指定 UTC 偏移（时区）的当前时间，例如对于 UTC+02:00 使用 {{time_UTC+2}}。","指定格式的当前日期/时间（例如 {{datetimeformat DD.MM.YYYY HH:mm}}）。","描述","插入换行符。","插入自上次发送用户消息以来的时间范围的人性化字符串（示例：4 小时，1 天）。","无操作，只是一个空字符串。","用户发送的最后一条聊天消息。","用户名称。","用户的个性描述。","用户输入栏的内容。","群组成员名称的逗号分隔列表，或单人聊天中的角色名称。","角色个性。","角色发送的最后一条聊天消息。","角色名称。","角色场景或聊天场景覆盖（如果已设置）。","角色描述。","角色的主提示词覆盖。","角色的历史后指令提示词覆盖。","角色的对话示例（未更改和未分割）。","角色的版本号。"]},{"l":"指令模式和上下文模板宏","p":["（在高级格式设置中启用）","{{chatStart}}","{{defaultSystemPrompt}}","{{exampleSeparator}}","{{instructAssistantPrefix}}","{{instructAssistantSuffix}}","{{instructFirstAssistantPrefix}}","{{instructFirstUserPrefix}}","{{instructLastAssistantPrefix}}","{{instructLastUserPrefix}}","{{instructStop}}","{{instructSystemInstructionPrefix}}","{{instructSystemPrefix}}","{{instructSystemPrompt}}","{{instructSystemPromptPrefix}}","{{instructSystemPromptSuffix}}","{{instructSystemSuffix}}","{{instructUserFiller}}","{{instructUserPrefix}}","{{instructUserSuffix}}","{{maxPrompt}}","{{systemPrompt}}","上下文模板示例对话分隔符。","上下文模板聊天开始行。","助手最后一个输出序列。","助手消息前缀序列。","助手消息后缀序列。","助手第一个输出序列。","宏","指令停止序列。","指令用户最后一个输入序列。","指令用户第一个输入序列。","指令系统提示词。","描述","提示词的最大 token 数（上下文长度减去回应长度）。","用户填充消息文本。","用户消息前缀序列。","用户消息后缀序列。","系统指令前缀序列。","系统提示词内容，如果允许且可用，包括角色提示词覆盖。","系统提示词内容（不包括角色提示词覆盖）。","系统提示词前缀序列。","系统提示词后缀序列。","系统消息前缀序列。","系统消息后缀序列。"]},{"l":"聊天变量宏","p":["{{addglobalvar::name::value}}","{{addvar::name::increment}}","{{decglobalvar::name}}","{{decvar::name}}","{{getglobalvar::name}}","{{getvar::name}}","{{incglobalvar::name}}","{{incvar::name}}","{{setglobalvar::name::value}}","{{setvar::name::value}}","{{var::name::index}}","{{var::name}}","全局变量 = 在任何角色的任何聊天中都有效","宏","描述","替换为作用域变量\"name\"中索引处的值（用于 STscript 中的数组/对象）。","替换为作用域变量\"name\"的值（仅限 STscript）。","替换为全局变量\"name\"的值。","替换为全局变量\"name\"的值减 1 的结果。","替换为全局变量\"name\"的值加 1 的结果。","替换为变量\"name\"的值减 1 的结果。","替换为变量\"name\"的值加 1 的结果。","替换为本地变量\"name\"的值。","替换为空字符串，将全局变量\"name\"设置为\"value\"。","替换为空字符串，将数值\"increment\"添加到全局变量\"name\"。","替换为空字符串，将数值\"increment\"添加到本地变量\"name\"。","替换为空字符串，将本地变量\"name\"设置为\"value\"。","本地变量 = 仅在当前聊天中唯一"]},{"l":"扩展特定宏","p":["由扩展添加，仅在特定条件下工作。","宏","描述","{{summary}}","替换为当前聊天会话的摘要（如果可用）。"]}],[{"l":"聊天文件管理","p":["本页描述了管理 AI 聊天文件的各种方法。","这些选项中的一些可以在底部左侧选项菜单中的\"管理聊天文件\"对话框中找到。"]},{"l":"单人聊天与群组聊天","p":["使用角色卡片最简单的方式是单人聊天；只需点击他们的卡片并开始聊天。","一旦您有了几个角色卡片，您也可以使用\"创建新聊天群组\"按钮来创建包含多个角色的 群组聊天，这些角色将相互交流并与您互动。"]},{"l":"聊天导入","p":["将 Character.AI 的聊天导入到 SillyTavern。","要导入 Character.AI 的聊天和机器人，请使用 CAI Tools 浏览器扩展： https://github.com/irsat000/CAI-Tools。","其他可以导入聊天的程序和工具包括：","TavernAI（原版）： https://github.com/TavernAI/TavernAI","Text Generation WebUI (oobabooga)： https://github.com/oobabooga/text-generation-webui","Agnai： https://github.com/agnaistic/agnai","KoboldAI Lite： https://github.com/LostRuins/lite.koboldai.net","RisuAI： https://github.com/kwaroran/RisuAI"]},{"l":"导出为 .jsonl","p":["点击\"管理聊天文件\"时，聊天文件列表中的每个条目都有一个按钮，可以将其导出为可以原样重新导入的格式。使用此功能来共享或迁移聊天，包括所有元数据（但不包括图像和文件附件）。","如果您注重隐私，请务必检查导出的 JSONL 文件并删除任何您不想共享的内容。"]},{"l":"导出为 .txt","p":["您也可以使用\"将聊天下载为纯文本文档\"按钮导出简化的纯文本版本。由于失去了重要的元数据，它不能再次导入！"]},{"l":"检查点","p":["\"检查点\"是当前聊天的克隆，它们会复制给定聊天中直到某个点的所有消息，并存储到源的链接（通过聊天文件名）。","从每条聊天消息右侧的三个点按钮，您有两种创建检查点的方式：","\"创建分支\"将克隆当前聊天直到该消息并切换到它","\"创建检查点\"将克隆当前聊天直到该消息，询问名称并创建它，但不会切换到它","您可以将它们大致理解为浏览器中的\"在新标签页中打开链接\"和\"在后台新标签页中打开链接\"。","您可以通过点击消息文本框左侧的汉堡菜单按钮，然后点击\"返回父聊天\"从检查点返回到父聊天。"]},{"l":"重命名聊天","p":["默认情况下，聊天文件会以它们开始的日期和时间命名。","您可以通过点击铅笔图标并输入新名称来更改这个。","请注意，这将破坏检查点到该聊天的链接（因为它们是通过聊天文件名链接的）。"]}],[{"l":"群组聊天"},{"l":"回复顺序策略","p":["决定群组聊天中的角色如何被选择进行回复。"]},{"l":"手动","p":["您可以从菜单中或使用 /trigger 命令手动选择要回复的角色。被选中的群组成员将是唯一回复的角色。用户消息不会自动触发任何回复。在用户输入为空的情况下触发生成将随机选择一个未静音的群组成员进行回复。"]},{"l":"自然顺序","p":["尝试模拟真实人类对话的流程。算法如下：","从聊天中的最后一条消息中提取群组成员名字的提及。","只有完整的词才会被识别为提及！如果您的角色名字是\"御坂美琴\"，他们只会对\"御坂\"或\"美琴\"做出回应，但永远不会对\"御\"、\"炮姐\"等做出回应。","除非启用了\"允许自我回应\"设置，否则角色不会对自己消息中提到的名字做出回应！","角色根据\"健谈程度\"因素被激活。","健谈程度定义了在没有被提及时角色说话的频率。在角色编辑器的\"高级定义\"屏幕中调整此值。滑块值在线性范围内从 0% / 害羞（角色除非被提及否则不说话）到 100% / 健谈（角色总是回复）。新角色的默认值是 50% 几率。","随机选择一个角色。","如果在前面的步骤中没有角色被激活，则随机选择一个发言者，忽略所有其他条件。"]},{"l":"列表顺序","p":["角色根据它们在群组成员列表中的顺序被选择。不适用其他规则。"]},{"l":"群组生成处理模式","p":["此设置决定如何处理群组聊天成员的角色信息。无论选择什么，群组聊天历史始终在所有成员之间共享。"]},{"l":"切换角色卡片","p":["默认模式。每次生成消息时，只有当前发言者的角色卡片信息会包含在上下文中。"]},{"l":"合并角色卡片","p":["所有群组成员的信息按照他们在列表中的顺序合并成一个联合提示词。这在不希望改变大块上下文的情况下很有帮助，例如使用 llama.cpp 提示词缓存时。","此模式有两个子模式（您必须选择其中一个）：","包含静音 - 静音的角色将始终包含在联合提示词中。","排除静音 - 如果静音的角色不是当前发言者，则不会被包含。","以下字段会被合并：","描述","场景（如果没有为聊天覆盖）","个性","示例消息","角色注释 / 深度提示词","重要！ 请注意，由于典型角色卡片的结构方式，使用此模式可能导致意外行为，包括但不限于：角色对自己感到困惑、个性合并、特征不确定等。"]},{"l":"合并前缀和后缀","p":["当选择\"合并角色卡片\"时，角色的所有相应字段都会被合并在一起。这意味着在结果提示词中，所有角色描述将被合并成一大块文本。如果您希望这些字段被分开，您可以定义前缀和/或后缀。","这些选项支持普通宏，并且还会将 {{char}} 替换为相关角色的名字，将 <FIELDNAME> 替换为部分的名称（例如：描述、个性、场景等）。"]},{"l":"其他群组聊天菜单选项"},{"l":"静音角色","p":["群组聊天菜单中角色头像旁边的划掉的对话气泡图标可以禁用或启用特定角色在聊天中的回复。"]},{"l":"强制发言","p":["群组聊天菜单中角色头像旁边的对话气泡图标将只触发特定角色的回复，绕过回复顺序策略。即使群组成员被静音，它也会生效。"]},{"l":"自动模式","p":["当启用自动模式时，群组聊天将遵循回复顺序并在没有用户交互的情况下触发消息生成。当最后一个被选中的角色发送其消息后，下一个自动模式回合将在 5 秒延迟后触发。当用户开始在发送消息文本区域中输入时，自动模式将被禁用，但已经排队的生成不会自动停止。"]},{"l":"允许自我回应","p":["当选择自然顺序时，如果由于在自己的消息中提到自己而被触发，将允许每个回合最后一条消息的角色连续回复。对列表顺序没有影响。"]},{"l":"群组聊天场景覆盖","p":["所有群组成员将使用输入的场景文本，而不是他们角色卡片中指定的内容。分支聊天从其父聊天继承场景覆盖，之后可以单独更改。"]},{"l":"查看角色定义","p":["点击群组聊天菜单中头像旁边的角色卡片图标将快速导航到常规角色定义屏幕。在这里所做的任何更改都将保存到卡片本身。","要返回群组聊天，点击群组名称标题链接。"]},{"l":"成员管理","p":["您可以在群组聊天中添加、删除、静音或重新排序任何现有角色。默认情况下，新成员会被添加到群组成员列表的顶部，然后可以使用箭头图标重新排序。"]},{"l":"群组聊天弹出窗口","p":["通过点击\"当前成员\"字段旁边的图标可以激活群组聊天菜单弹出窗口。这会创建群组聊天菜单的弹出窗口。通过从用户设置启用 MovingUI，此菜单可以调整大小并拖动到界面内的任何位置，功能与常规群组聊天菜单相同。"]}],[{"l":"标签","p":["角色卡片和群组可以分配零个或多个标签。它们对于按主题、质量、来源或任何您喜欢的方式快速组织不断增长的集合非常有用。"]},{"l":"添加标签","p":["有几种方法可以为角色卡片添加或删除标签：","在导入过程中导入嵌入的标签。","从角色管理面板打开卡片。在那里您可以为角色卡片分配标签。","批量添加标签。","要进行批量添加标签，点击\"批量编辑角色\"按钮（铅笔图标），选择您想要添加标签的卡片，右键点击其中任何一个，然后在上下文菜单中点击\"标签\"。","请注意，群组不能进行批量添加标签。","在此界面中，您可以：","使用组合框添加或删除标签。","从选定的卡片中删除所有标签（\"全部\"）。","从这些卡片中删除所有选定卡片共有的标签（\"共同\"）。","导入（在本地创建）存储在角色卡片中的所有标签，以防您导入了它（\"导入全部\"）。","导入（在本地创建）存储在角色卡片中且在本地存在具有匹配名称的标签（\"导入现有\"）。"]},{"l":"管理","p":["要查看和管理所有现有标签，打开角色管理面板，然后点击\"管理标签\"按钮（齿轮图标）。","您可以使用右上角的按钮备份和恢复此处的所有信息（标签列表、卡片的标签分配、颜色、文件夹设置等）。","您可以使用左侧的抓取按钮重新排序标签，它们将按此顺序显示在角色管理中的标签筛选器中。","标签备份 JSON 文件不适合与他人共享，因为它包含仅特定于您的实例的信息，如内部实体名称！"]},{"l":"导入角色卡片时导入标签","p":["当从下载的图像（或通过\"从外部 URL 导入内容\"按钮）导入外部角色卡片时，系统会提示您选择性地导入其中包含的标签。标签对于卡片的功能不是必需的；标签仅用于组织。","嵌入的卡片标签存储在角色编辑器的\"高级定义\"菜单的\"创建者元数据\"部分中。如果您希望向导入该角色的其他用户建议一些标签，请在\"要嵌入的标签\"字段中填写以逗号分隔的标签列表。","此弹出窗口仅在用户设置选项\"导入卡片标签\"设置为\"询问\"时才会出现。","在打开的\"导入角色名称的标签\"弹出窗口中，您会看到现有标签（您已经在本地有匹配名称的标签）和新标签（您在本地没有的标签）的列表。","您可以：","根据需要修剪列表，然后点击\"导入\" - 剩余的现有标签将被添加到导入的角色卡片中，剩余的新标签将在本地创建然后添加到卡片中。","或者直接点击\"不导入\"以忽略角色卡片中包含的标签，仅导入卡片。","或者点击\"导入全部\"作为导入角色卡片中找到的所有标签的快捷方式（注意：包括您从上述列表中修剪的任何标签；如果您修剪了标签，请使用\"导入\"按钮）。","或者点击\"导入现有\"作为仅导入在本地存在具有匹配名称的标签的快捷方式。"]},{"l":"筛选角色卡片","p":["创建标签后，您会在角色管理面板的一行中看到它们。您可以点击这些标签来切换标签筛选状态；顺序如下：","点击一次将显示带有此标签的卡片。","再次点击将只显示没有此标签的卡片。","再次点击以重置此标签的筛选。","您可以同时按任意数量的标签进行筛选。"]},{"l":"标签作为文件夹","p":["要使用此功能，必须首先在用户设置的 UI 主题列下启用它。此切换的状态也会随 UI 主题保存。","在\"管理标签\"按钮（齿轮图标）中，每个标签条目都有一个多状态切换按钮，可以在这些标签作为文件夹模式之间循环（在代码中称为\"虚拟文件夹\"）：","点击一次将此标签转换为\"打开的文件夹\"。它将作为虚拟条目出现在卡片列表中；点击进入它将只显示带有该标签的卡片","再次点击将此标签转换为\"关闭的文件夹\"。如上所述，但默认情况下不会显示带有此标签的卡片 - 您需要点击进入文件夹才能看到它们。","再次点击以重置此标签的标签作为文件夹状态。"]}],[{"l":"作者注释"},{"i":"这是什么","l":"这是什么？","p":["作者注释是一个强大的工具，用于自定义 AI 回应，它可以在您想要的任何位置和频率将一段文本插入到提示词中。"]},{"l":"使用方法","p":["作者注释可以在聊天输入栏左侧的选项菜单中找到。","选项菜单","作者注释面板"]},{"l":"配置作者注释"},{"l":"特定聊天的作者注释","p":["作者注释面板顶部的框包含当前聊天的作者注释。","此框的内容不会自动转移到任何新的聊天中。"]},{"l":"放置选项"},{"l":"场景之后","p":["这会将作者注释放在靠近上下文顶部的位置，位于角色定义的\"场景\"部分之后。如果没有指定场景，它将被放在角色定义的最后部分之后，示例消息之前。"]},{"l":"聊天中","p":["这会将作者注释放在指定深度的聊天历史中。","深度 0 = 放在聊天历史的最末端。","深度 4 = 放在最近 3 条聊天历史消息之前，使其成为聊天历史中的第 4 个实体。","作者注释越接近提示词底部，对下一个 AI 回应的影响就越大。"]},{"l":"插入频率","p":["这是您希望作者注释被包含在聊天中的频率。","频率 0 = 作者注释永远不会被插入。","频率 1 = 作者注释将在每个用户输入提示词中插入。","频率 4 = 作者注释将在每第 4 个用户输入提示词中插入。"]},{"l":"默认作者注释","p":["面板底部的框包含默认作者注释，它将应用于每个新的聊天。"]},{"l":"常见用例"},{"l":"提醒 AI 回应格式","p":["作者注释可用于指定 AI 应如何写其回应。","[您的下一个回应必须是 300 个 token 长度。]","[用爱伦·坡的风格写下一个回复]","[使用 markdown 斜体表示未说出的动作，使用引号表示说出的话。]"]},{"l":"强化指令","p":["[记住您在这次聊天开始时收到的指令。]"]},{"i":"作为临时世界信息角色倾向或非指令模型的指令","l":"作为临时世界信息、角色倾向或非指令模型的指令","p":["[{{char}} 在图书馆里]","[{{user}} 腿上有一处新伤，所以无法逃跑。]","[{{char}} 无法说话，必须使用手势交流。]"]}],[{"i":"数据库rag","l":"数据库（RAG）","p":["检索增强生成（RAG）是一种为 LLM 提供外部知识来源的技术。它通过访问模型训练数据之外的信息来帮助提高 AI 回答的准确性。","SillyTavern 提供了一套工具，用于从多种来源构建多用途知识库，以及在 LLM 提示词中使用收集的数据。"]},{"l":"访问数据库","p":["内置的聊天附件扩展（在 1.12.0 及更高版本中默认包含）在\"魔法棒\"菜单中添加了一个新选项 - 数据库。这是您管理 SillyTavern 中用于 RAG 的文档的中心。"]},{"l":"关于文档","p":["数据库存储文件附件，也称为文档。文档分为三个可用范围。","全局附件 - 在每个聊天中都可用，无论是单人还是群组。","角色附件 - 仅对当前选择的角色可用，包括他们在群组中回复时。 附件保存在本地，不会随角色卡片导出！","聊天附件 - 仅在当前打开的聊天中可用。聊天中的每个角色都可以从中获取信息。","虽然不是数据库的正式组成部分，但您甚至可以将文件附加到单个消息。使用\"魔法棒\"菜单中的附加文件选项，或消息操作行中的回形针图标。","什么可以成为文档？实际上任何可以用纯文本形式表示的内容！","示例包括但不限于：","本地文件（书籍、科学论文等）","网页（维基百科、文章、新闻）","视频转录","各种扩展和插件也可以提供新的方式来收集和处理数据，下面会详细介绍。"]},{"l":"数据来源","p":["要将文档添加到任何范围，点击\"添加\"并选择一个可用的来源。"]},{"l":"记事本","p":["从头创建文本文件，或编辑现有附件。"]},{"l":"文件","p":["从您的计算机硬盘上传文件。SillyTavern 为常见文件格式提供内置转换器：","PDF（仅文本）","HTML","Markdown","ePUB","TXT","您也可以附加任何带有非标准扩展名的文本文件，如 JSON、YAML、源代码等。如果所选文件类型没有已知的转换方式，并且文件无法解析为纯文本文档，文件上传将被拒绝，这意味着不允许原始二进制文件。","导入 Microsoft Office（DOCX、PPTX、XLSX）和 LibreOffice 文档（ODT、ODP、ODS）需要安装并加载 服务器插件。有关安装说明，请参阅插件的 README 页面。"]},{"l":"网页","p":["通过 URL 从网页抓取文本。然后通过 Readability 库处理 HTML 文档以提取可用文本。","某些 Web 服务器可能会拒绝获取请求，受 Cloudflare 保护，或严重依赖 JavaScript 来运行。如果您遇到任何特定网站的问题，请通过网络浏览器手动下载页面并使用文件上传器附加它。"]},{"l":"YouTube","p":["通过 ID 或 URL 下载 YouTube 视频的转录文本，可以是创作者上传的或由 Google 自动生成的。某些视频可能已禁用转录，同时由于需要登录，无法解析年龄限制视频。","脚本以视频的默认语言加载。您也可以选择指定两个字母的语言代码，尝试获取特定语言的转录。此功能并非总是可用，可能会失败，因此请谨慎使用。"]},{"l":"网页搜索","p":["此来源需要安装并正确配置 网页搜索 扩展。有关详细信息，请参阅链接页面。","执行网页搜索并从搜索结果页面下载文本。这类似于网页来源但完全自动化。将从扩展设置中继承所选搜索引擎，因此请提前设置。","首先，指定搜索查询、要访问的最大链接数，以及输出类型：一个组合文件（根据扩展规则格式化）或每个页面一个单独的文件。您也可以选择保存页面摘要。"]},{"l":"Fandom","p":["此来源需要安装并加载 服务器插件。有关安装说明，请参阅插件的 README 页面。","通过 ID 或 URL 从 Fandom wiki 抓取文章。由于某些 wiki 非常大，使用过滤正则表达式限制范围可能会有帮助，它将针对文章标题进行测试。如果没有提供过滤器，则所有页面都将被导出。您可以将它们保存为每个页面的单独文件，或合并为一个文档。"]},{"i":"bronie-解析器扩展第三方","l":"Bronie 解析器扩展（第三方）","p":["此来源来自第三方，与 SillyTavern 团队 无关。此来源需要您安装 Bronya Rand 的 Bronie 解析器扩展 以及需要解析器工作的服务器插件。","Bronya Rand 的 Bronie 解析器扩展允许使用第三方抓取器，如米哈游/HoYoverse 的 HoYoLab 到 SillyTavern，类似于其他数据来源。","目前，Bronya Rand 的 Bronie 解析器扩展支持以下内容：","米哈游/HoYoverse 的 HoYoLab（用于原神/崩坏：星穹铁道）通过 HoYoWiki-Scraper-TS","首先，按照其 安装指南 安装 Bronya Rand 的 Bronie 解析器扩展，并在 SillyTavern 中安装支持的服务器插件。重启 SillyTavern 并进入_数据库_菜单。点击+ 添加，您应该会看到您最近安装的抓取器已添加到可能的信息来源列表中。"]},{"l":"向量存储","p":["好的，您已经为您的特定主题建立了一个不错且全面的信息库。接下来呢？","要将文档用于 RAG，您需要使用兼容的扩展，它将相关数据插入到 LLM 提示词中。","向量存储，它与 SillyTavern 捆绑在一起，是这种扩展的参考实现。它使用嵌入（也称为向量）来搜索与您正在进行的聊天相关的文档。","嵌入是抽象表示一段文本的数字数组，由专门的语言模型生成。更相似的文本在它们各自的向量之间有更短的距离。","向量存储扩展使用 Vectra 库来跟踪文件嵌入。它们存储在用户数据目录的 /vectors 文件夹中的 JSON 文件中。每个文档在内部由其自己的索引/集合文件表示。","由于向量功能默认是禁用的，您需要打开扩展面板（顶部栏上的\"堆叠立方体\"图标），然后导航到\"向量存储\"部分，并在\"文件向量化设置\"下勾选\"为文件启用\"复选框。","向量存储本身不生成任何向量，您需要使用兼容的嵌入提供者。"]},{"l":"向量提供者"},{"l":"本地","p":["这些来源是免费且无限制的，使用您的 CPU/GPU 计算嵌入。","本地（Transformers）- 在 Node 服务器上运行。SillyTavern 将自动从 HuggingFace 下载兼容的 ONNX 格式模型。默认模型： jina-embeddings-v2-base-en。","Extras - 使用 SentenceTransformers 加载器在 Extras API 下运行。默认模型： all-mpnet-base-v2。","Ollama - 从 https://ollama.com/ 获取。在 API 连接菜单中设置 API URL（在文本补全下，默认： http://localhost:11434）。必须先下载兼容的模型，然后在扩展设置中设置其名称。示例模型： mxbai-embed-large。可选择勾选选项以将模型保持在内存中。","llama.cpp 服务器 - 从 ggerganov/llama.cpp 获取并使用 --embedding 标志运行服务器可执行文件。从 HuggingFace 加载兼容的 GGUF 嵌入模型，例如 nomic-ai/nomic-embed-text-v1.5-GGUF。","vLLM - 从 vllm-project/vllm 获取。首先在 API 连接菜单中设置 API URL 和 API 密钥。"]},{"l":"API 来源","p":["所有这些来源都需要相应服务的 API 密钥，通常有使用成本，但一般来说计算嵌入的成本相当低。","OpenAI","Cohere","Google MakerSuite","TogetherAI","MistralAI","NomicAI","嵌入只有在使用生成它们的相同模型检索时才可用。更改嵌入模型或来源时，建议清除并重新计算文件向量。"]},{"l":"向量化设置","p":["在选择了嵌入提供者之后，不要忘记配置其他设置，这些设置将定义处理和检索文档的规则。","附件的分割、向量化和信息检索需要一些时间。虽然文件的初始摄取可能需要一段时间，但 RAG 搜索查询通常足够快，不会造成明显的延迟。"]},{"l":"消息附件","p":["这些设置控制直接附加到消息的文件。","适用以下规则：","只有适合 LLM 上下文窗口的消息才能检索其附件。","当向量存储扩展被禁用时，文件附件及其附带的消息将完全插入到提示词中。","当启用文件向量化时，文件将被分割成块，只有最相关的部分会被插入，节省上下文空间并让模型保持专注。","大小阈值（KB）- 设置分块分割阈值。只有大于指定大小的文件才会被分割。","块大小（字符）- 设置单个块的目标大小（以文本字符为单位，而不是模型 token！）。","块重叠（%）- 设置相邻块之间共享的块大小百分比。这允许块之间更平滑的过渡，但也可能引入一些冗余。","检索块数 - 设置要检索的最相关文件块的最大数量。它们将按原始顺序插入。"]},{"l":"数据库文件","p":["这些设置控制数据库文档的处理方式。","适用以下规则：","当文件向量化被禁用时，数据库不会被使用。","否则，当前范围内的所有可用文档（见上文）都会被考虑用于查询。只有所有文件中最相关的块会被检索。同一文件的多个块按原始顺序插入。","插入的块将在适应聊天消息之前保留部分上下文。","大小阈值（KB）- 设置分块分割阈值。只有大于指定大小的文件才会被分割。","块大小（字符）- 设置单个块的目标大小（以文本字符为单位，而不是模型 token！）。","块重叠（%）- 设置相邻块之间共享的块大小百分比。这允许块之间更平滑的过渡，但也可能引入一些冗余。","检索块数 - 设置要检索的文件块的最大数量。这个限额在所有文件之间共享。","注入模板 - 定义如何将检索到的信息插入到提示词中。您可以使用特殊的 {{text}} 宏来指定检索文本的位置，以及任何其他宏。","注入位置 - 设置在哪里插入提示词注入。适用与作者注释和世界信息相同的规则。"]},{"l":"共享设置","p":["查询消息 - 用于查询文档块的最新聊天消息数量。","分数阈值 - 调整以允许根据块的相关性分数（0 - 完全不匹配，1 - 完全匹配）筛选块的检索。较高的值允许更准确的检索并防止完全随机的信息进入上下文。合理的值范围在 0.2（更宽松）到 0.5（更专注）之间。","包含在世界信息扫描中 - 如果您希望注入的内容激活知识库条目，请勾选。","向量化全部 - 强制摄取所有未处理文件的嵌入。","清除向量 - 清除文件嵌入，允许重新计算它们的向量。","有关\"聊天向量化\"设置，请参阅 聊天向量化。"]},{"l":"结论","p":["恭喜！借助 RAG 技术，您的聊天体验已得到显著提升。其潜力无限，全凭您的创意发挥。大胆尝试，勇于探索，让您的聊天体验更上一层楼！"]}],[{"l":"扩展","p":["SillyTavern 自带许多可以在扩展面板中启用或禁用的扩展。扩展可以添加新功能、改变现有功能的行为或为您的 AI 提供额外的内容。您可以从扩展面板中的\"下载扩展和资源\"菜单安装更多扩展。"]},{"l":"扩展面板","p":["要打开或关闭扩展面板，请在顶部栏中选择 Extensions。","管理扩展：激活、停用和更新扩展","下载扩展和资源：从 SillyTavern 仓库安装 更多扩展、角色、声音和背景","扩展更新通知：选中此项以在已安装的扩展有更新时收到通知","安装扩展：从 Git 仓库 URL 导入扩展","使用第三方扩展可能会产生意想不到的副作用并可能带来安全风险。 在通过 Install extension 导入扩展之前，请务必确保您信任来源。 我们对第三方扩展造成的任何损害不承担责任。"]},{"l":"内置扩展","p":["Chat Translation","Chat Vectorization","Expression Images","Image Captioning","Image Generation","Quick Reply","Summarize","Text To Speech","Token Counter","一键回复聊天消息，运行命令和 STscripts 等","从图像生成文本，让您的 AI 能够\"看到\"并回应对话中的视觉内容","从聊天历史中找到相关消息并将其添加到上下文中","使用本地或基于云的 Stable Diffusion、FLUX 或 DALL-E API 生成图像","将文本转换为 token 并计算 token 数量","将聊天消息翻译成不同的语言","您的 AI 角色的图像（又称\"精灵图\"），显示在聊天窗口旁边或后面","聊天历史的自动摘要","这些扩展内置于 SillyTavern 中，无需安装。可以在扩展面板中启用或禁用它们。","通过 ElevenLabs、Silero、您的系统 TTS、 AllTalk、 XTTS 等为您的聊天消息提供语音叙述"]},{"l":"可安装扩展","p":["AccuWeather","Blip","Chat Top Bar","Chess","Code Runner","D&D Dice","Duplicate Finder","Dynamic Audio","Emoji Picker","EmulatorJS","Extras 项目已于 2024 年 4 月停止。您不需要安装 Extras 来使用扩展。","Group Greetings","Group SendAs","HypeBot","Idle","Image Metadata Viewer","LaTeX","Live2d","Mermaid","Notebook","Objective","Parameter Randomizer","Prome Visual Novel Extension","Prompt Inspector","Push Notifications","Quick Persona","RSS","RVC","Screen Share","Silence Player","Speech Recognition","Timelines","Variable Viewer","VRM","Web Search","WebLLM","一套 7 个经典的 D&D 骰子，满足您所有的掷骰需求。","与 LLM 下国际象棋。","为 AI 设置在聊天过程中要达到的目标。","为 SillyTavern 聊天添加 Mermaid 图表和流程图渲染功能。","为您的聊天添加沉浸式背景音乐和环境声音。","为扩展提供直接在浏览器中使用语言模型的接口。","为文本转语音模块添加实时语音克隆功能。","为聊天历史添加时间线导航。","从 扩展 中的\"下载扩展和资源\"菜单安装这些扩展。","以可变速度播放角色消息的文本动画，并伴随声音播放。","使用 AccuWeather API 提供天气信息作为斜杠命令或函数工具。","使用 NovelAI 的 HypeBot 引擎根据您最近的聊天显示个性化建议。需要有效的 NovelAI 订阅。","使用浏览器或 extras 将您的语音转换为文本。","允许从聊天中的代码块运行 JavaScript 和 STscript 代码。","允许接收聊天消息的推送通知。","允许设置特定于群组聊天的替代问候语。","在发送到服务器之前添加检查和编辑输出提示词的选项。","在您发送消息时为多模态模型提供屏幕图像。","在扩展菜单中添加静音音频播放器。可以帮助防止浏览器标签页在后台被关闭。","在用户空闲一段时间后添加\"空闲提示\"以自然地继续对话。","在聊天栏中添加一个用于选择用户个性的下拉菜单。","在聊天消息中渲染 LaTeX 和 AsciiMath 公式。","在聊天窗口顶部添加一个带有快速操作快捷方式的栏。","将网络搜索结果添加到 LLM 提示词中。","查看和修改变量的简单方法。","查看附加到聊天中的放大图像的元数据。","添加一个存储笔记的地方。支持富文本格式。","添加一个按钮，可以快速为选定的群组成员插入 /sendas 命令模板。","添加一个按钮，可以快速在聊天消息中插入表情符号。","添加在每次生成时随机化 API 设置滑块的功能。","添加对 live2d 模型的支持。可自定义表情、动画和互动。","添加对 VRM 模型的支持。可自定义表情、动画和互动。","添加按相似度组对角色进行聚类的功能，以轻松找到重复项。","直接在 SillyTavern 聊天中玩复古游戏机游戏。","通过斜杠命令或函数工具获取 RSS 订阅源的最新新闻。","通过更多功能（焦点模式、信箱模式等）增强当前的视觉小说体验！"]}],[{"l":"Blip","p":["本指南将帮助您为 SillyTavern 设置和自定义 Blip 扩展。该扩展可以以可变速度为消息文本添加动画效果，并在动画播放时播放声音。您可以使用音频文件或生成声音。"]},{"l":"前提条件","p":["在开始之前，请确保满足以下前提条件：","确保您使用的是最新版本的 SillyTavern。","从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"Blip\"扩展。"]},{"l":"Blip 全局设置","p":["Blip user message：","启用复选框以在用户消息上播放动画。","为用户设置配置文件，或如果您想要用户的 blip 动画，则设置默认配置文件。","Blip only for certain text：","启用复选框仅对引号内的文本进行 blip 处理。","启用复选框以忽略星号内的所有内容。","Automatic scroll down：","启用复选框使聊天窗口跟随文本动画向下滚动，如果您想在动画播放期间自由滚动，请禁用此选项。","Audio volume：","如果只需要文本动画效果，可以将音频静音。","您可以调整 blip 音频的全局音量。"]},{"i":"角色动画语音配置文件","l":"角色动画/语音配置文件","p":["Blip 来源：文件：","Blip 来源：生成的声音：","从列表中选择文件。","任何配置文件都可以使用删除按钮删除。","使用最小/最大频率滑块自定义播放的 blip 声音。","包括用户和可选的默认配置文件（当角色没有配置文件时将使用）。","如果最小/最大值不同，每次都会在此范围内播放随机声音。","如果列表中只显示当前聊天的角色，请点击复选框显示所有角色。","如果您的角色未出现在列表中，请使用刷新按钮。","如果还没有配置文件，当前参数将成为他的配置文件设置。","如果需要，启用复选框以强制等待整个文件播放完毕后再次播放。","如果需要，设置音量乘数，这只会影响此语音配置文件。","您可以为每个角色保存配置文件：","您可以从资源扩展菜单获取官方 ST blip 资源。","感谢您阅读本指南！您的 SillyTavern 体验现在已通过文本动画和 blip 语音得到增强。","或直接将文件放入：\\SillyTavern\\data\\user-handle\\assets\\blip。","文本动画设置：","设置最小/最大速度乘数不为 1.0 以实现速度动画的随机性。","设置文本速度：每个字母打印之间的延迟（毫秒）。","设置逗号/短语延迟大于 0 以在打印特殊字符时添加暂停，可以为动画增加生动性。在这种情况下，音频也会暂停。","设置音频速度：每个 blip 声音之间的延迟，独立于文本速度。","选择一个角色，如果他有配置文件，将会加载。","选择要分配/更新配置文件的角色：","音频参数："]}],[{"i":"chat-translation-聊天翻译","l":"Chat Translation (聊天翻译)"},{"l":"概述","p":["聊天翻译扩展使用各种翻译提供商实现聊天消息在不同语言之间的实时翻译。它支持手动和自动翻译模式。","使用\"Translate Message/翻譯訊息\"消息操作按钮将英文消息翻译成中文","\"Translate Chat\", \"Translate Input\"","\"翻译聊天\", \"翻译输入\"","\"翻譯聊天內容\", \"翻譯輸入內容\"","\"채팅 번역하기\", \"입력 번역하기\"","\"Перевести чат\", \"Перевести моё сообщение\""]},{"l":"使用方法","p":["翻译聊天消息的所有方式：","翻译聊天 按钮在** 扩展** 菜单中","一次性翻译整个聊天历史","翻译输入 按钮在** 扩展** 菜单中","仅翻译当前输入文本","在发送消息前很有用","翻译消息 图标在任何消息的** 消息 操作** 工具栏中","点击仅翻译该消息","再次点击恢复原文","自动模式 配置在** 扩展 面板的 聊天翻译** 抽屉中","自动翻译用户输入、AI 回复或两者","/translate 斜杠命令","使用 /translate [target=language_code] text 翻译文本"]},{"l":"配置","p":["配置选项在** 扩展 面板的 聊天翻译** 抽屉中。"]},{"l":"提供商","p":["选择您偏好的 翻译服务","如果出现** API 密钥** 图标，点击输入 API 密钥","如果出现** 自定义 URL** 图标，点击输入自定义 API URL"]},{"l":"目标语言","p":["选择您想要用来写消息或阅读 AI 回复的语言。"]},{"l":"自动模式","p":["配置自动翻译行为。","无：不自动翻译","翻译回复：自动将 AI 回复翻译成目标语言","翻译输入：自动将用户输入翻译成英语","全部翻译：翻译用户输入和 AI 回复"]},{"l":"清除翻译","p":["清除翻译 按钮移除当前聊天中所有消息的翻译。原始消息会保留。"]},{"i":"配置示例中英聊天","l":"配置示例：中英聊天","p":["要设置一个让说中文的用户可以用中文与使用英语的 AI 聊天的工作流程：","将自动模式设置为\"全部翻译\"","将目标语言设置为\"中文（简体）\"或\"中文（繁体）\"","选择具有良好语言自动检测功能的翻译提供商（例如 Google 或 DeepL）","此设置将：","将用户的中文输入翻译成英语供 AI 使用","将 AI 的英语回复翻译回中文供用户使用","此设置依赖于输入的自动语言检测。为了更精确的控制，未来的更新可能会包括明确的源语言选择。"]},{"l":"翻译提供商","p":["Bing Translator","DeepL","DeepLX","Google Translate","Google Translate 和其他提供商的自托管前端，注重隐私，开源（AGPL-3.0）","Google Translate 的替代前端，开源（AGPL-3.0），注重隐私","Libre Translate","Lingva Translate","OneRing Translator","Yandex Translate","专有翻译服务的自托管（AGPL-3.0）替代品，带有云托管的专业版","云端 本地，自定义 URL 需要 API 密钥","位置","使用广泛，支持多种语言，准确度高","微软的翻译服务，与 Azure 服务集成","提供商","特点","自托管 DeepL 代理，开源（MIT），免费但代理 DeepL Pro 需要 DeepL API 密钥","适用于俄语和东欧语言","高质量翻译，尤其是欧洲语言"]},{"l":"DeepL 特定配置","p":["德语、法语、意大利语、西班牙语、荷兰语、日语和俄语可用正式程度级别","通过 config.yaml 中的 deepl.formality 配置"]},{"l":"斜杠命令","p":["使用 /translate 命令进行快速翻译。语法：/translate [target=language_code] text。如果未提供目标语言，将使用扩展设置中的值。"]},{"l":"基本用法","p":["将文本翻译成当前目标语言并在弹出窗口中显示：","中文（简体）弹出窗口，'欢迎来到酒馆/Welcome to the Tavern'","将文本翻译成西班牙语并添加到聊天中：","西班牙语用户消息，'Hola Mundo/Hello world'"]},{"i":"测试管道翻译本地化","l":"测试、管道翻译、本地化","p":["提示用户输入消息和语言，将消息翻译成该语言，然后重新翻译成配置的目标语言，并在弹出窗口中显示两个翻译。此示例使用 /input 和 /buttons 命令收集用户输入：","这对于在将翻译写入重要位置之前，检查翻译成您不会说的语言的质量很有用。","弹出窗口，'Welcome to the Tavern/欢迎来到酒馆/welcome to the pub', en, zh-CN, en 弹出窗口，'My hovercraft is full of eels/我的氣墊船裡裝滿了鰻魚/My hovercraft is filled with eels', en, zh-TW, en","UI 控件以当前语言环境显示，独立于配置的目标语言。","/input","/buttons","输入对话框，'发送测试消息/Send Test Message'","按钮对话框，'语言/Language'","弹出窗口，'我的氣墊船裡裝滿了鰻魚/My hovercraft is full of eels', zh-TW -> en -> zh-TW","在以下示例中，输入语言检测相对有效：","弹出窗口，'(My hovercraft is full of eels)/A légpárnás hajóm tele van angolnával/我的氣墊船裡裝滿了鰻魚', zh-TW -> hu -> zh-TW 弹出窗口，'我的氣墊船裡裝滿了鰻魚/Mi aerodeslizador está lleno de anguilas/My hovercraft is full of eels', zh-TW -> es -> en 弹出窗口，'Il mio hovercraft è pieno di anguille/我的气垫船里装满了鳗鱼/My hovercraft is filled with eels', it -> zh-CN -> en"]},{"l":"技术说明","p":["支持 UTF-8 编码、特殊字符和表情符号","在需要时通过分块处理大型消息","保留消息中的格式和嵌入图像","缓存翻译以避免重复的 API 调用"]},{"l":"AI 输入语言","p":["internal_language 控制用户消息在发送给 AI 之前自动翻译成的语言。在默认设置中硬编码为'en'，无法通过 UI 更改。因此，发送给 AI 的消息的翻译目标语言始终是英语。之前的测试表明，AI 在接收英语消息时表现更好，但随着更多 LLM 在更多样化的语言数据上训练，这种情况可能会改变。我想可以在 settings.json 中更改 internal_language 并进行尝试。"]},{"l":"中文变体处理","p":["扩展支持简体中文和繁体中文，但并非所有翻译提供商都支持。UI 分别将它们显示为\"中文（简体）\"和\"中文（繁体）\"，语言代码为'zh-CN'和'zh-TW'。它们被映射到以下翻译提供商的语言代码：","Libre Translate：'zh-CN'映射到'zh'，'zh-TW'映射到'zt'。","DeepL 和 DeepLX：两种变体都映射到'ZH'。","Bing：'zh-CN'映射到'zh-Hans'，'zh-TW'保持不变。","其他提供商按原样使用'zh-CN'和'zh-TW'。"]},{"l":"文本长度限制","p":["一些提供商对每个请求有字符限制：","Yandex：5000 字符","DeepLX：1500 字符","Bing：1000 字符","Google：5000 字符","较长的文本会自动分块进行翻译。"]}],[{"i":"chat-vectorization-聊天向量化","l":"Chat Vectorization (聊天向量化)","p":["使用此扩展不能保证更好的聊天体验或任何形式的改进记忆。仅在您完全理解向量数据库使用的所有含义时才使用。","聊天向量化会搜索当前聊天历史中与您最近消息相关的消息。 它会暂时将最相关的消息移动到聊天历史的开头或结尾。 这种移动发生在模型生成对您最后一条消息的回复时。","聊天历史开头和结尾的消息往往对模型的回复影响最大。 因此，将相关消息移动到这些位置可以帮助模型在回复中关注相关信息。","特别是，聊天向量化可以找到在消息历史中太靠后而无法放入请求上下文的相关消息。 将这些消息移入上下文为模型提供了原本无法获得的信息。","聊天向量化是一种检索增强生成（RAG）。检索增强生成通过在提示中提供额外的相关信息， 提高模型生成响应的质量。","检索：使用最近的消息来检索相关的过去消息","增强：通过以有用的方式插入过去的消息来增强模型的上下文","生成：指导模型在生成响应时使用过去的消息","向量 是一组数字，可以表示一段文本的主题、内容、风格或其他特征。","向量化 是计算表示一段文本的向量。这是由向量化模型完成的。 就像文本生成模型从文本生成文本一样，向量化模型从文本生成向量。","向量搜索 通过比较向量而不是关键词来找到相关结果。如果我们计算搜索查询的向量， 我们可以将其与存储的文本集合的向量进行比较。这样可以找到我们集合中与搜索查询文本 最相似的文本。在聊天向量化的情况下，\"搜索查询\"是最近的 2 条消息，而\"集合中的文本\" 是聊天中的所有其他消息。"]},{"l":"设置","p":["要启用聊天向量化，选择 \"Extensions\" > \"Vector Storage\" > \"Enabled for chat messages\"。","配置向量化源和向量化模型。聊天向量化使用与 Data Bank 相同的向量源， 因此您可能已经设置好了。向量化源和向量化模型的设置在 Data Bank 中有文档说明。","聊天向量化使用与 Data Bank 相同的向量存储，但这不需要设置或配置。 Data Bank 中也有关于向量存储的信息。","聊天向量化不使用 Data Bank 来存储聊天消息。消息存储在聊天中。"]},{"i":"准备聊天消息以供搜索向量存储","l":"准备聊天消息以供搜索（向量存储）","p":["为了使聊天消息可以被搜索，系统会为每条消息计算一个向量并存储。","向量化在后台进行，每当您发送或接收消息时都会发生。","每条消息都单独存储，这样在生成过程中可以单独找到和移动它们。","大型消息会被分割成\"块\"，这样模型就可以获得长消息中最相关的部分。块大小为 400 个字符。 您可以通过\"Chunk size (chars)\"更改这个值。","消息通过寻找块边界（如段落分隔符、换行符或单词之间的空格）来分割。这是为了 使所有块尽可能有意义。如果您的聊天消息有其他标记自然分割点的方式，比如 ----， 您可以将其添加到\"Chunk boundary\"中。\"Chunk boundary\"的设置与 Data Bank 共享。"]},{"l":"向量存储控制","p":["要计算当前聊天中所有消息的向量，而不是等待它们在后台处理，从设置中选择\"Vectorize All\"。","要查看当前聊天中有多少消息已被向量化，选择\"View Stats\"。这会显示存储的向量总数。 它还会通过绿色圆点标记来指示已被向量化的特定聊天消息。","要删除当前聊天中所有消息的向量，选择\"Purge Vectors\"。","聊天向量化 中的\"Vectorize All\"和\"Purge Vectors\"控件只影响当前聊天的存储向量。 然而，文件向量化中也有相同的按钮，它们会影响 Data Bank 中文件的向量。确保您要清除的是您想要清除的向量。"]},{"i":"查找相关消息以移动向量检索","l":"查找相关消息以移动（向量检索）","p":["要在聊天历史中找到最相关的消息，最近的消息会被转换（向量化）成查询向量。默认情况下，使用最近的 2 条消息。要更改这一点，更改\"Query messages\"的值。这个值在查找 Data Bank 中的相关内容时也会使用。","过去的消息必须至少有 25% 的相关性分数才会被包含。您可以通过\"Score threshold\"更改这一点。分数阈值的设置与 Data Bank 共享。","聊天历史中最相关的 3 条消息会被移动。您可以通过\"Insert#\"更改这一点。","为了避免打扰聊天中最近的事件，最近的 5 条消息不会被移动。要更改这一点，更改\"Retain#\"的值。"]},{"i":"移动消息增强生成","l":"移动消息（增强生成）","p":["消息会被移动到以下 3 个位置之一：","聊天顶部，在主提示/故事字符串之后（默认）","聊天顶部，并且在主提示/故事字符串之前","聊天结尾，在最后 2 条消息之前（\"In-chat @ Depth 2\"）。由于您刚刚发送了一条消息，这个位置通常就在模型的上一个回复之前。","您可以通过\"Injection Position\"和\"Depth\"更改这一点。","消息按相关性顺序包含，相关性较高的消息显示在相关性较低的消息之后。","包含了发送每条消息的人或角色的名字。","这些消息作为\"过去的事件\"展示给模型。这有助于模型理解这些消息包含的信息来自聊天历史中不同于插入点的位置。您可以通过\"Injection Template\"更改这一点。","您可以使用 Prompt Itemization 弹出窗口、终端日志或浏览器控制台日志查看最终的模型提示。浏览器控制台日志对于理解聊天向量化中所有步骤的作用很有帮助。"]},{"l":"向量摘要","p":["向量摘要功能是实验性的。","向量摘要不会创建您的聊天摘要。它不会将检索到的消息转换为摘要。它不会使您的聊天历史变短。它不是\"像 Summarize 但更好\"。","向量摘要旨在使聊天消息的向量搜索更有效。它通过在向量化之前引入摘要步骤来实现这一点。摘要步骤提取消息中最重要的部分，使得生成的向量能更好地指示消息的相关内容。","向量摘要可能会使向量搜索变得不那么有效。","要对聊天历史中的消息进行摘要，并为每个摘要消息生成向量，选择\"Summarize chat messages for vector generation\"。","摘要消息不会替换聊天中的原始消息。如果向量搜索匹配了摘要消息的向量，原始消息会从聊天历史中检索并移动到上下文中。消息的摘要版本保留在向量存储中，这可能对调试有帮助。","要对用于搜索聊天历史的消息内容（默认为最后 2 条消息）进行摘要，选择\"Summarize chat messages when sending\"。","每次为向量化摘要消息时，都会向摘要模型发出单独的请求。您可以通过\"Summarize with\"选择使用哪个摘要源。选择\"Main API\"将使用与生成聊天或文本补全相同的模型和连接设置来生成摘要。","请求包括原始消息内容和关于模型应如何生成摘要的指令。您可以通过\"Summary Prompt\"更改指令。"]}],[{"i":"dynamic-audio-动态音频","l":"Dynamic Audio (动态音频)","p":["本指南将帮助您为 SillyTavern 设置和自定义动态音频资源。"]},{"l":"前提条件","p":["在开始之前，请确保满足以下前提条件：","确保您使用的是最新版本的 SillyTavern。","从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"Dynamic Audio\"扩展。"]},{"i":"动态音频设置浏览器","l":"动态音频设置（浏览器）","p":["连接到资源库：","启动 SillyTavern 并导航到 Extensions> Assets。","点击\"Connect\"按钮建立与官方资源库的连接。","下载所需的音频资源，如背景音乐（BGM）或环境音效，这些资源应与您打算使用的背景相对应。","启用动态音频扩展：","在 SillyTavern 中，转到 Extensions> Dynamic Audio。","启用扩展，取消静音并根据您的偏好调整 BGM 和环境音效的音量。","当 BGM 结束时，将随机播放另一首，点击循环按钮可以保持当前 BGM 持续播放。","点击随机按钮可以随机选择另一首 BGM。","基于表情的 BGM：","如果您希望 BGM 跟随角色表情变化，请启用表情 BGM 开关（需要在角色文件夹中有 BGM，详见下文）。","调整 BGM 更新之间的冷却时间（以秒为单位）。如果您发现在群聊中或使用基于情绪检测的角色特定 BGM 时音乐变化太频繁，请增加这个值。"]},{"l":"为角色导入音乐","p":["要为角色的情绪设置自定义音乐，请按照以下步骤操作：","导航到角色文件夹：","转到角色文件夹，例如 \\SillyTavern\\data\\user-handle\\characters\\Seraphina。","创建 BGM 文件夹：","在角色文件夹内，创建一个名为 bgm 的子文件夹。","导入情绪音乐：","在 bgm 文件夹内，导入每种情绪的音乐文件。支持的音频扩展名包括 .mp3、.ogg 和 .wav。","命名规则：[emotion]_[number].mp3，例如 anger_0.mp3、 joy_0.mp3。","每种情绪的多个音轨：","您可以通过递增数字为同一情绪导入多个音轨，例如 neutral_1.mp3、 neutral_2.mp3。","默认音乐选择：","当未检测到情绪时，将随机播放一个中性音轨作为默认值。情绪检测的方式与更新精灵图类似；详情请参阅 表情图片文档。"]},{"l":"更改默认 BGM 音乐","p":["如果角色的文件夹中没有自定义 BGM，将播放默认音轨。以下是更改方法：","导航到 BGM 文件夹：","转到以下文件夹：\\SillyTavern\\data\\user-handle\\assets\\bgm。","替换/添加音乐：","替换或添加音乐文件（.mp3、.ogg、.wav）到此文件夹。","这些是使用资源扩展下载的官方音频资源。","当找不到角色特定的 BGM 时（单人或群聊），将随机播放其中一个音轨。"]},{"l":"更改环境音效","p":["环境音效为您的场景增添深度。以下是自定义方法：","导航到环境音效文件夹：","转到以下文件夹：\\SillyTavern\\data\\user-handle\\assets\\ambient。","文件命名规则：","环境音频文件名与背景图片文件名对应，将空格替换为破折号。","示例：\"bedroom-clean.mp3\"对应\"bedroom clean.jpg\"背景。","如果锁定按钮未锁定，将播放与背景对应的音频文件。激活锁定将保持当前环境音效继续播放。","自定义环境音效：","您可以按照相同的命名模式为自定义或现有背景添加自己的环境音效。","感谢您阅读本指南！您的 SillyTavern 体验现在已通过动态音频得到增强。"]}],[{"l":"EmulatorJS","p":["此扩展允许您直接在 SillyTavern 聊天中玩复古游戏机游戏。"]},{"l":"安装","p":["前提条件：","SillyTavern 的最新发布版本。","从网上下载的 ROM 文件。您可以在 任何地方 找到它们。","如何安装：","使用 SillyTavern 的扩展下载器安装。","或使用此链接： https://github.com/SillyTavern/SillyTavern-EmulatorJS"]},{"l":"使用方法","p":["打开\"EmulatorJS\"扩展菜单。","点击\"Add ROM file\"。ROM 保存在您的浏览器存储中，不会存储在服务器上。","选择要添加的游戏文件。输入名称和核心（如果未自动检测）。如果核心需要 BIOS 文件，也要添加它。","点击列表中的\"Play\"按钮或通过魔杖菜单启动。","启动游戏后，您可以在模拟器框架中自定义控制和其他设置。","如果需要休息，请使用保存/加载状态功能。","查看 EmulatorJS 文档以了解可用核心及其要求的列表： Systems。"]},{"l":"评论模式","p":["借助 GPT-4 Vision 等多模态模型的力量，您的 AI 机器人可以看到您的游戏画面并提供有趣的角色评论。"]},{"l":"要求","p":["支持 ImageCapture 的浏览器。在桌面版 Chrome 上测试通过。Firefox 需要通过配置启用。Safari 无法工作。","推荐使用带有图像内联模式的 Chat Completion API。需要 OpenAI 或 OpenRouter API 密钥，选择\"gpt-4-turbo\"或\"gpt-4o\"作为模型；Google AI Studio 使用 Gemini 1.5 Pro 或 Gemini 1.5 Flash 模型；Anthropic Claude（推荐 Opus 3 或 Sonnet 3.5 模型）。查看所选 API 的文档，以了解所选模型是否支持多模态提示。","如果禁用了图像内联，请确保启用了\"Image Captioning\"扩展，然后选择\"Multimodal\"描述源：","OpenAI、Claude、MistralAI、Google AI Studio 使用任何支持视觉的模型。","OpenRouter API 使用兼容的多模态模型。","在 Ollama、KoboldCpp、oobabooga TextGen WebUI 或 vLLM 中本地托管的 Llava 模型。"]},{"l":"如何启用评论","p":["确保在 EmulatorJS 扩展设置中设置了提供评论的间隔。此设置定义了使用当前游戏画面快照查询角色评论的频率。值为 0 表示不提供评论。","选择角色聊天并启动游戏。为了获得最佳性能，请确保 ROM 文件正确命名，以便 AI 可以获得更多背景上下文。","像平常一样开始玩游戏。视觉模型将定期查询，根据它\"看到\"的最新截图写评论。"]},{"l":"设置","p":["Caption template - 用于描述游戏截图的提示。支持 {{game}} 和 {{core}} 额外宏。","Comment template - 用于根据生成的描述写评论的提示。支持 {{game}}、{{core}}、{{caption}} 额外宏。对于图像内联模式，{{caption}} 将替换为 see included image。","Force captions - 即使支持并启用了图像内联，也会强制使用多模态描述。"]},{"i":"为什么我看不到任何评论","l":"为什么我看不到任何评论？","p":["在以下情况下，评论会暂时暂停（跳过间隔步骤）：","模拟器已暂停（使用暂停按钮，而不是游戏内暂停）。","浏览器窗口失去焦点。","用户输入区域不为空。这是为了让您安静地输入回复。","另一个回复生成当前正在进行中。","TTS 语音正在朗读。评论会暂停（最多 20 秒）直到语音结束，但不会跳过。","其他常见问题：","确保在启动游戏之前设置了评论间隔。","确保您已设置多模态 API 密钥，并且 ST 服务器控制台中没有错误。","仍然不工作？请发送您的浏览器调试控制台日志（按 F12）。"]},{"l":"致谢","p":["EmulatorJS 引擎 (GPLv3)：https://github.com/EmulatorJS/EmulatorJS"]}],[{"i":"expression-images-表情图片","l":"Expression Images (表情图片)"},{"i":"这是什么","l":"这是什么？","p":["表情图片是您的 AI 角色的图片（也称为\"精灵图\"），显示在聊天窗口旁边（或后面）。","表情图片可以使用与 SillyTavern 主应用程序一起运行的分类模型。这允许表情根据 AI 最近的聊天回应中表达的情感自动改变。"]},{"i":"设置说明无需-extras-的离线模式","l":"设置说明（无需 Extras 的离线模式）","p":["打开扩展面板并展开\"Expression images\"部分。如果您已打开角色聊天，您将看到一个图片占位符网格。 表情抽屉","点击网格中每个图片左上角的\"导入\"按钮，并选择您想应用到该情绪的图片。这将把图片以正确的文件名保存在 /data/user-handle/characters/(character_name_here)/ 文件夹中。","要在您的 SillyTavern 窗口中显示图片，请在上传后点击网格中的图片。"]},{"i":"分类模块如何工作","l":"分类模块如何工作？","p":["classify 模块使用一个在 SillyTavern 主机（例如您的 PC 或 colab 机器）上运行的小型\"情感解析\"模型。该模型接收 AI 的新输出并检测文本表达的是什么类型的情感或情绪。虽然一条消息中可能表达多种情感，但模型只选择最可能的一种并返回给 SillyTavern。然后前端插件显示与该情感相关联的图片。"]},{"l":"手动更改表情","p":["点击任何已上传的表情图片（精灵图）以在聊天界面附近（默认 UI 模式）或屏幕中央（视觉小说模式）显示它们。","使用 /emote (name) 斜杠命令或匹配的快速回复来设置精灵图，无需打开扩展菜单。"]},{"i":"设置说明本地分类","l":"设置说明（本地分类）","p":["确保您使用的是最新版本的 SillyTavern。","打开扩展面板并展开\"Character Expressions\"插件菜单。","在分类源下拉菜单中选择\"Local\"。","这将启动一次性从 HuggingFace Hub 下载分类模型（约 ~ 100 Mb）。","生成任何消息以验证分类是否正常工作并且精灵图是否出现。您也可以检查服务器控制台的调试日志。"]},{"i":"设置说明使用-extras","l":"设置说明（使用 Extras）","p":["安装并运行 Extras，并启用 classify 模块： python server.py --enable-modules=classify","按照上述方式导入表情图片。","在分类源下拉菜单中选择\"Extras\"。","当 AI 向您发送回应时，适当的表情图片将自动显示。"]},{"i":"设置说明使用-llm","l":"设置说明（使用 LLM）","p":["连接到任何受支持且正确配置的文本生成 API。","按照上述方式导入表情图片。","在分类源下拉菜单中选择\"LLM\"。","可选择配置分类指令提示。","生成任何消息以验证分类是否正常工作并且精灵图是否出现。您也可以检查服务器控制台的调试日志。"]},{"i":"如何获得更多表情选项","l":"如何获得更多表情选项？"},{"l":"本地","p":["本地分类默认有 28 个可能的图片标签： Cohee/distilbert-base-uncased-go-emotions-onnx","要使用 6 选项分类模型，请用文本编辑器打开 config.yaml 文件，并将 classificationModel 变量的值更改为 Cohee/bert-base-uncased-emotion-onnx","之后，重启 ST 服务器以重新下载模型。要恢复，请再次更改 config.yaml 中的值。"]},{"l":"Extras API","p":["Extras API 默认使用具有 6 个选项的分类模型： nateraw/bert-base-uncased-emotion","还有一个具有 28 个选项的模型： joeddav/distilbert-base-uncased-go-emotions-student","要使用此模型，您需要在 Extras 命令行中添加以下参数（前后都有空格）：","--classification-model=joeddav/distilbert-base-uncased-go-emotions-student"]},{"i":"表情支持哪些图片格式","l":"表情支持哪些图片格式？","p":["允许任何图片格式，包括 webp 和动态 gif。","最常见的格式是带有透明背景的 PNG 文件。"]},{"i":"使用默认表情","l":"使用\"默认表情\"","p":["此功能仅在启用本地分类或连接 Extras API 时激活。无法手动显示默认表情图片。","使用默认表情","如果您没有角色的自定义表情图片，可以使用基本 SillyTavern 安装中包含的内置默认表情。这些是简单的表情符号风格图片。只需点击扩展面板内表情图片部分顶部的复选框。默认表情将与任何可用的自定义表情一起工作，并在您的自定义图片集缺少特定情绪的图片时显示。"]},{"l":"导入表情图片 zip 文件","p":["使用\"import ZIP\"按钮，您可以导入包含表情图片集合的 zip 文件，这些图片将自动添加到 当前选择的角色 的正确文件夹中。zip 文件必须具有扁平的内部结构（无子文件夹），并且各个图片应该正确命名。导入 zip 不会自动重命名任何图片以使其匹配情绪。"]},{"l":"限制"},{"i":"显示名称而不是角色卡片文件名决定使用哪个图片集","l":"显示名称（而不是角色卡片文件名）决定使用哪个图片集","p":["如果您有多个具有相同显示名称的角色，它们都将使用相同的表情图片集。","如果您想为同名角色的每个版本使用不同的图片集，您可以使用精灵图文件夹覆盖。"]},{"l":"如何设置覆盖","p":["在 /data/user-handle/characters 中创建一个任意名称的文件夹并将图片放在那里，例如 /data/user-handle/characters/Boris。","打开要覆盖精灵图的角色的聊天。","在\"Sprite Folder Override\"输入框中输入覆盖文件夹的名称并点击\"Submit\"。","精灵图列表将重新加载，\"Sprite set\"指示器应显示覆盖文件夹。","或者，您可以使用 /costume 斜杠命令达到相同的效果：/costume Boris。","通过在覆盖文件夹名称前加上反斜杠，它将解析为当前角色精灵图文件夹中的子文件夹，例如，对于名为 Boris 的角色，/costume \\tracksuit 将解析为 /data/user-handle/characters/Boris/tracksuit 文件夹。"]},{"l":"自定义表情","p":["您可以向列表添加自定义表情标签并上传精灵图。","但是，它们不会被分类模型自动标记。您 需要 手动设置它们（通过点击或使用 /emote 命令）。"]}],[{"i":"image-captioning-图像描述生成","l":"Image Captioning (图像描述生成)","p":["图像描述生成允许 SillyTavern 自动为聊天中使用的图像生成文本描述。","当您希望您的 AI 角色能够\"看到\"并回应对话中的视觉内容时，请使用图像描述生成功能。","为您上传或粘贴到消息中的图像创建描述","为聊天历史中的现有图像添加上下文","使用各种生成源，包括本地模型、云 API 和众包网络","有些选项不需要设置、不需要费用，也不需要 GPU。也有一些选项需要其中的一些或全部条件。选择适合您需求和资源的选项。","图像描述生成扩展已内置于 SillyTavern 中，无需单独安装。"]},{"l":"快速开始","p":["设置：","在 Extensions 面板中打开 Image Captioning 面板","选择描述生成源（最可能是\"Local\"或\"Multimodal\"）","对于\"Multimodal\"，确保您已在 API Connections 标签页中设置了连接","生成描述：","从 Extensions 弹出菜单中选择\" Generate Caption\"","在提示时选择图像文件","等待生成描述","审查并发送：","带描述的图像将被插入到您的消息中","使用图像工具提示查看描述","点击 Send 看看您的角色对图像的看法！"]},{"l":"面板控制"},{"l":"源选择","p":["选择图像描述生成的源。支持的选项：","源","描述","多模态模型","云端：OpenAI、Anthropic、Google、MistralAI 等。 本地：Ollama、llama.cpp、KoboldCpp、Text Generation WebUI 和 vLLM。 支持自定义提示，因此您可以向图像提问。","Local","使用在您的 SillyTavern 服务器内本地运行的 transformers.js。零设置！","Horde","使用 AI Horde 网络，这是一个众包分布式图像生成模型网络。无需下载、配置或付费。响应时间不固定。","Extras","Extras 项目已于 2024 年 4 月停止维护，不再提供维护或支持。"]},{"l":"描述配置","p":["Caption Prompt：输入自定义描述提示。默认提示是\"What's in this image?\"","Ask every time：切换是否为每个图像描述请求自定义提示"]},{"l":"消息模板","p":["Message Template：自定义描述消息模板。使用 {{caption}} 宏插入生成的描述。默认模板是 [{{user}} sends {{char}} a picture that contains: {{caption}}]"]},{"l":"自动描述生成","p":["Automatically caption images：切换是否为粘贴或附加到消息中的图像自动生成描述","Edit captions before saving：切换是否允许在保存前编辑描述"]},{"l":"为图像生成描述","p":["在 SillyTavern 中生成图像描述的所有方法：","从 Extensions 弹出菜单中选择\" Generate Caption\"，并在提示时选择图像文件","点击消息中已有图像顶部的 Caption 图标","在启用 自动描述生成 的情况下直接将图像粘贴到聊天输入框中","使用消息操作中的 Embed File or Image 按钮将图像文件附加到消息中","发送带有嵌入图像的消息","使用 /caption 斜杠命令"]},{"i":"自动描述生成-1","l":"自动描述生成","p":["自动描述生成功能允许您在将图像添加到聊天中时自动生成描述，无需每次手动触发描述生成过程。","要启用，请在图像描述生成面板中选中\"Automatically caption images\"复选框。您还可以通过选中\"Edit captions before saving\"框来选择在保存前编辑描述。","启用后，自动描述生成将在以下情况下触发：","当图像直接粘贴到聊天输入框中时。","当图像文件附加到消息中时。","当发送带有嵌入图像的消息时。","系统将使用您选择的描述生成源（Local、Extras、Horde 或 Multimodal）和配置的设置为图像生成描述。"]},{"i":"保存前编辑描述优化模式","l":"保存前编辑描述（优化模式）","p":["如果您启用了\"Edit captions before saving\"选项：","添加图像后，将出现一个带有生成描述的弹出窗口。","您可以根据需要查看和编辑描述。","点击\"OK\"应用描述，或点击\"Cancel\"放弃保存描述。"]},{"l":"描述发送","p":["生成的（和可选编辑的）描述将使用您配置的消息模板自动插入到提示中。默认情况下，它将以以下格式发送："]},{"i":"斜杠命令caption","l":"斜杠命令：/caption","p":["该扩展提供了一个 /caption 斜杠命令，可在聊天框或脚本中使用。"]},{"l":"用法","p":["prompt（可选）：描述模型的自定义提示。仅 multimodal 源支持。","quiet=true|false：如果设置为 true，则禁止向聊天发送带描述的消息。默认为 false。","mesId=number：指定从现有消息生成图像描述的消息 ID，而不是上传新图像。","如果未提供 mesId，命令将提示您上传图像。当 quiet 为 false（默认）时，将向聊天发送一条带有描述图像的新消息。生成的描述可以用作其他命令的输入。"]},{"l":"示例","p":["使用默认设置为新图像生成描述：","使用自定义提示为新图像生成描述：","为消息 #5 中的图像生成描述而不发送新消息：","为消息 #10 中的图像使用自定义提示生成描述，然后 基于描述生成新图像："]},{"l":"本地源","p":["您可以在 config.yaml 中更改模型。键名为 extras.captioningModel（因为某些原因）。输入您想使用的 Hugging Face 模型 ID。默认值是 Xenova/vit-gpt2-image-captioning。","您可以使用任何支持图像描述生成的模型（ VisionEncoderDecoderModel 或\"image-to-text\"管道）。该模型需要与 transformers.js 库兼容。也就是说，它需要 ONNX 权重。寻找带有 ONNX 和 image-to-text 标签的模型，或者有一个名为 onnx 的文件夹，里面装满了 .onnx 文件。"]},{"l":"多模态源"},{"l":"一般配置","p":["Model：选择用于图像描述生成的模型。选项根据所选 API 而变化。","Allow reverse proxy：如果定义并有效，切换是否允许使用反向代理（OpenAI、Anthropic、Google、Mistral）","描述生成源的 API 密钥和端点 URL 在 API Connections 面板中管理。首先在 API Connections 中设置连接，然后在 Captioning 中选择它作为您的描述源。","最后一次提醒：在 API Connections 中配置 API 密钥/地址/端口，并在 Captioning 中使用该连接。","您仍然可以使用 Claude 进行聊天，使用 Google AI Studio 进行图像描述生成，或者其他组合。只需要先在\"API Connections\"标签页中设置好它们 两个。然后将您的 Chat Completion 源切换到 Claude，将您的 Captioning 源切换到 Google AI Studio。","对于大多数本地后端，您需要在模型后端而不是在 SillyTavern 中设置一些选项。如果您的后端一次只能运行一个模型，并且不支持自动切换，那么使用同一个后端进行聊天和描述生成时使用不同的模型将会很困难。","即使您在不同端口上运行两个后端实例，API Connections 也只允许每种后端类型有一个活动配置。但是如果我告诉您...您可能可以在 Text Completion 和 Chat Completion 模式下都连接到您的后端？现在您可以有两个到同一个后端类型的连接了。"]},{"l":"源","p":["\"我不想付费或运行任何东西\"：Google AI Studio 免费层","\"我想保持本地 AI 的梦想\"： KoboldCpp","\"我想在它不工作时抱怨\"： Extras","\"我想在本地生成图像描述并让它正常工作\"：Ollama","\"我想要最好的描述生成，不介意付费\"：Anthropic","01.AI (Yi)","Anthropic","API 提供商","Custom (OpenAI-compatible)","Google AI Studio","Groq","KoboldCpp","llama.cpp","MistralAI","Ollama","OpenAI","OpenRouter","Text Generation WebUI (oobabooga)","vLLM","云端，llama-3.2-vision 11B/90B，LLaVA","云端，付费，GPT-4 Vision、4-turbo、4o、4o-mini","云端，付费，pixtral-large、pixtral-12B","云端，付费，yi-vision","云端，付费，具有视觉能力的 Claude 模型：claude-3-5-sonnet/haiku、claude-3-opus/sonnet","云端，付费（可能有免费选项），多个模型，在 API Connections 中配置后从 Captioning 中可用的模型中选择","云端，免费层然后付费，Gemini Flash/Pro","描述","本地","本地，在 API Connections 中配置后可以在 Captioning 中切换可用模型并下载 额外的视觉模型","本地，必须在 KoboldCpp 中配置模型","本地，必须在 llama.cpp 中配置模型","本地，必须在 ooba 中配置模型","用于自定义 OpenAI 兼容 API，使用 API Connections 标签页中当前配置的模型","要使用这些描述源之一，请在源下拉菜单中选择 Multimodal。"]},{"l":"KoboldCpp","p":["有关安装和使用 KoboldCpp 的一般信息，请参阅 KoboldCpp 文档。","要使用 KoboldCpp 进行多模态描述生成：","获取一个多模态模型，该模型经过训练可以同时处理文本和图像提示。","还要获取该模型的多模态投影。这些权重允许模型理解输入的文本和图像部分之间的关系。","在 KoboldCpp 启动 GUI 或命令行界面中加载模型和投影。","原始和经典的本地多模态模型是 LLaVA。可以从 Mozilla/llava-v1.5-7b-llamafile 获取 GGUF 格式的模型和投影文件。要从命令行加载它们，请使用 --model 和 --mmproj 标志设置模型和投影。例如：","您可以尝试一些 LLaVA 微调版本： xtuner/llava-llama-3-8b-v1_1-gguf、 xtuner/llava-phi-3-mini-gguf。","您可以使用您特定微调版本所基于的基础模型的多模态投影。一些常见基础模型的投影可以从 koboldcpp/mmproj 获取。"]}],[{"i":"image-generatio-图像生成","l":"Image Generatio (图像生成)","p":["与 AI 函数调用 集成以自动检测图像生成意图","交互模式 可根据自然语言请求触发图像生成","使用本地或基于云的 Stable Diffusion、FLUX 或 DALL-E API 生成图像。","可自定义的提示词模板和 前缀 以保持一致的风格和质量","各种 生成模式 用于角色、场景和自定义提示词","图像滑动 功能可以重新生成图像同时保持相同的提示词","大多数常用的 Stable Diffusion 生成设置都可以在 SillyTavern UI 中自定义。","支持 多种图像生成源，包括本地和基于云的服务","斜杠命令 用于在聊天中轻松生成图像","灵活的 聊天消息可见性 选项用于生成的图像","能够 查看所有生成的图像 在角色画廊中","自动生成图像作为您消息的回复以获得完全沉浸感，从魔杖菜单或斜杠命令使用聊天历史和角色信息生成图像，或在聊天输入栏中使用 /sd (任何内容) 命令使用您自己的提示词生成图像。","角色特定提示词前缀 用于定制角色图像","选项可以 在生成前编辑提示词 和 扩展自由模式提示词","风格预设 可快速切换不同的图像生成设置","高级 ComfyUI 集成 用于高度可自定义的工作流程"]},{"l":"支持的源","p":["Block Entropy","ComfyUI","Draw Things","HuggingFace Serverless","NovelAI Diffusion","OpenAI DALL-E 2/3","Pollinations","SD.Next / vladmandic","SillyTavern Extras","Stability AI","Stable Diffusion WebUI / AUTOMATIC1111","Stable Horde","TogetherAI","云端","云端，付费","云端，免费","云端，开源 (AGPL3)，免费","云端，开源 (MIT)，免费","云端，需要有效订阅","备注","已弃用，不推荐","所有服务将于 2024 年 12 月 31 日停止","本地，Mac/iOS，免费","本地，开源 (AGPL3)，免费","本地，开源 (GPL3)，免费，参见 ComfyUI 配置。","源"]},{"l":"生成模式","p":["-","\"Background\"","\"Me\"","\"Raw Last Message\"","\"The Last Message\"","\"The Whole Story\"","\"Your Face\"","\"Yourself\"","background","face","last","me","raw_last","scene","you","最后一条聊天消息的视觉回顾。","基于故事背景的聊天背景。","备注","强制使用宽景观纵横比。","强制使用肖像纵横比。","当前角色的全身肖像。","当前角色的特写肖像。","描述","斜杠命令参数","用户角色的肖像。","直接使用最后一条消息作为提示词。","聊天事件的视觉回顾。","魔杖菜单项"]},{"l":"如何生成图像","p":["使用扩展上下文菜单（魔杖）中的\"Image Generation\"项。","输入带有生成模式表中参数的 /sd (参数) 斜杠命令。其他任何内容都会触发\"自由模式\"，让 SD 生成您提示的任何内容。例如：/sd apple tree 会生成一棵苹果树的图片。","查找聊天消息上下文操作中的画笔图标。这将为所选消息强制使用\"Raw Message\"模式。","除了原始消息和自由模式之外的每种生成模式都会使用您当前选择的主要生成 API 触发提示词生成，将聊天上下文转换为 SD 提示词。 您可以使用扩展面板中的\"SD Prompt Templates\"设置抽屉为每种生成模式配置指令模板。"]},{"i":"sd-命令使用技巧","l":"/sd 命令使用技巧"},{"l":"查看所有生成的图像","p":["要查看角色的所有保存图像（包括其他聊天），请从角色信息面板的\"More...\"下拉菜单打开画廊，或使用 /show-gallery 斜杠命令。"]},{"l":"指定负面提示词","p":["在提示词之前使用 negative 命名参数来强制使用特定的负面提示词进行生成。"]},{"l":"包含角色特定前缀","p":["在自由提示词模式下使用特殊的 {{charPrefix}} 宏来包含当前角色的正面和负面提示词前缀（如果已定义）。"]},{"l":"抑制聊天消息","p":["您可以通过传递 quiet=true 命名参数来避免将生成的图像发布到聊天中。图像仍会添加到角色画廊中，命令将生成图像的相对 URL，可供其他命令使用。","下面的示例将使用 Markdown 作为用户角色发送生成的图像。"]},{"l":"图像滑动","p":["图像滑动允许在保持相同提示词的同时重新生成图像。如果设置了固定种子，它将为下一次生成随机化。","要循环浏览图像，将鼠标光标悬停（移动设备上点击）在生成的图像上以显示箭头按钮和滑动计数器。点击最新图像上的右箭头将生成一个新图像。","这里的\"滑动\"只是一个名称，不要尝试实际的滑动手势，因为这会重新生成消息本身，而不是附加的图像。"]},{"l":"选项"},{"l":"生成前编辑提示词","p":["允许在将自动生成的提示词发送到 Stable Diffusion API 之前手动编辑。"]},{"l":"使用函数工具","p":["使用 函数调用 自动检测生成图像的意图。","要求：","必须使用支持的源配置图像生成。","必须使用支持的 Chat Completion API 模型，并在 AI Response 设置中启用函数工具调用。","必须在图像生成设置中启用\"Use function tool\"选项。","用户应在聊天消息中表达生成图像的意图，例如\"给我发一张猫的图片\"。","启用函数工具时，交互模式将不会触发。"]},{"l":"使用交互模式","p":["允许在回复遵循特殊模式的用户消息时触发图像生成而不是文本：","包含以下动词之一：send、mail、imagine、generate、make、create、draw、paint、render","后跟以下名词之一（不超过 10 个字符）：pic、picture、image、drawing、painting、photo、photograph","后跟图像生成的目标主题，可以选择性地在前面加上\"of a\"或\"of this\"等短语。","有效请求和捕获主题的示例：","Can you please send me a picture of a cat=> cat","Generate a picture of the Eiffel tower=> Eiffel tower","Let's draw a painting of Mona Lisa=> Mona Lisa","一些特殊主题会触发预定义的生成模式：","'you', 'yourself' => \"Yourself\"","'your face', 'your portrait', 'your selfie' => \"Your Face\"","'me', 'myself' => \"Me\"","'story', 'scenario', 'whole story' => \"The Whole Story\"","'last message' => \"The Last Message\"","'background', 'scene background', 'scene', 'scenery', 'surroundings', 'environment' => \"Background\""]},{"l":"扩展自由模式提示词","p":["使用交互模式或斜杠命令时，通过提示您的主要 API 自动扩展自由模式生成主题描述。"]},{"l":"对齐自动调整的分辨率","p":["将具有强制纵横比（肖像、背景）的图像生成请求对齐到最接近的已知分辨率，同时尽量保持绝对像素数。请参阅\"Resolution\"下拉菜单了解可能的选项。","推荐用于 SDXL 模型。"]},{"l":"通用提示词前缀","p":["在每个生成或自由模式提示词之前添加。通常用于设置图片的整体风格。","示例： best quality, anime lineart。","** 专业提示：** 使用 {prompt} 宏来指定生成的提示词将被插入的确切位置。"]},{"l":"负面提示词","p":["您不希望在输出中出现的图像特征。","示例： bad quality, watermark。"]},{"l":"角色特定提示词前缀","p":["描述当前选择的角色的任何特征。将在通用前缀之后添加。","示例： female, green eyes, brown hair, pink shirt。","您还可以为任何不需要的内容指定负面提示词前缀。它将与通用负面提示词组合。","限制：","仅在一对一聊天中有效。不会在群组中使用。","不会用于背景和自由模式生成。","如果您想与他人共享前缀，请勾选\"Shareable\"复选框。这将把它们保存在角色数据中，而不是您的本地设置中。","** 专业提示：** 如果生成源支持，您也可以在这里使用 LoRAs/embeddings，例如： lora:DonaldDuck:1。"]},{"l":"风格","p":["使用此功能可以快速保存和恢复您喜欢的风格/质量预设，以便稍后使用或在模型之间切换时使用。风格预设包括以下内容：","通用提示词前缀","负面提示词","您还可以使用 /imagine-style 命令（或 /sd-style 或 /img-style）在风格之间切换。"]},{"l":"聊天消息可见性","p":["默认情况下，插入聊天的生成图像在主 API 提示词中是隐藏的，但可以针对每个生成发起者（\"魔杖\"图标、斜杠命令、交互模式）单独覆盖。这可以用于通过让角色\"认知\"图像来使体验更具沉浸感。如果启用了\"Send inline images\"，Chat Completions API 中的多模态模型也可能会\"看到\"图像。","可以通过更改图像提示词模板下的\"Chat Message Template\"来自定义文本消息。所有常规宏都可以在此模板中使用，另外还有一个特殊的 {{prompt}} 宏来指定图像提示词将被添加的位置。"]},{"l":"ComfyUI 配置","p":["ComfyUI 是一个快速且非常灵活的图像生成选项。","如果您熟悉 ComfyUI，简单来说：在 ComfyUI 中制作您的工作流程， 以 API 格式 下载，然后粘贴到 SillyTavern ComfyUI 工作流程编辑器中。ST 将把您的工作流程提交到 ComfyUI 的 API，您将在聊天中获得一张图像。但是能力越大，责任越大，主要责任是在工作流程 JSON 中插入占位符，以便您可以从 SillyTavern 更改设置。","如果您不熟悉 ComfyUI，您仍然可以使用默认工作流程在 SillyTavern 中生成图像。之后，当您想要更强大的功能时，您可以学习如何使用 ComfyUI..."]},{"l":"控制","p":["此面板允许您配置和管理 ComfyUI 与 SillyTavern 的集成。","在 ComfyUI URL 输入字段中输入您的 ComfyUI 服务器的 URL。默认值是 http://127.0.0.1:8188。 如果您使用的是 SwarmUI， 托管 ComfyUI 服务器 的默认端口是 7821，比 SwarmUI 的默认端口高 20。","输入 URL 后，选择 Connect 以验证并建立连接。ComfyUI 服务器必须可以从 SillyTavern 主机访问。"]},{"l":"工作流程管理","p":["从下拉菜单中选择 ComfyUI 工作流程。提供了两个默认工作流程：","Default_Comfy_Workflow.json：支持最常见图像生成设置的基本文本到图像工作流程。","Char_Avatar_Comfy_Workflow.json：使用角色头像加上提示词生成图像的示例图像到图像工作流程。","使用以下按钮管理您的工作流程：","Open workflow editor 查看和修改所选工作流程。","Create new workflow 创建具有自定义名称的新工作流程。","Delete workflow 删除所选工作流程。"]},{"l":"工作流程编辑器","p":["ComfyUI 工作流程编辑器允许您查看和修改用于 SillyTavern 的 ComfyUI 工作流程。","编辑器的主要组件是一个大型文本区域，您可以在其中插入或编辑 JSON 格式的 ComfyUI 工作流程。","要将 ComfyUI 工作流程添加到编辑器，请按照以下步骤操作：","在 ComfyUI 设置中启用\"Dev Mode\"。","使用 ComfyUI 中的\"Save (API Format)\"选项下载 JSON 数据。","在 SillyTavern 中创建新工作流程并打开编辑器。","将下载的 JSON 数据粘贴到文本区域中。","您可以添加 API-格式 JSON 文件直接到 data/default-user/user/workflows 目录在您的 SillyTavern 安装。这将节省步骤 3 和 4。","保留原始 JSON 文件。如果您需要再次在 ComfyUI 中打开工作流程以进行更改，编辑原始文件比带有所有占位符的文件要方便得多。"]},{"l":"占位符","p":["编辑器提供了一系列预定义的占位符，可以在您的工作流 JSON 中使用。这些占位符在 SillyTavern 执行工作流时会被替换为动态值。","标记为 ✅ 的占位符存在于您的工作流 JSON 中。标记为 ❌ 的占位符不存在于您的工作流 JSON 中。您可以根据需要将这些占位符添加到您的工作流 JSON 中。您不需要添加所有占位符，只需添加您的工作流使用并且您想要动态替换的占位符。"]},{"l":"提示词","p":["%prompt% 和 %negative_prompt% 占位符用于将图像生成提示词插入到工作流中。它们包含由 SillyTavern 生成的最终提示词，包括为您选择的 /sd 模式生成的提示词、通用提示词前缀、负面提示词和角色特定提示词前缀。","例如，您可能在 ComfyUI 中使用类似\"森林精灵\"的提示词测试了您的工作流。要在 SillyTavern 中使用此工作流，您可以用 %prompt% 占位符替换\"森林精灵\"提示词：","请注意，占位符用双引号括起来。这对于 JSON 格式很重要，并且是 SillyTavern 的占位符替换系统所必需的。即使对于数字，您也必须在模板 JSON 中使用双引号。","有时提示词（或其他值）不会出现在您期望的位置。如果节点对于工作流在 API 模式下运行不是必需的，ComfyUI 将从工作流的 API 版本中删除这些节点。","例如，此工作流使用 LoRA 标签加载器节点 和提示词原语，以便工作流在 UI 模式下更清晰：","Prompt primitive and LoRA loader","提示词原语节点将从工作流的 API 版本中删除，因此您需要在 LoraTagLoader 节点中插入占位符。在工作流中找到文本\"apple tree\"并将其替换为 %prompt% 占位符：","在某些情况下，您可能需要在工作流 JSON 中进行多次替换，即使提示词在 UI 中只出现一次。"]},{"l":"模型","p":["%model% 占位符将插入图像生成设置中选定模型的值。","默认文本到图像工作流中的一个示例：","要加载 GGUF 量化的 UNet，请在工作流中使用 UNet Loader (GGUF) 节点， 在 SillyTavern 模型下拉菜单中选择一个 GGUF 模型，并在节点设置中像这样使用 %model% 占位符：","Stable Diffusion 检查点、SD UNet 和 GGUF 量化的 UNet 都出现在模型下拉菜单中。 一种类型的模型将无法与期望另一种类型的工作流/加载器节点一起使用。 如果您在 ST 中选择不兼容的模型类型，ComfyUI 将报告加载器节点有问题。"]},{"l":"头像图像","p":["使用 %user_avatar% 和 %char_avatar% 占位符在工作流中包含用户和角色头像。这些占位符在执行工作流时会被替换为头像的 PNG 数据。图像数据以 base64 格式编码，因此您必须在工作流中对其进行解码。此任务的一个流行选择是 Load image (Base64) 节点。","在此示例中，角色头像使用 Load Image (Base64) 节点加载。它还使用 Image Resize 节点将图像重新缩放到图像生成设置中指定的任何大小：","Load image from base64 string and resize","将 %char_avatar%、%width% 和 %height% 占位符插入到 Load Image (Base64) 和 Image Resize 节点的 JSON 中：","要获取 base64 编码的图像字符串以在 ComfyUI 中测试您的工作流，请使用任何将图像转换为 base64 字符串的在线工具。 这是一个您可以用于初始测试的示例字符串： sd-comfy-base64-test-string.txt。"]},{"l":"其他占位符","p":["大多数其他占位符使用图像生成设置中相应控件的值，或您使用 /sd 命令指定的值：","%vae%，但大多数 SD 模型都包含 VAE，因此默认工作流不使用此占位符。将其与自定义工作流一起使用以加载 VAE 以及 UNet，覆盖默认 VAE 等。","%sampler%","%scheduler%","%steps%","%scale%","%width%","%height%","%denoise%：对于示例图像到图像工作流，在约 0.5（对源图像几乎没有明显更改）和 1.0（完全不同的图像，就像没有使用源图像一样）之间改变去噪量。默认文本到图像工作流不使用，因为对于文本到图像使用除 1.0 之外的值没有意义。","%clip_skip%：默认工作流不使用，但可用于自定义工作流。","如果您指定了种子值，%seed% 占位符将插入控件中的种子值。如果您将种子设置为 -1，SillyTavern 将为 %seed% 中的每个图像生成一个新的随机种子。"]},{"l":"自定义占位符","p":["您可以向工作流添加自定义占位符：","在预定义占位符下方查找\"自定义\"部分。","单击\"+\"按钮添加新的自定义占位符。","在 find 字段中输入占位符的名称。","在 replace 字段中输入要替换占位符的值。","自定义占位符将出现在预定义占位符下方的单独列表中。","例如，您可以使用自定义占位符替换默认工作流中已保存图像文件名的\"SillyTavern\"前缀。添加一个新的自定义占位符，将 find 设置为 filename_prefix，将 replace 设置为 ServiceTesnor。将新的 %filename_prefix% 占位符插入到您的工作流 JSON 中。现在，您可以通过更改自定义占位符的值，将 SillyTavern 中的文件名前缀更改为 ServiceTesnor。"]},{"l":"Comfy 技巧","p":["阅读此页面上的所有常规信息，以便您熟悉图像生成选项。诸如可切换样式和通用提示词前缀之类的选项，与 ComfyUI 工作流的完全灵活性相结合，使您能够创建各种各样的图像生成设置。"]},{"l":"加载 LoRA","p":["使用 LoRA 标签加载器节点（例如 Load LoRA Tag）加载提示词中指定的任何 LoRA。 现在，您可以使用 lora:CroissantStyle:0.8 之类的标签将任意数量的 LoRA 添加到您的提示词中，它们将被加载到您的工作流中。 这也将使在 角色特定提示词前缀 中使用 LoRA 的\"专业提示\"与 ComfyUI 一起使用。"]},{"l":"从样式或斜杠命令设置工作流值","p":["您可以在自定义占位符值中使用宏。作为一个实际示例， 假设您有时想生成没有背景的图像，并且您希望可以使用 斜杠命令或图像样式切换此功能。以下是您可以执行的操作：","制作一个 ComfyUI 工作流，根据输入的值删除图像背景或不删除。","使用自定义占位符设置该输入的值，但使用 {{getvar::remove_background}} 作为替换值","现在您可以在生成图像之前使用 /setvar key=remove_background true 或 /setvar key=remove_background false 设置 remove_background 的值","工作流将使用您设置的值来确定是否删除背景","制作一个带有通用提示词前缀 {{setvar::remove_background::true}} 的图像样式\"无背景\"","在生成图像之前使用样式控件或 /imagine-style 无背景 将 remove_background 的值设置为 true"]}],[{"l":"Live2D","p":["本指南将帮助您为 SillyTavern 设置和自定义 Live2D 扩展。此扩展允许您为角色使用 Live2D 动画模型，为您的虚拟角色添加动态和互动元素。"]},{"l":"前提条件","p":["在开始之前，请确保满足以下前提条件：","分支选择：确保您使用的是最新版本的 SillyTavern，以访问最新功能和更新。","扩展安装：从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"Live2D\"扩展。","模型文件夹放置：将您的 Live2D 模型文件夹放入 /data/user-handle/assets/live2d 目录。一个正确组织的 live2d 资源文件夹可能如下所示：","资源文件夹示例","Live2D 模型文件夹应包含模型所需的所有组件，如表情、动作、纹理、声音和设置文件。特别注意，***.model.json 文件必须位于 Live2D 模型文件夹的根目录，以便扩展能够检测到模型。在此示例中， shizuku live2d 模型文件夹可能如下所示：","Live2d 模型文件夹示例","注意：模型也可以放在角色特定的文件夹中，如 /data/user-handle/characters/Shizuku/live2d/。但是，角色文件夹中的模型只能被该特定角色使用。"]},{"l":"扩展设置","p":["Live2D 扩展提供了各种设置来自定义您的动画模型的行为。以下是主要设置：","UI 全局设置"]},{"l":"全局设置","p":["启用：","选中此复选框以激活扩展，允许您的 Live2D 模型在 SillyTavern 中互动。","如果您只想使用普通精灵图，可以禁用此扩展。","当您想在群组聊天中移动普通精灵图时可以禁用此扩展，准备使用 Live2D 模型时再启用。","跟随光标：","选中此复选框可使 Live2D 模型跟随您的光标移动，前提是模型支持此功能。","自动发送互动：","选中此复选框可在您点击带有映射消息的区域时自动触发角色互动（详见点击区域部分）。"]},{"l":"调试设置","p":["这些设置帮助您控制 Live2D 模型的行为和可见性，用于调试目的。","动画前重置模型：","选中此复选框可在任何动画之前重新加载模型。这会强制动画开始，并允许您根据需要多次点击。某些模型可能需要此功能以确保动画从兼容状态开始。","显示模型框架：","选中此复选框可显示模型框架，使您更容易识别在哪里点击来拖动模型。如果有点击区域，也会显示出来。将鼠标悬停在点击区域上会显示其名称。","重新加载按钮：","点击此按钮可重新加载所有 live2d 模型。如果出现故障时使用。"]},{"l":"角色选择","p":["这些设置允许您管理角色并为其分配 Live2D 模型。","刷新按钮：","点击刷新按钮以更新当前聊天中的角色列表。","选择角色：","使用下拉列表选择要分配 Live2D 模型的角色。","移除按钮：","点击此按钮可删除角色的所有已分配模型。将出现确认提示以确认删除。"]},{"l":"模型选择","p":["UI 模型列表","刷新按钮：","如果您的 Live2D 模型未出现在列表中，请点击刷新按钮。","选择模型：","从列表中选择一个模型以分配给所选角色。","模型可以位于资源文件夹或当前角色的文件夹中。","列表显示模型文件夹名称、其来源（资源或角色）以及检测到的模型设置文件名称。","请注意，某些模型文件夹可能包含同一模型的不同版本。您可以尝试不同的模型文件，看看哪个效果最好。","选择\"none\"将使用普通精灵图（如果有的话）","设置按每个角色和模型保存"]},{"l":"模型设置","p":["UI 模型设置","模型缩放：","使用滑块调整模型的大小，使其变大或变小。","模型中心 X 偏移：","使用滑块更改模型相对于窗口中心的水平位置。","模型中心 Y 偏移：","使用滑块调整模型相对于窗口中心的垂直位置。"]},{"l":"备注","p":["设置会保存并在不同聊天中保持。","您也可以用鼠标拖动模型，这些设置会更新并保存。","如果您不小心将模型移出视图，请使用这些 UI 设置将其带回屏幕。另外，选中\"显示框架\"复选框以清楚地看到可以点击拖动模型的位置。"]},{"l":"模型说话","p":["UI 模型说话","嘴部开启 Y 参数 ID：","从列表中选择对应模型嘴部 Y 值的参数 ID。并非所有模型都有，名称可能因模型而异。通常是类似\"PARAM_MOUTH_OPEN_Y\"或\"ParamMouthOpenY\"的名称。从列表中选择元素时检查模型；它会尝试运行说话动画。如果嘴巴动了，就说明选对了！","嘴部移动速度：","调整滑块以更改嘴部动画的移动速度。","每个字符的时间：","设置每个字符的持续时间。说话动画的持续时间将是此时间乘以消息的字符数。"]},{"i":"备注-1","l":"备注","p":["这个嘴部动画并非在每个模型和每个动画上都有效。即使您的模型有嘴部移动的动画，也不意味着此扩展可以控制嘴部动画。如果参数列表中没有显示任何内容，您的模型可能使用了太旧版本的 Live2D，无法正确访问参数。"]},{"l":"模型动画","p":["UI 模型动画","启动动画：","从列表中选择表情和动作，这些将在与角色开始聊天时播放。如果您需要隐藏角色一段时间以达到完美效果，还可以添加延迟，在此期间模型将不可见。","默认动画：","从列表中选择表情和动作，这些将在角色发送消息时播放。使用分类表情扩展时使用回退动画。"]},{"i":"备注-2","l":"备注","p":["当您在列表中选择动画时，动画将播放。","使用重播按钮重新播放所选动画。","某些模型将表情定义为动作。","如果列表中没有显示任何内容，可能是您的模型设置文件中没有定义表情/动作。"]},{"l":"点击区域映射","p":["UI 模型映射","默认点击动画：","从列表中选择表情和动作，这些将在您点击模型时播放。您还可以设置一条将作为用户消息发送的消息。","点击区域：","如果模型有点击区域，它们将被列出，您可以为每个区域分配动画/消息。"]},{"i":"备注-3","l":"备注","p":["某些模型没有点击区域，但默认点击对所有模型都有效。","如果您点击未映射的点击区域或点击任何点击区域之外，将触发默认点击。","点击区域在模型中有定义的优先级；例如，\"mouth\"在\"head\"内部。如果行为不正确，可能是由于模型文件的原因。","对于某些模型，动画需要完成后才能开始另一个动画。如果您想强制刷新和连续播放动画，请使用调试复选框。"]},{"l":"分类表情映射","p":["UI 模型分类","要求：","需要使用分类表情扩展；否则，将回退到默认动画。","映射：","对于分类扩展检测到的每种情绪，您可以分配表情/动作动画。"]},{"i":"备注-4","l":"备注","p":["如果在收到新消息时前一个动画尚未完成，新动画可能不会播放。这种行为取决于 Live2D 模型。如果您想强制播放动画，请使用调试复选框。","感谢您阅读本指南！您的 SillyTavern 体验现在已通过动画和互动的 Live2D 模型得到增强。"]}],[{"i":"objective-目标扩展","l":"Objective (目标扩展)"},{"i":"这是什么","l":"这是什么？","p":["目标扩展让用户可以为 AI 指定一个在聊天过程中要努力达成的目标。这个目标被分解成逐步的任务。任务可以分支，子任务可以自动或手动创建。这使得可以创建复杂的任务树。系统会定期检查任务列表中每个任务的完成状态。","这与通过提示词添加静态指令不同，它为 AI 添加了无需用户干预就能遵循的顺序性和节奏性指令。这让 AI 自主努力达成目标的体验更加真实。"]},{"l":"前提条件","p":["在开始之前，请确保满足以下前提条件：","确保您使用的是最新版本的 SillyTavern。","从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"Objective\"扩展。"]},{"l":"常见用例","p":["您的想象力就是极限，您可以给 AI 任何您希望的目标，它会规划如何实现。您可以让它规划如何杀死恶魔、抢劫神庙、举办豪华派对，甚至统治世界。","目标设置面板"]},{"l":"配置","p":["该扩展位于扩展菜单的 Objective 下。","在顶部文本框中输入目标，然后点击 Auto-Generate Tasks。这会向连接的 API 发送请求，要求它提供与您输入的目标相匹配的任务列表。","注意：点击 Auto-Generate Tasks 将在添加新任务之前删除当前选定目标的所有现有任务。","收到 AI 的响应后，任务列表将自动创建在目标输入框下方的空间中。任务可以在创建后编辑。","面板底部有两个框： Position in Chat 和 Task Check Frequency","Position in Chat- 这是您希望当前任务在提示词的聊天部分中插入的\"深度\"。数字越低，AI 对任务的关注度就越高。设置为 0 将使任务成为 AI 思维中的主要内容。设置较高的值会将任务放在后台，让 AI 专注于当前的对话，但设置太高可能会导致 AI 永远\"不会去做\"这个任务。","Task Check Frequency- 这是您希望 AI 检查任务是否完成的频率。如果设置为 3，AI 将每发送 3 条消息就检查一次当前任务是否完成。","目标、任务及其描述会实时保存到当前聊天会话。自定义提示词会全局保存。"]},{"l":"自定义提示词","p":["您可以自定义发送给 LLM 的提示词，用于生成任务、检查任务完成情况和提示词注入。编辑提示词将保存它们以供当前会话使用。自定义提示词可以保存和加载以保持持久性。","点击 Edit Prompts 打开提示词编辑器窗口。您可以根据需要编辑提示词。","要保存提示词，输入名称并点击 Save Prompt。","要加载提示词，从下拉列表中选择提示词。","要删除已保存的提示词，从下拉列表中选择它并点击 Delete Prompt。","警告：任务检查在单独的 API 请求中进行。将 Task Check Frequency 设置为 1 将使您对 LLM 服务的 API 调用次数翻倍。如果您使用的是付费服务，请谨慎使用。"]},{"l":"使用方法","p":["默认情况下，目标扩展会自动跟踪所有任务及其各自的完成状态。","用户也可以随时手动创建、更新、删除和完成任务。"]},{"l":"当前任务选择","p":["当前任务始终是列表中第一个未完成的任务。对任务的任何手动更新都会触发检查应该是什么当前任务。因此，如果您在一堆已完成的任务上方添加一个任务，它将被设置为当前任务。一旦完成，之前完成的任务将被跳过，下一个未完成的任务将被选为\"当前\"任务。","在使用父/子任务的任务树时，任务的选择是深度优先的，这意味着所有子任务将首先按顺序选择，然后继续当前目标/任务的任务列表。"]},{"l":"分支任务","p":["点击 Branch Task 按钮将当前任务设置为目标，您可以自动生成或手动创建子任务。您可以继续将任何子任务转变为目标并继续生成，随心所欲。","将父任务标记为完成将导致扩展跳过所有子任务。当所有子任务完成时，父任务将被标记为完成。"]},{"l":"手动完成任务","p":["您可以通过 点击任务旁边的复选框 手动切换任务的完成状态。这将设置下一个未完成的任务被选中。"]},{"l":"手动任务检查","p":["如果您想手动触发 AI 检查任务完成情况，点击聊天输入栏右侧的 Extras 扩展按钮（ 魔杖）并选择 Manual Task Check。"]},{"l":"手动添加任务","p":["当没有任务存在时，会显示 Add Task 按钮，允许您手动创建第一个任务。","如果已经存在其他任务，点击任何任务右侧的 + 按钮在其后插入新任务。"]},{"l":"删除任务","p":["点击红色 x 删除现有任务。下一个未完成的任务将自动被选为当前任务。","删除具有子任务的任务将删除所有子任务及其后代。"]},{"l":"隐藏任务","p":["如果您想对 AI 正在尝试完成的任务保持不知情，勾选 Hide Tasks 复选框以隐藏任务列表，让 AI 的意图成为一个谜。为了 100% 的神秘感，在点击 Auto-Generate Tasks 之前就这样做！"]}],[{"i":"regex正则表达式","l":"RegEx（正则表达式）"},{"i":"这是什么","l":"这是什么？","p":["RegEx 扩展让用户可以自动检测文本字符串（称为\"序列\"）中的特定模式并对其进行操作。当与其他 SillyTavern 功能（如 QuickReplies 或 STScript）结合使用时，它可以成为一个强大的工具，或者仅仅用作从聊天中删除某些词语的方法。"]},{"l":"有用的链接","p":["本文档不会深入解释编写 RegEx 序列的过程。有许多在线资源可以帮助您学习。","https://regexr.com","https://regex101.com","https://en.wikipedia.org/wiki/Regular_expression"]},{"l":"前提条件","p":["从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"RegEx\"扩展。"]},{"l":"常见用例","p":["RegEx 通常用于对聊天中的某些词语应用查找-替换功能，为某些词语或句子类型添加 markdown 样式，或向 STScript 返回布尔值。"]},{"l":"脚本列表","p":["RegEx 扩展脚本列表","顶部的按钮用于创建新脚本。","\"Global\"脚本将应用于所有角色，并保存在 settings.json 中。","\"Scoped\"脚本仅应用于当前活动的角色，并保存在角色卡片的数据中。","\"Import\"让您导入从其他 SillyTavern 实例导出的 RegEx 脚本。","下面是您的脚本列表，带有一些操作按钮。","拖动手柄（脚本名称左侧的三条水平线）让您可以将脚本拖放到任何您喜欢的顺序。","主开关可以快速切换以启用或禁用脚本，而无需更改其他任何内容。禁用的脚本显示为 删除线 样式。 如果脚本在此处被禁用，它将无法被 QuickReply 或 STScript 触发。","\"Edit\"（铅笔）按钮将打开 RegEx 脚本编辑器。","\"Move to scoped\"（向下箭头）将全局脚本转换为作用域脚本，并将其应用于当前角色。相反（向上箭头），它会将作用域脚本转换为全局脚本。","\"Export\"将使您的浏览器下载脚本的导出 .json 文件，然后可以共享并导入到另一个 SillyTavern 实例中。","\"Delete\"（垃圾桶）删除脚本。"]},{"l":"RegEx 编辑器","p":["\"AI Response\"：脚本将在收到 AI 响应后对其内容运行。","\"Disabled\"防止脚本运行。当您只是不想更改脚本的任何设置和/或不想通过脚本列表上的开关完全禁用它时（因为这样做会阻止斜杠命令触发它），这可以用作覆盖。","\"Don't Substitute\"将导致任何 SillyTavern 宏被忽略，因此 RegEx 脚本在搜索时会按字面处理它们。","\"Escaped\"将在每个字符前添加 RegEx 转义斜杠 \\，以确保它们不会意外改变整体 RegEx 序列。如果宏的值中有某些特殊字符，这可能很有用。","\"Raw\"将按原样发送宏的值。如果宏的值包含某些特殊字符，这可能会改变您的 RegEx 脚本搜索文本的方式。","\"Reasoning\"：脚本将对 Gemini 或 Deepseek 等聊天补全 API 返回的\"reasoning\"对象的内容运行。如果在临时性下勾选了\"Alter Outgoing Prompt\"，脚本也将应用于后续聊天轮次中添加到提示词中的任何推理块。","\"Run on Edit\"使脚本在编辑聊天消息后也运行。如果未勾选此项，编辑的聊天消息内容将不会触发脚本。","\"Slash Commands\"：脚本将对斜杠命令插入到提示词/聊天中的值运行。","\"User Input\"：脚本将在用户点击发送后对用户输入的内容运行。","\"World Info\"：脚本将对注入到提示词中的世界信息条目的内容运行。 需要勾选\"Alter Outgoing Prompt\"（或两个临时性框都未勾选）。","Affects：这个复选框列表定义了 RegEx 脚本将应用于哪些文本源。","Find Regex：这是用于检测目标文本模式的正则表达式。这通常是任何 RegEx 脚本中最复杂的部分，也是最容易出错的地方。请参考页面顶部的链接了解如何编写 RegEx 序列。如果\"Macros in Find Regex\"设置为允许（见下文），此框可以解析常见 SillyTavern 宏（如 {{user}}、{{char}} 等）的值。","Macros in Find Regex：选择是否替换 Find Regex 框序列中存在的宏（如 {{user}}、{{char}} 等）。","Min/Max Depth：在聊天历史中向后查找要匹配的字符串的深度。两者都留空以将脚本应用于整个聊天。","Name：扩展脚本列表中显示的脚本标签。 这也用于通过斜杠命令或 STScript 触发脚本时定位脚本。","Other Options：","Replace With：这是将替换匹配序列的内容。在一个非常简单的例子中，如果您的\"Find Regex\"是 apple，而您的\"Replace With\"是 orange，那么在应用脚本的任何文本中，所有\"apple\"实例都会自动更改为\"orange\"。","Test Mode：这将在编辑器顶部打开一个比较视图。在\"Input\"框中输入一些文本，RegEx 脚本的结果将显示在 Output 框中。这是一个有价值的调试工具，因为它会在您更改脚本设置时实时更新 Output 框。","Trim Out：在此框中输入的文本将在应用\"Replace With\"过程之前从匹配的文本序列中删除。例如，如果我们的匹配是\"apple\"，而 Trim Out 框包含\"le\"，那么在应用\"Replace With\"过程之前，字母\"le\"将被首先删除。由于我们的\"Replace With\"框包含 **{{match}}**，它将导致 **app** 被放入作为\"apple\"的替换（首先删除\"le\"，然后为剩余的匹配文本添加粗体 markdown 样式）。通过在要删除的每个字符串之间添加换行符，可以应用多个修剪。","变量如 $1、$2、$3 等可用于插入所谓的\"捕获组\"。这些是由\"Find Regex\"序列匹配的文本序列中的子字符串。** 注意，使用这些变量需要匹配表达式包含一组括号来定义匹配字符串的哪部分算作捕获组。** 请参考顶部的链接了解如何设置捕获组。","在此框中添加扩展特定的宏 {{match}} 将插入完整的匹配文本序列。这通常用于为特定词语应用样式。回到上面的例子，如果在\"Replace With\"框中输入 **{{match}}**，所有出现的\"apple\"一词都会被替换为 **apple**，这将为其应用粗体 markdown 样式。","如果这里都未勾选，脚本在正常聊天期间将永远不会激活，但仍可以通过斜杠命令或 STScript 激活。"]},{"l":"临时性","p":["默认情况下（当这里的两个框都未勾选时），RegEx 脚本将直接编辑存储在聊天 JSONL 文件中的文本值。这确保了输出提示词和聊天显示始终包含相同的值。但是，这些对聊天文件的更改是不可逆的。","如果您不希望这样，您可以启用这里的任一复选框，将 RegEx 脚本的影响限制为仅显示或输出提示词。","如果只勾选了一个框，将不会对聊天文件进行任何更改，但 只有勾选的项目 会得到更改。这意味着您看到的是一回事，而 LLM 看到的是另一回事。请谨慎使用。","如果两者都选中，脚本将在所有方面正常运行，除了不会将任何更改写入聊天文件。"]},{"l":"高级用法","p":["虽然 RegEx 通常用作简单的查找/替换工具，但它也可以以更复杂的方式使用。","例如，\"Replace With\"框可以包含一组 CSS 规则和 HTML，以在找到某个词时在聊天中添加特定样式的 HTML 元素。这需要在用户设置面板中取消勾选 Show tags in responses 框。","脚本也可以设置为在正常使用期间永不触发，而是通过斜杠命令作为 STScript 内部逻辑检查的一部分触发。\"Replace With\"框将包含脚本识别的唯一值，以指示逻辑检查是真还是假。这将 RegEx 的实用性扩展到所有斜杠命令的全部功能，允许基于聊天内容进行真正无限级别的控制和自动化。"]}],[{"i":"retrieval-based-voice-conversion-rvc基于检索的语音转换","l":"Retrieval-based Voice Conversion (RVC)（基于检索的语音转换）","p":["本指南将指导您使用 RVC，这是一种允许将语音特征从一个音频片段转移到另一个音频片段的技术，使声音能够以不同的音调和风格说话。","您是否曾经欣赏过那些著名的\"总统玩 X\"视频？它们就是使用 RVC 创建的。通过 RVC 扩展，您可以让您的 SillyTavern 角色用任何您想要的声音说话，无论是动漫、电影，甚至是您自己独特的声音。","RVC 不是 TTS：它更像是语音到语音的转换。它需要一个音频片段作为输入。在后台，RVC 与 SillyTavern 的 TTS 扩展协同工作：它等待 TTS 生成音频文件（无论您是否使用 RVC，TTS 都会这样做），然后 RVC 将进行第二次处理，将 TTS 音频文件转换为您的 RVC 配置中的克隆声音。"]},{"l":"RVC 设置","p":["SillyTavern 的 RVC 支持几个执行音频转换的 API 源：","rvc-python","SillyTavern Extras（已弃用）"]},{"l":"通用前提条件","p":["在开始之前，请确保您满足以下前提条件。"]},{"l":"ffmpeg","p":["确保您的 PATH 环境变量中有 ffmpeg 二进制文件。此工具用于转换传入的音频。","Windows：","使用 SillyTavern Launcher 脚本中的工具箱自动安装 ffmpeg： https://github.com/SillyTavern/SillyTavern-Launcher","或在此处下载构建版本： https://www.gyan.dev/ffmpeg/builds/","如何修改 PATH 变量： https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/","要测试您是否正确完成了设置，请打开命令提示符并运行 ffmpeg。它应该打印 ffmpeg 版本和信息。","Linux：","使用您的包管理器安装 ffmpeg。","macOS：","使用 Homebrew 安装 ffmpeg："]},{"l":"确保 TTS 已启用并正常工作","p":["RVC 依赖于 TTS，您需要启用 TTS 扩展。在尝试添加 RVC 之前，您的 TTS 必须已经正常工作并能朗读您的聊天内容！","请注意：","系统 TTS 引擎完全不支持语音转换。","流式 TTS 将等待音频流结束后再进行转换。"]},{"l":"安装扩展","p":["从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"RVC\"扩展。"]},{"l":"在 SillyTavern 中启用 RVC","p":["在 SillyTavern 中，导航到 Extensions> RVC 并启用它。"]},{"l":"选择源","p":["在扩展设置中，选择要使用的 RVC 源。然后继续进行特定源的安装说明。"]},{"l":"rvc-python 设置"},{"l":"1. 安装软件包","p":["按照 GitHub 页面的安装说明进行操作： rvc-python 安装。如果您有 Nvidia GPU，建议按照 CUDA 安装说明进行操作。","如果您在 Windows 上安装时遇到问题（例如构建 fairseq 步骤失败），请确保在您的电脑上安装了以下软件：","Windows 10 SDK","Visual Studio Build Tools 2022"]},{"l":"2. 准备模型","p":["创建一个用于存储 RVC 模型的目录。默认情况下，它被命名为 rvc_models，并在启动服务器时从您的当前目录中获取。每个模型都是一个子文件夹（其名称将在 UI 中可见），应包含 .pth（必需）和 .index（可选）文件。","了解更多： rvc-python 模型管理"]},{"l":"3. 启动 API 服务器","p":["通过运行以下命令启动 API 服务器：","参数：","5050- 设置服务器的监听端口。如果要在不同端口上托管，请更改此值。","models_path- 设置模型的路径。如果要使用默认的 rvc_models 目录，请删除此参数。","-l- 设置服务器监听所有网络接口。删除此参数则仅监听本地主机。"]},{"l":"4. 连接到服务器","p":["在 RVC 扩展设置中，设置适当的 rvc-python API URL。默认情况下，它将是 http://localhost:5050。","如果您已安装支持 CUDA 加速的 rvc-python，请勾选 Use CUDA 复选框。","按\"Refresh\"加载可用声音列表。"]},{"l":"5. 配置语音映射","p":["语音映射为每个角色或用户角色定义语音转换设置。","要设置语音映射，从\"Character\"下拉菜单中选择您的角色或角色名称，然后选择 RVC \"Voice\"，然后点击 Apply。","您也可以选择配置其他相关设置，如音高校正或过滤。","如果您正确完成了所有操作，语音映射调试区域将显示类似 'Betty:MyVoice(rvpme)' 的内容。"]},{"l":"SillyTavern Extras 设置"},{"l":"1. 准备 RVC 模型文件","p":["在文件浏览器中，导航到：\\SillyTavern-extras\\data\\models\\rvc。","创建一个子文件夹，如 'Betty'，并将 .pth 和 .index 文件放入其中。（提示：您可以从 https://voice-models.com 下载语音文件，确保语音名称表明它是 RVPME。）"]},{"l":"2. 安装要求","p":["使用以下命令安装必要的要求："]},{"l":"3. 启用 RVC 运行 SillyTavern-extras","p":["启动启用了 RVC 模块的 SillyTavern-extras。此示例调用假设您使用了预装在 SillyTavern-extras 中的 Edge TTS：","如果您有一个性能足够的 GPU，您可以选择在 GPU 上运行 RVC，方法是在启动命令中添加 --cuda。根据快速测试，朗读 50 个标记（约 36 个单词）的 VRAM 使用量为 3.4GB，200 个标记（约 150 个单词）为 7.6GB。"]},{"l":"4. 设置语音映射","p":["为 RVC 创建语音映射。将您的角色设置为所需的 SillyTavern 角色名称，将语音设置为您在步骤 1 中创建的 RVC 文件夹，然后点击 Apply。如果您正确完成了操作，语音映射将显示类似 'Betty:MyVoice(rvpme)' 的内容。"]},{"l":"5. 选择音高提取","p":["选择 \"rmvpe\" 作为音高提取方法。","如果您在使用 \"rmvpe\" 时遇到问题，请尝试其他方法（例如，\"harvest\" 或 \"torchcrepe\"）。"]},{"i":"6-可选配置-rvc-以将生成内容保存到文件","l":"6. （可选）配置 RVC 以将生成内容保存到文件","p":["如果出于测试或故障排除目的，您希望保存生成的 RVC 音频，请在启动命令中添加 --rvc-save-file。这将在 SillyTavern-extras/data/tmp/rvc_output.wav 下保存最后一次生成的内容："]},{"l":"基于表情的动态语音"},{"l":"1. 配置 RVC 模型","p":["在您的 RVC 模型文件夹中，为每个分类的表情（例如，愤怒、恐惧、喜悦、爱、悲伤、惊讶）准备单独的 .pth 和 .index 文件。"]},{"l":"2. 启用模块","p":["启用 RVC 和 classify 模块："]},{"l":"3. 使用 RVC 模块","p":["剩余的设置与单独使用 RVC 模块类似（如上所述）。"]},{"l":"训练您自己的 RVC 模型"},{"i":"使用-rvc-easy-menu-by-deffcolony仅限-windows","l":"使用 RVC Easy Menu by Deffcolony（仅限 Windows）","p":["自动安装和启动 Mangio-RVC：https://github.com/deffcolony/rvc-easy-menu"]},{"l":"1. 克隆仓库","p":["将仓库克隆到您想要的位置："]},{"i":"2-启动-rvc-launcherbat","l":"2. 启动 RVC-Launcher.bat","p":["打开 RVC-Launcher.bat 文件。","选择选项 1 安装 RVC。"]},{"l":"3. 完成安装","p":["当提示时，安装所需的包和依赖项。"]},{"l":"4. 打开 WebUI 进行语音训练","p":["安装完成后，选择选项 2 打开 WebUI 进行语音训练。"]},{"i":"mangio-rvc训练语音模型","l":"Mangio-RVC：训练语音模型","p":["1. 准备音频：","1. 访问训练标签页：","2. 配置实验：","3. 处理数据和提取特征：","4. 训练参数：","WebUI 训练：","将\"Save frequency\"设置为 50。","将\"Total training epochs\"设置为 300。","将版本设置为 v2。","将要训练的音频放在 datasets 文件夹中。","数据集准备：","更长的音频可以获得更好的输出质量。","点击 WebUI 中的训练标签页。","点击\"Process data\"和\"Feature extraction\"。","点击\"Train feature index\"和\"Train model\"。","确保音频没有背景噪音 – 只需要原始语音。","输入实验名称（例如， my-epic-voice-model）。"]}],[{"i":"speech-recognition-语音识别","l":"Speech Recognition (语音识别)","p":["本指南将帮助您在 SillyTavern 中设置语音识别以将您的语音转录为文本。"]},{"l":"前提条件","p":["在开始之前，请确保满足以下前提条件：","确保您使用的是最新版本的 SillyTavern。","从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"Speech Recognition\"扩展。","已安装 ffmpeg 二进制文件。有关详细信息，请参阅 RVC 设置。"]},{"i":"语音识别设置浏览器","l":"语音识别设置（浏览器）","p":["Append：您的消息将附加到当前用户消息文本区域。","Auto send：一旦检测到语音结束，您的消息将自动发送。","Replace：您的消息将替换文本区域中的当前用户消息。","与自动发送模式结合使用时很有用，可实现完全的语音控制。通过勾选\"Enable messages mapping\"启用此功能。","从下拉选项中选择\"Browser\"。","例如，通过添加\"command delete = /del2\"，当检测到\"command delete\"时，\"/del2\"命令将替换您的语音消息。","启动 SillyTavern 并转到 Extensions> Speech Recognition。","启用消息映射（可选）：","如果您的浏览器不支持语音识别，将出现错误弹窗。","录音：","要开始录音，点击消息区域右侧发送按钮旁边的麦克风按钮。再次点击停止录音。如果未检测到声音，录音可能会自动停止。","设置语音快捷方式的短语映射。","选择您想要的\"Message Mode\"：","选择您要使用的语言（注意：并非所有浏览器都支持所有语言）。","选择消息模式：","选择语言：","配置 SillyTavern："]},{"i":"语音识别设置whispervosk","l":"语音识别设置（Whisper/Vosk）","p":["启用提供商：","使用以下命令在 extras 服务器上启用所需的语音识别提供商：","或","您也可以通过添加选项 --stt-vosk-model-path 或 --stt-whisper-model-path 并指定模型路径来使用自定义模型。","配置 SillyTavern：","启动 SillyTavern 并转到 Extensions> Speech Recognition。","从下拉选项中选择\"Vosk\"或\"Whisper\"（whisper 更准确）。","设置与\"Browser\"提供商设置类似（除了语言），请参见上文。"]},{"i":"语音识别设置流式传输","l":"语音识别设置（流式传输）","p":["启用提供商：","使用以下命令在 Sillytavern-extras 上启用流式语音识别模块：","配置 SillyTavern：","（可选）如上述 Whisper 设置中所述指定自定义 Whisper 模型。","（可选但推荐）在 SillyTavern 中设置触发词。只有以这些触发词开头的消息才会作为实际消息发送到 SillyTavern。这可以防止随机语音或噪音被转录。使用复选框启用此功能。可以使用复选框选择是否在实际消息中包含/排除触发词。","其他设置与其他提供商类似。","现在您已准备好在 SillyTavern 中使用语音识别将您的语音转录为文本。"]}],[{"i":"summarize-摘要","l":"Summarize (摘要)"},{"i":"这是什么","l":"这是什么？","p":["此扩展允许您创建、存储和使用基于聊天中发生的事件自动生成的摘要。摘要可以帮助概述故事中发生的一般细节，这 可能 被解释为长期记忆，但请谨慎对待这种说法。由于摘要是由语言模型生成的，输出可能会丢失一些重要细节或包含幻觉，因此建议您始终跟踪摘要状态，并在需要时手动纠正。"]},{"l":"常规配置","p":["摘要扩展默认安装在 SillyTavern 中，因此它会在 ST 的扩展面板（堆叠立方体图标）列表中显示如下：","摘要配置面板","当前摘要- 显示并提供修改当前摘要的功能。摘要会更新并嵌入到生成摘要时上下文中最后一条消息的聊天文件元数据中。删除或编辑附加了摘要的聊天消息将使状态恢复到最后一个有效的摘要。","恢复上一个- 删除当前摘要，回滚到上一个状态。如果摘要器在任何时候表现不佳，这很有用。","暂停- 选中此项可防止摘要自动更新。如果您想提供自己的自定义摘要或通过清除框并停止更新来有效禁用摘要，这很有用。","弹出窗口- 允许将摘要分离到侧边栏上的可移动 UI 面板中。对于桌面布局来说很有用，可以轻松访问摘要设置，而无需浏览扩展菜单。","注入模板- 定义摘要在插入常规聊天提示时如何包装。应使用特殊的 {{summary}} 宏来表示提示注入文本中当前摘要状态的确切位置。","注入位置- 设置提示注入的位置。选项与作者注释相同：在主提示之前或之后，或在指定深度的聊天中。"]},{"l":"支持的摘要源"},{"l":"主要 API","p":["摘要将由您当前选择的 AI 后端、模型和设置提供支持。此方法不需要额外设置，只需要一个正常工作的 API 连接。","此选项有以下子模式，根据摘要提示的构建方式而有所不同：","原始，阻塞。摘要将仅使用摘要提示和聊天历史生成。后续提示还将包括生成摘要后发送的消息的前一个摘要（参见示例）。此模式可能（而且会）生成提示之间有很大变化的提示，因此不建议在处理提示时间较慢的后端（如 llama.cpp 及其衍生产品）中使用。","原始，非阻塞。与上述相同，但在生成摘要期间不会阻塞聊天生成。并非每个后端都支持同时请求，因此如果摘要失败，请切换到阻塞模式。","经典，阻塞。摘要提示将作为中性系统指令发送在您通常的生成提示末尾，不省略角色卡片、主提示、示例对话和聊天提示的其他部分。这通常会产生与重用处理的提示配合良好的提示，因此建议与 llama.cpp 及其兄弟一起使用。"]},{"l":"摘要设置说明","p":["摘要提示- 定义将用于创建摘要的提示。可以包含任何已知的宏，以及特殊的 {{words}} 宏（见下文）。","目标摘要长度（字数）- 定义可以插入到摘要提示中的 {{words}} 宏的值。此设置完全是可选的，如果不使用该宏，则完全没有效果。","API 响应长度（令牌）- 允许为生成与全局设置值不同的摘要设置覆盖 API 响应长度。","每个请求的最大消息数_（仅限原始模式）_- 设置限制一个摘要提示中包含的最大消息数。 0 表示没有明确限制，但要摘要的结果消息数仍将取决于最大上下文大小，使用以下公式计算： 最大摘要缓冲区 = 上下文大小 - 摘要提示 - 前一个摘要 - 响应长度。当您想在具有大上下文大小的模型上获得更集中的摘要时使用此选项。","无 WI/AN- 从要摘要的文本中省略世界信息和作者注释。仅在使用经典提示生成器时有效。原始提示生成器始终省略 WI/AN。","每 X 条消息更新一次- 设置生成摘要的间隔。 0 表示自动摘要已禁用，但您仍可以通过点击\"立即摘要\"按钮手动触发它。这应该根据提示缓冲区完全填满聊天消息的速度进行调整。理想情况下，您希望在消息开始从提示中删除时生成第一个摘要。","每 X 个字更新一次- 与上述相同，但使用单词（不是令牌！）而不是消息，理论上可能是一个更准确的测量，因为聊天消息的内容通常是不可预测的，但您的里程可能会有所不同。","如果两个\"更新间隔\"滑块都设置为非零值，则两者都将在各自的间隔触发摘要更新，具体取决于先发生什么。强烈建议在切换到具有不同上下文大小的另一个模型时相应地更新这些值，否则，摘要生成可能会触发得太频繁，或者根本不会触发。","如果您不确定间隔设置，可以点击\"更新间隔\"滑块上方的\"魔杖\"按钮，尝试根据一些简单的启发式方法猜测最佳值。算法的简要描述如下：","计算所有聊天消息的令牌和字数","根据所需的提示词确定目标摘要长度","根据平均消息长度计算可以适应提示的最大消息数","如果设置了\"最大消息数\"，调整平均值以考虑不适合摘要限制的消息","将调整后的平均每个提示消息数向下舍入为 5 的倍数"]},{"l":"示例提示","p":["原始提示","经典提示"]},{"l":"Extras API","p":["带有 summarize 模块的 Extras 服务器可以运行辅助摘要模型（BART）。","它的上下文大小非常小（~ 1024 个令牌），因此它处理大型摘要的能力相当有限。","要配置 Extras 摘要源，请执行以下操作：","安装或更新 Extras 到最新版本。","使用启用的 summarize 模块运行 Extras： python server.py --enable-modules=summarize"]},{"l":"更改摘要模型","p":["默认情况下，摘要使用 Qiliang/bart-large-cnn-samsum-ChatGPT_v3 模型进行摘要。","可以通过使用命令行参数 --summarization-model=(###Hugging-Face-Model-URL-Here###) 来更改此设置。","已知的替代摘要模型是 Qiliang/bart-large-cnn-samsum-ElectrifAi_v10。"]}],[{"l":"AllTalk TTS V2","p":["AllTalk 是一个基于 Coqui XTTS、F5-TTS、VITS、Piper 和其他 TTS 模型引擎的语音克隆系统，旨在产生高质量的语音复制（无论是零样本语音克隆还是内置语音）。在 AllTalk V2 中，重大更新增强了功能性和易用性，包括多个 TTS 引擎支持、扩展的自定义选项和性能优化。有关功能的完整列表，请参阅 AllTalk Wiki。"]},{"i":"alltalk-v2-的主要功能","l":"\uD83D\uDFE9 AllTalk V2 的主要功能","p":["多引擎支持：轻松在 Coqui XTTS、VITS、Piper、Parler、F5 和自定义引擎之间切换。","语音转换 (RVC)：增强的基于检索的语音克隆管道。","可自定义设置：调整每个引擎的设置并保存启动配置。","叙述功能：为叙述和角色指定不同的语音。","独立和集成使用：与 SillyTavern 无缝集成。","DeepSpeed 和低 VRAM 模式：针对资源受限环境的性能优化。","截图：在 此处 查看 AllTalk V2 的界面。"]},{"i":"设置和安装选项","l":"\uD83D\uDFE8 设置和安装选项","p":["AllTalk 提供独立和集成的安装方法。最快的设置方法是使用提供的快速安装选项之一，这些脚本可以自动完成大部分过程。","独立安装：推荐大多数用户使用（ 独立安装指南）","Text-generation-webui 集成：用于集成到 Text-generation-webui（ TGWUI 安装指南）"]},{"i":"手动安装","l":"\uD83D\uDFE9 手动安装","p":["对于需要详细控制的高级用户，请按照 手动安装指南 在 Windows、Linux 或 Mac（未测试）上进行逐步设置。"]},{"i":"google-colab-安装","l":"\uD83D\uDFE9 Google Colab 安装","p":["使用 Google Colab 安装 在云环境中运行 AllTalk，适用于不想在本地安装的用户。"]},{"i":"在-sillytavern-中使用-alltalk","l":"\uD83D\uDFE8 在 SillyTavern 中使用 AllTalk","p":["一旦 AllTalk 加载完成，在 TTS 页面中选择它，确保在设置中选择正确的 AllTalk 服务器版本。","设置管理：AllTalk 可能会根据您选择的配置启用或禁用特定设置。","加载顺序：如果在 AllTalk 之前加载了 SillyTavern，请重新加载 TTS 扩展页面。","性能优化：根据系统资源有选择地启用 DeepSpeed 和低 VRAM 模式以提高性能。","叙述功能：叙述功能的详细信息可以在 AllTalk Wiki 中找到。","SillyTavern AllTalk 扩展的完整详细信息将在 AllTalk Wiki 的 SillyTavern 页面 上更新。","使用 TGWUI 的 AllTalk 扩展的 TGWUI 用户需要在 TGWUI 聊天界面中禁用 Enable TGWUI TTS，否则会生成重复的 TTS 音频。"]},{"i":"故障排除","l":"\uD83D\uDFE8 故障排除","p":["如果您遇到您认为是 SillyTavern 中 AllTalk 特有的问题，请参阅 AllTalk Wiki 的 SillyTavern 页面 获取最新信息。"]},{"i":"支持-帮助和功能请求","l":"\uD83D\uDFEA 支持、帮助和功能请求","p":["如需进一步帮助：","参考 Wiki 和内置文档。","在 讨论板 上参与讨论。","通过 问题追踪器 提交错误或功能请求。"]}],[{"l":"使用语音克隆的 XTTS","p":["您好！您是否被那些展示 AI 文本转语音技术发展程度的 Reddit 帖子震撼到了？","是否对给您的机器人老婆/老公一个闪亮的新语音调制器感到兴奋？","别担心，这项令人惊叹的突破性技术已经在您的本地 SillyTavern 中可用，您只需要一个简单的..."]},{"l":"前提条件","p":["最新版本的 SillyTavern。","安装 Miniconda。","(Windows) 安装 Visual C++ Build Tools。","用于克隆的语音片段 WAV 文件（每个文件约 10 秒）。文件要求：PCM、单声道、22050Hz、16 位（通过 Audacity 转换）。","创建一个包含\"speakers\"和\"output\"子文件夹的文件夹。将 WAV 文件放入\"speakers\"中。","示例文件夹结构："]},{"l":"安装","p":["daswer123 制作了一个 API 服务器，可以在您的计算机上运行 XTTSv2 模型并连接到 SillyTavern 的 TTS 扩展。","它完全独立于 Extras API，并使用单独的环境。","** 非常重要：** 不要将以下要求安装到您的 Extras 环境或系统 Python 中。 这会破坏您的其他包，进行不必要的降级等。","以下说明使用 Miniconda 提供，但您也可以使用 venv（此处不涉及）。 打开 Anaconda 命令提示符并逐行按照说明操作。"]},{"l":"启动并运行服务器","p":["导航到您在前提条件步骤 4 中创建的文件夹。","创建一个新的 conda 环境。从现在开始，我们将其称为 xtts。","激活新创建的环境。","在您的环境中安装 Python 3.10。当提示时确认\"y\"。","安装 XTTS 服务器及其要求。","安装 PyTorch。这可能需要一些时间。以下命令安装带有 GPU 加速支持（CUDA）的 PyTorch。 如果您只想使用 CPU 推理，请删除从 --index-url 开始的最后一部分。","在默认主机和端口上启动 XTTS 服务器： http://localhost:8020","在首次启动期间，将下载模型（约 2 GB）。 不要忘记仔细阅读来自 Coqui AI 的法律声明。开玩笑的，只需再次点击\"y\"即可。"]},{"l":"连接到 SillyTavern","p":["打开扩展面板，展开 TTS 菜单，并在提供商列表中选择\"XTTSv2\"。","在语言下拉列表中选择您的文本转语音语言（如果不是波兰语我会很伤心）。","验证提供商端点指向 http://localhost:8020 并且\"Available voices\"显示您的语音样本列表。","选择任何角色并设置语音样本和角色之间的映射。 如果角色列表为空，多点击几次\"Reload\"。","根据您的偏好配置其余的 TTS 设置。"]},{"i":"现在您已经设置完成","l":"现在您已经设置完成！","p":["点击任何消息的上下文操作菜单中的喇叭图标，就能听到从扬声器中传出的美丽克隆语音。 生成需要一些时间，即使在高端 RTX GPU 上也不是实时的。"]},{"i":"流式传输","l":"流式传输？","p":["使用最新版本的 XTTS 服务器可以使用 HTTP 流式传输，一旦生成的音频可用就获取音频块！"]},{"i":"这不适用于-rvc","l":"这不适用于 RVC！","p":["音频仍然会生成（假设您使用的是最新版本的 RVC 扩展）并转换， 但不会流式传输，因为 RVC 需要在开始转换之前有完整的音频文件。流式 RVC 仍在研究中..."]},{"i":"如何获得流式传输支持","l":"如何获得流式传输支持？","p":["将 SillyTavern 更新到最新版本。","将 XTTS 服务器更新到最新版本。","像往常一样启动并将 XTTS 连接到 ST。","在 SillyTavern 中启用\"Streaming\" XTTS 扩展设置。"]},{"i":"音频断断续续","l":"音频断断续续？","p":["尝试增加\"chunk size\"设置。","参考：使用 200 的块大小，RTX 3090 可以产生不间断的音频，代价是略微增加音频延迟。"]},{"i":"如何重启-tts-服务器","l":"如何重启 TTS 服务器？","p":["只需执行安装说明中的步骤 1、3 和 7。"]},{"i":"android","l":"Android？？","p":["不太可能，它无法运行需要 PyTorch 的应用程序，除非使用一些我们不提供支持的神秘黑魔法。您可以自行尝试，但如果遇到任何问题，我们不会提供支持。","您最好的解决方案是在本地网络上的 PC 上托管 TTS API，只是不要忘记指定要监听的主机和端口 - 请参阅 README。"]}],[{"i":"tts文本转语音","l":"TTS（文本转语音）","p":["SillyTavern 有多种 TTS 选项。本页面将解释其设置和使用方法。"]},{"i":"这是什么","l":"这是什么？","p":["TTS 用于为聊天的部分内容添加语音叙述。"]},{"l":"配置 TTS"},{"l":"TTS 提供商选择框","p":["用于选择您想使用的 TTS 服务。","ElevenLabs- 需要付费订阅，目前提供最高质量的语音。","Silero- 免费，在您的电脑上运行，质量可能差异很大。","System- 使用您操作系统的 TTS 引擎（如果存在）。质量可能因操作系统而异。","Edge- 免费，通过 Azure 运行，通常速度很快，语音自然但缺乏情感。像听晚间新闻或电台播音员。当选择\"Plugin\"作为提供商时，您还需要安装 此服务器插件，否则 TTS 将无法工作。","Coqui-TTS- 免费，目前没有 API 实现。高性能文本转语音模型（Tacotron、Tacotron2、Glow-TTS、SpeedySpeech）以及 Bark。","Novel- 需要 NovelAI 付费订阅，由 NovelAI 的 TTS 引擎生成。","RVC- 免费，语音克隆。"]},{"l":"复选框","p":["\"Good evening, senpai\"","\"Good evening, senpai\", she says.","\"nya\"... \"Good evening, senpai\"","Cohee approaches you with a faint \"nya\" \"Good evening, senpai\", she says.","仅叙述\"引号内容\"","仅叙述\"引号内容\"- 将 TTS 播放限制为仅包含 引号 内的文本。这将包括*星号内的引号*（内部变量名 = narrate_quoted_only）","仅叙述翻译后的文本- 这将使 TTS 只叙述翻译后的文本。","同时勾选\"仅叙述引号内容\"和\"忽略星号\"复选框将导致 TTS 只读取不在星号内的\"引号\"内容，并忽略其他所有内容。","启用","启用- 开启/关闭 TTS 播放","忽略*星号内的文本，即使是\"引号\"内容*","忽略*星号内的文本，即使是\"引号\"内容*- TTS 不会播放任何 *星号* 内的文本，即使是\"引号\"内容（内部变量名 = narrate_dialogues_only）","禁用","给定示例文本：*Cohee approaches you with a faint nya* Good evening, senpai, she says. 下表显示了基于** 忽略*星号内的文本，即使是\"引号\"内容* 和 仅叙述\"引号内容\"** 的布尔状态，文本将如何修改：","自动生成- 允许 TTS 在新消息进入聊天时自动开始播放","输出"]},{"l":"滑块","p":["这些将根据您选择的 API 而改变。","（解释即将推出）"]},{"l":"按钮","p":["应用- 设置 TTS API 后和编辑语音映射后必须点击此按钮。","可用语音- 加载一个弹出窗口，显示所选 API 的所有可用语音，并让您通过示例对话预览它们。"]},{"l":"使用 TTS","p":["点击\"启用\"复选框，否则什么都不会发生。","如果您希望每次聊天中出现新消息时 TTS 自动开始，请点击\"自动生成\"复选框。","可选择点击任何消息右上角的扬声器图标，按需播放。","点击右下角的\"停止\"按钮（在魔杖菜单内）以停止任何播放。"]},{"l":"语音映射","p":["您必须为 TTS 提供语音映射，否则它不知道应该为每个角色使用什么语音。","这些必须按照以下格式精确设置：","角色名:TTS语音,角色名2:TTS语音2","对于 Coqui-TTS，格式需要包含来自 WebGUI 的说话者和语言：","角色名:TTS语音[说话者id][语言id] 或 Aqua:tts_models--multilingual--multi-dataset--your_tts\\model_file.pth[2][1]"]},{"l":"Bark 零样本语音克隆说话者","p":["如果使用 Bark，您必须创建一个带有要克隆的语音文件的语音文件夹。确保将语音添加到 homedir\\tts\\bark_v0\\speakers\\。在 Windows 上，可能是 C:\\Users\\用户账户\\AppData\\Local\\tts\\bark_v0\\speakers\\，在 Windows 资源管理器中输入 %appdata% 然后向上一级目录到 local，您应该能看到 tts。","目录结构应如下所示：","homedir","tts","bark_v0","speakers","customvoice1","speaker.wav","speaker.npz","robinwilliams","speaker.mp3","me","首次加载此模型和语音时，bark 将克隆语音并创建一个 .npz 文件，这是为了更快的 TTS 所需的。"]}],[{"l":"VRM","p":["本指南将指导您为 SillyTavern 设置和自定义 VRM 扩展。此扩展允许您为角色使用 VRM 动画模型，为您的虚拟角色添加动态和互动元素。"]},{"l":"前提条件","p":["在开始之前，请确保满足以下前提条件：","分支选择：确保您使用的是最新版本的 SillyTavern，以访问最新功能和更新。","扩展安装：从扩展面板（堆叠块图标）的\"Download Extensions & Assets\"菜单中安装\"VRM\"扩展。","模型文件夹放置：将您的 VRM 模型文件（.vrm）放入 /data/user-handle/assets/vrm/model 目录，将动画文件放入 /data/user-handle/assets/vrm/animation 目录。目前支持的动画文件格式是与 VRM 模型兼容的 .fbx 和 .bvh。这包括您可以从 Mixamo ( https://www.mixamo.com/) 获取的任何动画，以及您可以从 XR Animator ( https://github.com/ButzYung/SystemAnimatorOnline) 等工具导出的任何动画。"]},{"l":"扩展设置","p":["VRM 扩展提供了各种设置来自定义您的动画模型的行为。以下是主要设置：","UI 全局设置"]},{"l":"全局设置","p":["启用：","选中此复选框以激活扩展，允许您的 VRM 模型在 SillyTavern 中互动。","如果您只想使用普通精灵图，可以禁用此扩展。","看向摄像机：","选中此复选框可使 VRM 模型的眼睛看向摄像机。","眨眼：","选中此复选框可使 VRM 模型的眼睛在随机时间间隔眨眼。模型表情应该正确定义眨眼权重属性，否则模型可能会出现闭着眼睛眨眼等情况，如果发生这种情况，您可以：","如果您有 .vroid 文件，请修正模型","不使用那个不正确的面部表情","使用此复选框完全禁用眨眼","TTS 口型同步：","选中此复选框可使 VRM 嘴部动作跟随 TTS 播放的声音。仅适用于由 Sillytavern 本身播放声音的 TTS，如 XTTS（非流式模式）。如果禁用，当收到新的角色消息时，嘴部将根据消息文本长度进行动画。","自动发送互动：","选中此复选框可在您点击带有映射消息的区域时自动触发角色互动（详见点击区域部分）。"]},{"l":"性能设置","p":["身体碰撞箱：","选中此复选框可激活对 VRM 模型多个部位的点击检测，根据模型可以检测以下区域：头部/胸部/手部/腹股沟/臀部/腿部/脚部。碰撞箱位置在每帧计算并跟随身体动画，禁用此选项可以提高性能。","使用模型缓存：","选中此复选框可在切换模型时将 VRM 模型保留在内存中，允许更快地切换回之前的模型。如果您为同一角色使用不同的模型来更换装扮或形态，这很有用。可能会影响性能。","使用动画缓存：","选中此复选框可将会话期间播放的所有动画保留在内存中。所有分配给模型的动画也会在模型首次出现时加载。这会增加首次加载模型的时间，但使所有动画切换变得即时。可能会影响性能。"]},{"l":"调试设置","p":["显示网格：","选中此复选框可以可视化 3D 网格、模型拖动框和身体碰撞箱。","重新加载按钮：","点击此按钮可重新加载 3D 场景，清除缓存和所有 VRM 模型。如果出现错误或缓存开始影响性能时使用。"]},{"l":"场景设置","p":["UI 场景设置","灯光颜色：","设置 3D 场景中的灯光颜色。点击重置按钮将其恢复为默认的白色。根据您的浏览器，您可以使用颜色选择器，例如，您可以选取背景图片的颜色以增加沉浸感。","灯光强度：","使用滑块以百分比设置灯光强度。点击重置按钮将其恢复为默认值 100%。VRM 模型对光线的反应可能因模型中烘焙的着色器而异，请尝试不同的值看看效果如何。","UI 模型设置"]},{"l":"角色选择","p":["这些设置允许您管理角色并为其分配 VRM 模型。","刷新按钮：","点击刷新按钮以更新当前聊天中的角色列表。","选择角色：","使用下拉列表选择要分配 VRM 模型的角色。","移除按钮：","点击此按钮可删除角色的已分配模型。"]},{"l":"模型选择","p":["刷新按钮：","如果您的 VRM 模型未出现在列表中，请点击刷新按钮。","选择模型：","从列表中选择一个模型以分配给所选角色。","模型必须位于 /data/user-handle/assets/vrm/model 目录中。","重置按钮：","点击此按钮可将模型设置重置为默认值。如果您有与默认值对应的动画文件，它们将自动映射。请参阅本文档末尾的命名映射。"]},{"l":"模型设置","p":["模型缩放：","使用滑块调整模型的大小，使其变大或变小。","模型中心 X/Y 偏移：","使用这些滑块更改模型相对于窗口中心的水平/垂直位置。","模型 X/Y 旋转：","使用这些滑块更改模型相对于模型臀部的水平/垂直旋转。"]},{"l":"备注","p":["UI 碰撞箱设置"]},{"l":"碰撞箱映射","p":["UI 分类设置"]},{"l":"分类表情映射","p":["要求：","需要使用分类表情扩展；否则，将回退到默认动画。","映射：","对于分类扩展检测到的每种情绪，您可以分配表情/动作/消息。消息可以包含命令。"]},{"l":"命令","p":["\"/vrmmotion idle\" 或 \"/vrmmotion character=Seraphina motion=idle loop=true random=false\"","/vrmexpression","/vrmlightcolor","/vrmlightintensity","/vrmmodel","/vrmmotion","为角色分配 vrm 模型","以百分比设置灯光强度","参数：character, expression","参数：character, model","参数：character, motion, loop, random","参数：color","参数：intensity","更改模型的动画","更改模型的表情","示例：\"/vrmlightcolor white\" 或 \"/vrmlightcolor purple\"","示例：\"/vrmlightintensity 0\" 或 \"/vrmlightintensity 100\"","示例：在单人聊天中 \"/vrmexpression happy\" 或在群组聊天中 \"/vrmexpression character=Seraphina expression=happy\"","示例：在单人聊天中 \"/vrmmodel Seraphina.vrm\" 或在群组聊天中 \"/vrmmodel character=Seraphina model=Seraphina.vrm\"","设置灯光颜色"]},{"l":"动画默认映射","p":["如果您的动画文件按以下方式命名，它们将在重置模型设置时自动映射。例如，名为 \"assets/vrm/animation/neutral.bvh\" 和 \"assets/vrm/animation/neutral1.fbx\" 的文件将自动映射为默认和中性分类动画的组。碰撞箱也是如此。","感谢您阅读本指南！您的 SillyTavern 体验现在已通过动画和互动的 3D 模型得到增强。"]},{"i":"备注-1","l":"备注"}],[{"i":"web-search-网络搜索","l":"Web Search (网络搜索)","p":["为 LLM 提示添加网络搜索结果。"]},{"l":"可用源"},{"l":"Selenium 插件","p":["需要安装并启用官方服务器插件。","详见 SillyTavern-WebSearch-Selenium。","支持 Google 和 DuckDuckGo 搜索引擎。"]},{"l":"Extras API","p":["需要 websearch 模块和在主机上安装的 Chrome/Firefox 网络浏览器。","支持 Google 和 DuckDuckGo 搜索引擎。"]},{"l":"SerpApi","p":["需要 SerpApi 密钥并提供对 Google 搜索的访问。","在此处获取密钥：https://serpapi.com/dashboard"]},{"l":"SearXNG","p":["需要 SearXNG 实例 URL（私有或公共）。使用 HTML 格式显示搜索结果。","了解更多： https://docs.searxng.org/"]},{"l":"Tavily AI","p":["需要 API 密钥。在此处获取密钥： https://app.tavily.com/"]},{"l":"KoboldCpp","p":["必须在文本补全 API 设置中提供 KoboldCpp URL。KoboldCpp 版本必须 >= 1.81.1，并且必须在启动时启用 WebSearch 模块：在 GUI 启动器中启用 Network => Enable WebSearch，或在命令行中添加 --websearch。","参见： https://github.com/LostRuins/koboldcpp/releases/tag/v1.81.1"]},{"l":"如何使用","p":["确保您使用的是最新版本的 SillyTavern。","通过 SillyTavern 中的\"Download Extensions & Assets\"菜单安装扩展。","打开\"Web Search\"扩展设置，设置您的 API 密钥或连接到 Extras，并启用扩展。","在聊天过程中，网络搜索结果将自然地添加到提示中。 只有用户消息会触发搜索。","要更自然地包含搜索结果，请用单引号包裹搜索查询： Tell me about the `latest Ryan Gosling movie`. 将产生搜索查询 latest Ryan Gosling movie。","您可以根据喜好配置设置。"]},{"l":"设置"},{"l":"常规","p":["启用 - 打开和关闭扩展。","源 - 设置搜索结果源。","缓存生命周期 - 搜索结果在您的提示中缓存的时间（以秒为单位）。默认 = 一周。"]},{"l":"提示设置","p":["提示预算 - 设置插入文本的最大容量（以文本字符为单位，而不是标记）。经验法则：1 个标记 ~ 3-4 个字符，根据您的模型上下文限制进行调整。默认 = 1500 个字符。","插入模板 - 结果如何插入到提示中。支持常用宏 + 特殊宏：{{query}} 用于搜索查询，{{text}} 用于搜索结果。","注入位置 - 结果在提示中的位置。与作者注释相同的选项：作为聊天内注入或在系统提示之前/之后。"]},{"l":"搜索激活","p":["使用函数工具 - 使用 函数调用 来激活搜索或抓取网页。必须使用支持的聊天补全 API，并在 AI 响应设置中启用。 启用时禁用所有其他激活方法。","使用反引号 - 启用使用单引号包裹的单词进行搜索激活。","使用触发短语 - 启用使用触发短语进行搜索激活。","正则表达式 - 提供 JS 风格的正则表达式来匹配用户消息。如果正则表达式匹配，将触发具有给定查询的搜索。搜索查询支持 `` 和 $1 语法来引用匹配的组。示例：/what is happening in (.*)/i 正则表达式，搜索查询为 news in $1，将匹配包含 what is happening in New York 的消息，并触发查询 news in New York 的搜索。","触发短语 - 逐个添加将触发搜索的短语。它可以在消息的任何位置，查询从触发词开始，总共跨越到\"最大单词数\"。要排除特定消息的处理，它必须以句点开头，例如 .What do you think?。触发器优先级：首先按文本框中的顺序，然后是用户消息中的第一个。","最大单词数 - 搜索查询中包含的单词数（包括触发短语）。Google 每个提示的限制约为 32 个单词。默认 = 10 个单词。"]},{"l":"页面抓取","p":["访问链接 - 将从访问的搜索结果页面提取文本并保存到文件附件中。","访问计数 - 将访问和解析多少个链接的文本。","访问域名黑名单 - 要排除访问的网站域名。每行一个。","文件头 - 文件头模板，插入到文本文件的开头，有一个额外的 {{query}} 宏。","块头 - 链接块模板，与每个链接的解析内容一起插入。使用 {{link}} 宏表示页面 URL，{{text}} 表示页面内容。","保存目标 - 保存抓取结果的位置。可能的选项：触发消息附件，或 Data Bank 的聊天附件。"]},{"l":"更多信息","p":["最新查询的搜索结果将保留在提示中，直到找到下一个有效查询。 如果您想问额外的问题而不意外触发搜索，请以句点开始您的消息。","如果启用并可用，Web Search 函数工具始终会覆盖其他触发器。","触发器优先级（如果启用多个）：","反引号。","正则表达式。","触发短语。","要丢弃所有先前查询的处理，请在用户消息开头加上感叹号，例如，用户消息 !Now let's talk about... 将丢弃此消息和它上面的每条消息。","此扩展还提供了一个 /websearch 斜杠命令，用于在 STscript 中使用。更多信息请参见： STscript 语言参考"]},{"i":"搜索结果中可以包含什么","l":"搜索结果中可以包含什么？"},{"i":"serpapi-1","l":"SerpApi","p":["答案框。问题的直接答案。","知识图谱。关于主题的百科知识。","页面片段（最多 10 个）。来自网页的相关摘录。","相关问题（最多 10 个）。类似主题的问题和答案。"]},{"l":"Selenium 插件和 Extras API","p":["Google - 答案框、知识图谱、页面片段。","DuckDuckGo - 页面片段。"]},{"i":"searxng-1","l":"SearXNG","p":["信息框。","页面片段。"]},{"i":"tavily-ai-1","l":"Tavily AI","p":["答案。","页面内容。"]},{"i":"koboldcpp-1","l":"KoboldCpp","p":["页面标题。","页面片段。"]}],[{"l":"Extras","p":["Extras 项目已于2024年4月停止维护，不会再收到任何新的更新或模块。绝大多数模块已在 SillyTavern 主应用程序中原生提供。您仍然可以安装和使用它，但如果遇到任何问题，请不要期望能得到及时的支持。"]}],[{"l":"在 Colab 中运行 Extras","p":["Extras 项目已于2024年4月停止维护，不会再收到任何新的更新或模块。绝大多数模块已在 SillyTavern 主应用程序中原生提供。您仍然可以安装和使用它，但如果遇到任何问题，请不要期望能得到及时的支持。"]},{"l":"说明","p":["API 密钥将出现在 colab 的控制台输出中，例如： Your API key is fee2f3f559","不是必需的，但建议：选择 secure 选项以生成 API 密钥来保护您的共享实例。","启动支持扩展的 SillyTavern：（如果需要，在您的 config.yaml 中将 enableExtensions 设置为 true）","在输出底部寻找 trycloudflare.com 链接。忽略 localhost 链接，它不会工作（我们试过了！）。","复制该行下面列出的 API URL 链接。（ 不要 复制'localhost'URL，使用另一个）","如果您 没有 启用 secure 选项，在使用官方 colab 时确保 API 密钥框完全为空。","如果您启用了 secure 选项，将生成的 API 密钥粘贴到 API 密钥框中。","它将以文本 Running on 开头","导航到 SillyTavern 的扩展菜单（点击页面顶部的'堆叠块'图标）。","将 API URL 粘贴到顶部的框中。（ 不是 API 密钥框）","打开 官方 Extras Colab","点击\"连接\"","点击左侧的开始按钮（看起来像一个三角形的'播放'按钮）","等待它完成加载所有内容","这会使 Stable Diffusion 变慢，但其他一切都会正常运行","选择 use_cpu 以不需要 GPU 额度运行 Extras","选择所需的 \"Extra\" 选项"]}],[{"l":"Extras 安装","p":["本页面包含在本地设备上安装 SillyTavern Extras 的说明。","Extras 项目已于2024年4月停止维护，不会再收到任何新的更新或模块。绝大多数模块已在 SillyTavern 主应用程序中原生提供。您仍然可以安装和使用它，但如果遇到任何问题，请不要期望能得到及时的支持。","在您的操作系统上本地安装 Extras 可能很困难或不可能（尤其是 Termux）。"]},{"l":"使用 官方 Extras Colab","p":["设置简单","免费使用","不需要 Colab GPU 额度（使用 use_cpu 选项）","详情请参见 Colab 指南页面。"]},{"l":"安装方法"},{"i":"miniconda推荐","l":"MiniConda（推荐）","p":["（一开始就用 git 安装 SillyTavern 的大神可以跳过这一步！）","（重要！）阅读 如何使用 Conda","cd SillyTavern-extras","conda activate extras（您应该会在命令提示符左侧看到 (extras) 出现）","conda create -n extras","conda install python=3.11 git","git clone https://github.com/SillyTavern/SillyTavern-extras","pip install -r requirements-coqui.txt- 用于 Coqui TTS（不推荐）","pip install -r requirements-rvc.txt- 用于实时语音克隆","pip install -r requirements.txt- 用于基本功能","使用以下命令之 一 安装 Extras 的依赖（这又需要一些时间）：","克隆 Extras GitHub 仓库","创建一个新的 Conda 环境（让我们称它为 extras）：","参见下面的\"安装后运行 Extras\"","在 CONDA 命令提示符窗口 中 逐个 输入/粘贴下面的命令，每个命令后按 Enter。","在您安装好这两个之后...","如果在此步骤遇到错误，请参见 常见问题！","安装 git","安装 Miniconda","安装所需的系统包（这需要一些时间）","导航到您克隆的 Extras 仓库","推荐这种方法是因为 Conda 为 Extras 需要的包创建了一个\"虚拟环境\"，这样它们就不会影响您系统范围的 Python 设置。","激活新环境"]},{"l":"系统范围安装","p":["这更容易，但会影响您系统范围的 Python 安装。","如果您使用许多具有不同需求的 Python 程序，这可能会导致冲突。","如果这是您第一次接触任何 Python 相关的东西，那应该不是问题。","安装 Python 3.11： https://www.python.org/downloads/release/python-3115/","安装 git： https://git-scm.com/downloads","打开命令提示符窗口，转到一个您拥有完全访问权限的文件夹。","克隆仓库：输入 git clone https://github.com/SillyTavern/SillyTavern-extras，按 Enter。","克隆完成后，输入 cd SillyTavern-extras，按 Enter。","输入 python -m pip install -r requirements.txt","参见下面的\"安装后运行 Extras\""]},{"l":"安装后运行 Extras"},{"l":"确认已启用扩展","p":["在文本编辑器中打开 ST 基本安装文件夹中的 config.yaml 文件。","查找包含 enableExtensions 的行。","确保该行是 true，而不是 false。"]},{"l":"决定使用哪个模块","p":["（这只需要做一次）","caption","chromadb","classify","Coqui TTS","coqui-tts","edge-tts","Extras 总是通过 Python 命令行启动。","Microsoft Edge TTS 客户端","python server.py 是最基本的，但它不启用任何有用的模块。","rvc","sd","Silero TTS 服务器","silero-tts","Stable Diffusion 图像生成","summarize","下表描述了每个模块。","决定您想要添加到 Python 命令行的模块。","名称","向量存储服务器","图像说明","它们将在下一步中使用。","实时语音克隆","描述","文本情感分类","文本摘要","注意：您的 Python 命令的模块列表中不能有任何空格！","示例： python server.py --enable-modules=caption,summarize,classify","要启用模块，您必须使用 --enable-modules= 修饰符，后面跟着以逗号分隔的模块名称列表","这将启用图像说明、聊天摘要和实时更新角色表情。"]},{"l":"启动 Extras 服务器","p":["在 Extras 安装文件夹中的命令提示符窗口中...","确保您的 conda 环境处于活动状态（如果您使用了 Conda 安装方法）","如果环境未激活，输入 activate extras。","输入 python server.py --enable-modules=您的,选定的,模块,列表,在这里","extras 服务器将加载。","一段时间后，它会在最后显示一个 URL。对于本地安装，默认为 http://localhost:5100。","复制 API URL。"]},{"l":"将 ST 连接到 Extras 服务器","p":["启动您的 SillyTavern 服务器，并在浏览器中查看 SillyTavern 界面。","打开扩展面板（通过页面顶部的'堆叠块'图标）","将 API URL 粘贴到输入框中。","点击 连接。","要再次运行 Extras，只需在命令提示符中激活环境并运行这些命令。","conda activate extras，按 Enter。 python server.py，按 Enter。","确保添加您的设置所需的 server.py 的其他选项（见下文）。"]},{"l":"创建 .bat 文件以便于启动","p":["这是可选的，仅适用于 Windows，但在 MacOS 上应该也可以做类似的事情。","查看您的 Windows 桌面","右键单击，选择 新建，然后点击 文本文档","桌面上会出现一个新文件，要求输入名称。","将文件命名为 STExtras.txt","在文本编辑器中打开新创建的文件。","将以下代码粘贴到其中：","将占位符文件夹路径替换为您实际的 Extras 安装文件夹路径。","将 python 命令行替换为您实际的命令行","用新名称 STExtras.bat 保存文件（在大多数文本编辑器中使用 文件>> 另存为）","现在您只需双击这个 .bat 文件就可以轻松启动 Extras。","如果您想更改模块列表（或 extras 服务器的任何其他命令行修饰符），只需编辑 .bat 文件中的 python 命令。"]}],[{"l":"Extras 安装常见问题","p":["本页面列出了安装 SillyTavern Extras 时遇到的常见问题和解决方案。","在您的操作系统上本地安装 Extras 可能很困难或不可能（尤其是 Termux）。"]},{"l":"使用 官方 Extras Colab","p":["设置简单","免费使用","不需要 Colab GPU 额度（使用 use_cpu 选项）","详情请参见 Colab 指南页面。"]},{"i":"错误在-linux-上无法导入-talkinghead-模块","l":"错误：在 Linux 上无法导入 'talkinghead' 模块","p":["由于与 Colab 不兼容，它需要安装一个额外的包，所以不会自动安装。在安装其他要求后运行以下命令：","pip install wxpython"]},{"l":"Extras 服务器无法连接到 AUTOMATIC1111 的 Stable Diffusion Web UI","p":["无法连接到远程 SD 后端 http://127.0.0.1:7860！禁用 SD 模块...","确保您启动 Stable Diffusion 的 webui-user.bat 在 COMMANDLINE_ARGS 变量中包含 --api 命令行选项。","在您的 \"webui-user.bat\" 中找到并替换该行： set COMMANDLINE_ARGS=--api","应该是这样的","如果 SD Web UI 的 API 模式被禁用，Extras 服务器将无法建立连接，您将无法生成图像！"]},{"i":"仍然不工作","l":"仍然不工作？","p":["确保您按照正确的顺序启动所有程序，等待每个程序完成加载后再进行下一步：","Stable Diffusion Web UI","SillyTavern Extras","SillyTavern","如果在加载后启动，extras 服务器无法重新连接到 Stable Diffusion API。"]},{"l":"安装 ChromaDB 时出现 hnswlib wheel 构建错误","p":["ERROR: Could not build wheels for hnswlib, which is required to install pyproject.toml-based projects","在安装 ChromaDB 模块之前，您必须先执行 以下操作之一：","安装 Visual C++ build tools： https://visualstudio.microsoft.com/visual-cpp-build-tools/","使用 conda 安装 hnswlib 包： conda install -c conda-forge hnswlib"]},{"l":"在 Mac 上安装 Python 要求时出错","p":["ERROR: No matching distribution found for torch== 2.0.0+cu117","Mac 不支持 CUDA，所以应该安装不带 CUDA 支持的 torch 包。","请使用 requirements-silicon.txt 文件来安装要求。"]},{"i":"缺少模块","l":"缺少模块？","p":["您必须在 Python 命令行中使用 --enable-modules 修饰符指定模块名称列表。","参见 模块 部分。"]},{"i":"api-密钥框是用来做什么的","l":"API 密钥框是用来做什么的？","p":["SillyTavern 扩展面板中的 API 密钥框仅在以下情况下使用：","在您的 Extras 安装文件夹中创建了一个名为 api_key.txt 的文本文件，其中包含您选择的 Extras \"密码\"。","使用 --secure 命令行参数启动 extras。","这使得 Extras API \"密码锁定\"，只有在 API 密钥框中有该密钥的用户才能访问它。","这主要对想要部署自己的公共 Extras（colab 等）的人有用。","在自己的电脑上运行 Extras 供个人使用的用户不应在 API 密钥框中输入任何内容。"]},{"i":"移动设备-android-termux-怎么办","l":"移动设备/Android/Termux 怎么办？\uD83E\uDD14","p":["社区中有一些人通过 Termux 上的 Ubuntu 成功运行 Extras。","但是，Extras 并不是为移动设备支持而设计的。","不会为在 Android 设备上运行 Extras 的人提供支持。","请将您的所有问题直接提交给下面链接的指南的作者。"]},{"i":"这是不受支持的","l":"❗ 这是不受支持的","p":["https://rentry.org/STAI-Termux#downloading-and-running-tai-extras"]}],[{"l":"会说话的头像"},{"i":"这是什么","l":"这是什么？","p":["一个为 AITuber 实现的会说话的动漫头像 3 演示。它具有以下功能：","从单个静态图像生成随机的类 Live 2D 动作。","与任何 TTS 输出的声音进行口型同步。","这个扩展包含了\"从单张图像生成会说话的动漫头像 3：现在还包括身体\"项目的原始演示程序。顾名思义，该项目允许您为动漫角色制作动画，而且只需要该角色的一张图片即可。有两个演示程序：","manual_poser 让您通过图形用户界面操控角色的面部表情、头部旋转、身体旋转和呼吸时的胸部扩张，这样您可以将它们保存为默认表情，如开心、悲伤、喜悦等。 ifacialmocap_puppeteer 让您将自己的面部动作转移到动漫角色上。"]},{"l":"硬件要求","p":["您可以使用 CPU 或 GPU 模式（默认为 CPU）。但是，在 CPU 模式下预计约 1 FPS，而在 GPU 模式下，使用 RTX3060 可以获得约 9-10 FPS。","ifacialmocap_puppeteer 需要一台能够从视频流计算混合形状参数的 iOS 设备。这意味着设备必须能够运行 iOS 11.0 或更高版本，并且必须有 TrueDepth 前置摄像头。（更多信息请参见此页面。）换句话说，如果您有 iPhone X 或更好的设备，就应该没问题。"]},{"l":"如何使用","p":["您必须使用以下模块启动 extras 才能使 talkinghead 工作： classify 和 talkinghead！ classify 是处理 talkinghead.png 文件所必需的。此外，您还可以使用 --talkinghead-gpu 将混合模型加载到 GPU 内存中，使动画速度提高 10 倍。强烈建议使用 GPU 加速！默认情况下，程序启动后会加载默认图像 SillyTavern-extras\\talkinghead\\tha3\\images\\lambda_00.png。您可以通过访问 http://localhost:5100/api/talkinghead/result_feed 或 您的扩展 URL:端口/api/talkinghead/result_feed 来验证它是否正常工作。","服务器启动后，转到扩展 API 选项卡并连接。然后只需选择一个角色卡进行加载。（启动 server.py 时使用 --enable-modules=classify,talkinghead --talkinghead-gpu）","现在选择角色表情，如果您勾选 talkinghead 图像类型框，脚本将用 您的扩展 URL:端口/api/talkinghead/result_feed 的结果替换您当前的角色表情。取消勾选该框应该会将图像恢复为原始表情，但有时您需要向聊天发送新消息来\"重新加载\"图像。","如果角色目录中没有 talkinghead.png 文件，它将只显示默认图像或最后一个有 talkinghead.png 文件的角色卡。当角色卡更改时，动画源图像也会更改。","现在打开角色表情，滚动到 talkinghead 图像，上传一个符合下面\"输入图像的约束条件\"部分要求的图像文件。","然后勾选并取消勾选 talkinghead 框以重新加载角色。如果图像看起来很奇怪，可能是因为它不是透明的/没有 alpha 层。否则，请按照下面的说明和模板操作。"]},{"l":"输入图像的约束条件","p":["为了使系统正常工作，输入图像必须遵守以下约束条件：","分辨率应为 512 x 512。（如果程序收到任何其他尺寸的输入图像，它会将图像调整为此分辨率并以此分辨率输出。） 必须有 alpha 通道。 必须只包含一个人形角色。 角色应该站直并面向前方。 角色的手应该在头部以下且远离头部。 角色的头部应该大致包含在图像上半部分中间的 128 x 128 框内。 不属于角色的所有像素（即背景像素）的 alpha 通道必须为 0。","输入约束"]},{"l":"高级部分"},{"l":"Python 环境","p":["除了基本功能（app.py）外，manual_poser 和 ifacialmocap_puppeteer 都可以作为桌面应用程序使用。要运行它们，您需要设置一个用于运行 Python 语言程序的环境。该环境需要以下软件包：","Python >= 3.8","PyTorch >= 1.11.0 with CUDA support","SciPY >= 1.7.3","wxPython >= 4.1.1","Matplotlib >= 3.5.1","一种方法是安装 Anaconda 并在 shell 中运行以下命令：","conda create -n talking-head-anime-3-demo python=3.8 conda activate talking-head-anime-3-demo conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch conda install scipy pip install wxpython conda install matplotlib"]},{"l":"额外的混合模型","p":["只包含一个（最轻量级的）模型，如果您想要额外的混合模型，需要从 https://www.dropbox.com/s/y7b8jl4n2euv8xe/talking-head-anime-3-models.zip?dl=0 下载模型文件并解压到 SillyTavern-extras\\talkinghead\\tha3\\models 文件夹。最终，数据文件夹应该如下所示：","tha3","models","separable_float","editor.pt","eyebrow_decomposer.pt","eyebrow_morphing_combiner.pt","face_morpher.pt","two_algo_face_body_rotator.pt","separable_half","editor.pt:","standard_float","standard_half","模型文件以知识共享署名 4.0 国际许可证分发，这意味着您可以将它们用于商业目的。但是，Pramook Khungurn. Talking Head(?) Anime from a Single Image 3: Now the Body Too. https://github.com/pkhungurn/talking-head-anime-3-demo，是创作者。"]},{"l":"运行 manual_poser 桌面应用程序","p":["打开 shell。将工作目录更改为仓库的根目录。然后运行：","python tha3/app/manual_poser.py 注意，在运行上述命令之前，您可能需要激活包含所需包的 Python 环境。","conda activate extras 如果您尚未激活环境。"]}],[{"l":"智能上下文"},{"i":"此扩展已不再维护不建议使用请考虑使用-聊天向量化-作为可能的替代方案","l":"此扩展已不再维护，不建议使用。请考虑使用 聊天向量化 作为可能的替代方案。","p":["使用此扩展不能保证更好的聊天体验或任何形式的记忆改进。仅在您完全理解向量数据库使用的所有影响时才使用。"]},{"i":"这是什么","l":"这是什么？","p":["智能上下文是一个 SillyTavern 扩展，它使用 ChromaDB 库 让您的 AI 角色能够访问正常聊天历史上下文限制之外的信息。"]},{"i":"这有什么用","l":"这有什么用？","p":["如果您有一个很长的聊天记录，大部分内容都在通常的上下文窗口之外，因此在 AI 写回复时无法访问这些内容。","智能上下文会自动将整个聊天文件的历史记录放入向量数据库中。每当您在聊天中输入新内容时，系统就会搜索这个数据库，如果找到包含匹配关键词的消息，这些聊天消息就会被放入上下文中，这样 AI 在写下一个回复时就能看到它们。"]},{"l":"设置说明","p":["将 SillyTavern 更新到至少 1.10.6 版本。","从扩展面板（堆叠块图标）中的\"下载扩展和资源\"菜单安装\"智能上下文\"扩展。","安装或更新 Extras 到最新版本。或者，使用 Colab notebook。","仅限本地安装： 为 Extras 安装 requirements-complete.txt（即使您在之前的安装中已经安装过）。","启用 chromadb 模块运行 Extras： python server.py --enable-modules=chromadb"]},{"i":"安装-chromadb-时遇到错误","l":"安装 ChromaDB 时遇到错误？","p":["安装 chromadb 包需要以下条件之一：","安装 Visual C++ build tools： https://visualstudio.microsoft.com/visual-cpp-build-tools/","从 conda 安装 hnswlib： conda install -c conda-forge hnswlib"]},{"l":"配置","p":["一旦启用了智能上下文，您应该在 SillyTavern UI 中对其进行配置。 可以从扩展菜单中进行智能上下文配置 STExtensionMenuIcon","智能上下文配置面板","需要了解 4 个主要概念：","聊天历史保留","记忆注入数量","单条记忆长度","注入策略"]},{"l":"智能上下文仅在聊天历史达到 10 条消息后开始工作","p":["在新聊天开始时，ChromaDB 处于非活动状态。","一旦聊天累积了 10 条消息，它就会开始将所有消息记录到数据库中，并根据需要回忆消息。"]},{"i":"聊天历史保留保留的消息","l":"聊天历史保留（'保留的消息'）","p":["默认情况下，ChromaDB 将保留滑块中指定数量的最近自然聊天历史消息。 超出此数量的任何消息都将从您发送的提示中删除，如果数据库中存在\"记忆\"，它们将替代较旧的聊天历史消息（参见下面的策略）。"]},{"l":"记忆注入数量","p":["智能上下文将插入上下文的\"记忆\"的最大数量。 并非每次注入尝试都会达到这个完整数量。 如果您发送一个与\"狗\"相关的输入，而数据库中只有一条其他与狗相关的消息，那么只会插入 1 条项目。"]},{"l":"单条记忆长度","p":["这是每条注入的\"记忆\"允许的最大长度。 这是以 字符 为单位（不是标记）。 如果设置得太小，记忆可能会被中途截断。","示例：","Ross：我喜欢长毛蓬松尾巴的狗。我不喜欢短毛短尾巴的狗。","这条数据库\"记忆\"有 103 个字符长，所以您需要将滑块设置为至少 103 才能完整地将其拉入上下文中。","如果滑块小于 103，消息就会被截断并以那种形式注入。"]},{"l":"注入策略"},{"l":"替换最旧历史","p":["这个策略保留 X 条最近的消息，删除之前的所有消息，并用\"记忆\"替换它们。","优点","不太可能超出您的上下文限制","存在于上下文顶部附近的记忆对响应的直接影响较小，同时仍然提供\"背景信息\"。","缺点","旧消息直接插入到聊天历史中，没有特殊标记，通常与保留的自然聊天历史消息没有直接的自然关联。这可能会让智能较低的 AI 模型感到困惑。"]},{"l":"添加到底部","p":["这个策略保持聊天历史的自然状态，并在其 之后 的格式化[方括号标题]内添加\"记忆\"。 这意味着\"保留的消息\"滑块实际上被禁用。","优点","不缩短或改变当前的自然聊天历史","\"记忆\"存在于聊天之后，对下一个 AI 响应有更强的影响","缺点","因为没有删除/替换任何聊天项目，所以更有可能超出您的上下文限制。","因为记忆存在于提示的末尾附近，它们可能对 AI 的响应产生太大的影响。"]},{"l":"自定义深度","p":["这个策略保持聊天历史的自然状态，并在您在指定模板中确定的深度添加\"记忆\"。 这意味着\"保留的消息\"滑块实际上被禁用。 自定义注入消息应包含 `` 模板词，所有查询到的记忆都将放在这里。","优点","灵活地实验记忆放置","可以自定义上下文中的记忆介绍","缺点","因为没有删除/替换任何聊天项目，所以更有可能超出您的上下文限制。"]},{"l":"使用百分比策略","p":["注意：这与\"添加到底部\"策略不兼容，因为后者根本不删除任何消息。","在使用\"替换最旧历史\"策略时，勾选此框将启用滑块，用于选择要用智能上下文记忆替换的上下文内聊天历史的百分比。它还会禁用用于手动选择消息数量的两个滑块。","这个策略自动计算要用智能上下文记忆替换的聊天历史的百分比，而不是固定的消息数量。","优点","比手动计算消息数量更容易","随可用上下文大小调整，对小型和大型提示空间应用相同的百分比","缺点","要删除的历史记录计算可能略有不准确，因为它们基于每条消息的估计标记","它将要删除的消息数量四舍五入到最接近的 5 的倍数（0、5、10、15、20 等），所以不如手动数字选择那么精细。"]},{"l":"记忆回忆策略"},{"l":"仅从此聊天回忆","p":["这是智能上下文的默认行为，仅从此特定聊天的 ChromaDB 集合中提取\"记忆\"。"]},{"l":"从所有角色聊天中回忆","p":["这是智能上下文的实验性行为，从所选角色的所有 ChromaDB 集合中提取\"记忆\"。 理论上，这应该允许跨越多次互动发展出更健壮的记忆集。 建议与\"添加到底部\"或\"自定义深度\"策略一起使用，并将\"保留的消息\"设置为较低的数字，这样 ChromaDB 会更快地从记忆中提取。"]},{"l":"使用智能上下文","p":["一旦启用并配置，智能上下文会自动运行。","ChromaDB 为 SillyTavern 中打开的每个聊天创建一个新数据库。 这个数据库会自动填充整个聊天历史。","您也可以手动将文本文件插入数据库。","这些文本文件不必是聊天记录。它们可以是任何内容（维基百科条目、同人小说等）。"]},{"l":"清除数据库","p":["您可以使用\"清除数据库\"按钮来清除当前聊天的数据库。","如果您发现存储了不准确的记忆（比如您已经删除或编辑的聊天消息），这会很有帮助。"]},{"l":"常见问题"},{"i":"聊天结束后数据库会怎样我可以保存它们吗","l":"聊天结束后数据库会怎样？我可以保存它们吗？","p":["对于本地安装的 Extras 服务器，智能上下文会保存数据库。在通常的使用情况下无需手动保存。","对于 colab 用户，当 extras 服务器关闭时，数据库会被清除。使用导出按钮将数据库保存为 JSON 文件，下次要使用时再导入。","通常不需要保存智能上下文数据库。","目前我们有导入/导出功能，允许您保存聊天的数据库并在以后再次使用。"]},{"i":"我可以为所有聊天创建一个大数据库供参考吗","l":"我可以为所有聊天创建一个大数据库供参考吗？","p":["这不是智能上下文功能的好用法。 我们建议为此目的使用世界信息。"]}],[{"l":"开发和自动化","p":["SillyTavern 的默认包只提供了一个基础平台，可以通过多种方式进行扩展。","STscript","STscript 是一种强大的脚本语言，基于批处理聊天命令，无需任何编程知识即可上手。","Function Calling","通过让 LLM 使用外部数据源或触发扩展的特定功能来添加更多动态功能。","UI Extensions","UI 扩展在浏览器环境中运行，通过挂钩其事件和 API 来扩展 SillyTavern 的功能。","Server Plugins","服务器插件允许通过在 NodeJS 环境中运行代码来添加新的 API 端点等功能。","Internationalization (i18n)","了解如何将 SillyTavern 的 UI 翻译成您的语言。"]}],[{"l":"STscript 语言参考"},{"i":"什么是-stscript","l":"什么是 STscript？","p":["这是一个简单但功能强大的脚本语言，可用于在不需要严格编程的情况下扩展 SillyTavern 的功能，允许您：","创建迷你游戏或速通挑战","构建 AI 驱动的聊天洞察","释放您的创造力并与他人分享","STscript 是基于斜杠命令引擎构建的，利用命令批处理、数据管道、宏和变量。 这些概念将在以下文档中详细描述。"]},{"l":"安全注意事项","p":["能力越大，责任越大。在执行脚本之前，请务必仔细检查。"]},{"i":"hello-world","l":"Hello, World!","p":["要运行您的第一个脚本，打开任何 SillyTavern 聊天并在聊天输入栏中输入以下内容：","Hello World","您应该会在屏幕顶部看到一条提示消息。现在让我们逐步分析。","脚本是一批命令，每个命令都以斜杠开头，可以带有或不带有命名和未命名参数，并以命令分隔符结束：|。","命令按顺序依次执行，并在彼此之间传输数据。","/pass 命令接受一个常量值 \"Hello, World!\" 作为未命名参数并将其写入管道。","/echo 命令通过管道从前一个命令接收值并将其显示为提示通知。","提示： 要查看所有可用命令的列表，请在聊天中输入 /help slash。","由于常量未命名参数和管道是可互换的，我们可以简单地将这个脚本重写为："]},{"l":"用户输入","p":["现在让我们为脚本添加一些交互性。我们将接受用户的输入值并在通知中显示它。","/input 命令用于显示一个输入框，其中包含未命名参数中指定的提示，然后将输出写入管道。","因为 /echo 已经有一个设置输出模板的未命名参数，我们使用 {{pipe}} 宏来指定管道值将被渲染的位置。","Slim Shady Input","Slim Shady Output"]},{"i":"其他输入输出命令","l":"其他输入/输出命令","p":["/popup (text)— 显示一个阻塞弹出窗口，支持简单的 HTML 格式，例如：/popup font color=redI'm red!/font。","/setinput (text)— 用提供的文本替换用户输入栏的内容。","/speak voice=name (text)— 使用选定的 TTS 引擎和语音映射中的角色名称朗读文本，例如 /speak name=Donald Duck Quack!。","/buttons labels=[a,b] (text)— 显示一个带有指定文本和按钮标签的阻塞弹出窗口。 labels 必须是 JSON 序列化的字符串数组或包含此类数组的变量名。将点击的按钮标签返回到管道中，如果取消则返回空字符串。文本支持简单的 HTML 格式。"]},{"i":"popup-和-input-的参数","l":"/popup 和 /input 的参数","p":["/popup 和 /input 支持以下附加命名参数：","large=on/off- 增加弹出窗口的垂直大小。默认： off。","wide=on/off- 增加弹出窗口的水平大小。默认： off。","okButton=string- 添加自定义\"确定\"按钮文本的功能。默认： Ok。","rows=number- (仅用于 /input) 增加输入控件的大小。默认：1。","示例："]},{"i":"echo-的参数","l":"/echo 的参数","p":["/echo 支持以下 severity 附加参数值，用于设置显示消息的样式。","warning","error","info(默认)","success","示例："]},{"l":"变量","p":["/addglobalvar key=name 或 {{addglobalvar::name:increment}}— 将 increment 添加到全局变量的值中。","/addvar key=name increment 或 {{addvar::name::increment}}— 将 increment 添加到本地变量的值中。","/addvar 命令中的增量如果增量和变量值都可以转换为数字，则执行加法或减法，否则执行字符串连接。","/decglobalvar name 或 {{decglobalvar::name}}— 将全局变量的值减少 1。","/decvar name 或 {{decvar::name}}— 将本地变量的值减少 1。","/flushglobalvar name— 删除全局变量的值。","/flushvar name— 删除本地变量的值。","/getglobalvar name 或 {{getglobalvar::name}}— 获取全局变量的值。","/getvar name 或 {{getvar::name}}— 获取本地变量的值。","/incglobalvar name 或 {{incglobalvar::name}}— 将全局变量的值增加 1。","/incvar name 或 {{incvar::name}}— 将本地变量的值增加 1。","/setglobalvar key=name 或 {{setglobalvar::name::value}}— 设置全局变量的值。","/setvar key=name value 或 {{setvar::name::value}}— 设置本地变量的值。","getvar 命令用于检索变量的值并通过管道传递。","getvar 宏用于在 /echo 命令中显示值。","之前未定义的变量的默认值是空字符串，或者如果首次在 /addvar、/incvar、/decvar 命令中使用，则为零。","全局变量 — 保存到 settings.json 中，在整个应用程序中都存在。","变量用于在脚本中存储和操作数据，可以使用命令或宏。变量可以是以下类型之一：","如果命令参数接受变量名，并且同名的本地和全局变量都存在，则 本地变量 优先。","对于 宏，只有 \"get\"、\"inc\" 和 \"dec\" 类型的宏返回值，\"add\" 和 \"set\" 则替换为空字符串。","所有用于变量操作的 斜杠命令 都将结果值写入管道供下一个命令使用。","本地变量 — 保存到当前聊天的元数据中，对其唯一。","现在，让我们考虑以下示例：","用户输入的值保存在名为 SDinput 的本地变量中。","由于变量在脚本执行之间保存且不会被清除，您可以在其他脚本中和通过宏引用该变量，它将解析为与示例脚本执行期间相同的值。要确保值被丢弃，请在脚本中添加 /flushvar 命令。","该值传递给 /imagine 命令（由图像生成插件提供）作为其输入提示。"]},{"l":"数组和对象","p":["变量值可以包含 JSON 序列化的数组或键值对（对象）。","示例：","数组：[apple,banana,orange]","对象：{fruits:[apple,banana,orange]}","以下修改可以应用于命令以处理这些变量：","/len 命令获取数组中的项目数。","index=number/string 命名参数可以添加到 /getvar 或 /setvar 及其全局对应项，以通过数组的从零开始的索引或对象的字符串键获取或设置子值。","如果在不存在的变量上使用数字索引，该变量将被创建为空数组 []。","如果在不存在的变量上使用字符串索引，该变量将被创建为空对象 {}。","/addvar 和 /addglobalvar 命令支持将新值推送到数组类型的变量。"]},{"i":"流程控制---条件语句","l":"流程控制 - 条件语句","p":["您可以使用 /if 命令创建基于定义规则分支执行的条件表达式。","/if left=valueA right=valueB rule=comparison else=(command on false) (command on true)","让我们看看以下示例：","这个脚本根据用户输入评估所需值，并根据输入值显示不同的消息。"]},{"i":"if-的参数","l":"/if 的参数","p":["left 是第一个操作数。让我们称之为 A。","right 是第二个操作数。让我们称之为 B。","rule 是要应用于操作数的操作。","else 是可选的子命令字符串，如果布尔比较结果为 false 则执行。","未命名参数是如果布尔比较结果为 true 则执行的子命令。","操作数值按以下顺序评估：","数字字面量","本地变量名","全局变量名","字符串字面量","命名参数的字符串值可以用引号转义以允许多词字符串。然后丢弃引号。"]},{"l":"布尔运算","p":["支持以下布尔比较规则。应用于操作数的操作结果为 true 或 false 值。","eq（等于）=> A = B","neq（不等于）=> A != B","lt（小于）=> A < B","gt（大于）=> A > B","lte（小于或等于）=> A <= B","gte（大于或等于）=> A >= B","not（一元否定）=> !A","in（包含子字符串）=> A 包含 B，不区分大小写","nin（不包含子字符串）=> A 不包含 B，不区分大小写"]},{"l":"子命令","p":["子命令是包含要执行的斜杠命令列表的字符串。","要在子命令中使用命令批处理，命令分隔符字符应该被转义（见下文）。","由于宏值在进入条件时执行，而不是在执行子命令时执行，因此可以额外转义宏以延迟其评估到子命令执行时间。","子命令执行的结果通过管道传递给 /if 之后的命令。","遇到 /abort 命令时中断脚本执行。","/if 命令可以用作三元运算符。 以下示例将在变量 a 等于 5 时将 \"true\" 字符串传递给下一个命令，否则传递 \"false\" 字符串。"]},{"l":"转义序列"},{"l":"宏","p":["宏的转义工作方式与以前一样。但是，使用闭包时，您需要转义宏的频率会大大降低。可以转义两个开始的大括号，或者同时转义开始和结束的大括号对。"]},{"l":"管道","p":["在闭包中不需要转义管道（当用作命令分隔符时）。在任何想要使用字面管道字符而不是命令分隔符的地方，都需要转义它。","使用解析器标志 STRICT_ESCAPING 时，不需要在引用值中转义管道。"]},{"l":"Quotes","p":["To use a literal quote-character inside a quoted value, the character must be escaped."]},{"l":"Spaces","p":["To use space in the value of a named argument, you either have to surround the value in quote, or escape the space character."]},{"l":"Closure Delimiters","p":["If you want to use the character combinations used to mark the beginning or end of a closure, you have to escape the sequence with a single backslash."]},{"l":"Pipe Breakers","p":["To prevent the previous command's output from being automatically injected as the unnamed argument into the next command, put double pipes between the two commands."]},{"l":"Closures","p":["Closures (block statements, lambdas, anonymous functions, whatever you want to call them) are a series of commands wrapped between {: and :}, that are only evaluated once that part of the code is executed."]},{"l":"Sub-Commands","p":["Closures make using sub-commands a lot easier and get rid of the need to escape pipes and macros."]},{"l":"Scopes","p":["Closures have their own scope and support scoped variables. Scoped variables are declared with /let, their values set and retrieved with /var. Another way to get a scoped variable is the {{var::}} macro.","Within a closure, you have access to all variables declared within that same closure or in one of its ancestors. You don't have access to variables declared in a closure's descendants. If a variable is declared with the same name as a variable that was declared in one of the closure's ancestors, you don't have access to the ancestor variable in this closure and its descendants."]},{"l":"Named Closures","p":["Closures can be assigned to variables (only scoped variables) to be called at a later point or to be used as sub-commands.","/: can also be used to execute Quick Replies, as it is just a shorthand for /run."]},{"l":"Closure Arguments","p":["Named closures can take named arguments, just like slash commands. The arguments can have default values."]},{"l":"Closures and Piped Arguments","p":["The piped value from a parent closure will not be automatically injected into the first command of a child closure. You can still explicitly reference the parent's piped value with {{pipe}}, but if you leave the unnamed argument of the first command inside a closure blank, the value will not be automatically injected."]},{"l":"Immediately Executed Closures","p":["Closures can be immediately executed, meaning they will be replaced with their return value. This is helpful in places where no explicit support for closures exists, and to shorten some commands that would otherwise require a lot of intermediate variables.","In addition to running named closures saved inside scoped variables, the /run command can also be used to execute closures immediately."]},{"l":"Comments","p":["A comment is a human-readable explanation or annotation in the script code. Comments don't break pipes."]},{"l":"Block Comments","p":["Block comments can be used to quickly comment out multiple commands at once. They will not terminate on a pipe."]},{"l":"Flow Control"},{"i":"loops-while-and-times","l":"Loops: /while and /times","p":["If you need to run some command in a loop until a certain condition is met, use the /while command.","On each step of the loop it compares the value of variable A with the value of variable B, and if the condition yields true, then executes any valid slash command enclosed in quotes, otherwise exists the loop. This command doesn't write anything to the output pipe."]},{"i":"arguments-for-while","l":"Arguments for /while","p":["The set of available boolean comparisons, handing of variables, literal values, and subcommands is the same as for the /if command.","The optional guard named argument ( on by default) is used to protect against endless loops, limiting the number of iterations to 100. To disable and allow endless loops, set guard=off.","This example adds 1 to the value of i until it reaches 10, then outputs the resulting value (10 in this case)."]},{"i":"arguments-for-times","l":"Arguments for /times","p":["Runs a subcommand a specified number of times.","/times (repeats) (command)– any valid slash command enclosed in quotes repeats a number of times, e.g. /setvar key=i 1 | /times 5 /addvar key=i 1 adds 1 to the value of \"i\" 5 times.","{{timesIndex}} is replaced with the iteration number (zero-based), e.g. /times 4 /echo {{timesIndex}} echoes the numbers 0 through 4.","Loops are limited to 100 iterations by default, pass guard=off to disable."]},{"l":"Breaking out of Loops and Closures","p":["The /break command can be used to break out of a loop (/while or /times) or a closure early. The unnamed argument of /break can be used to pass a value different from the current pipe along./break is currently implemented in the following commands:","/while- exits the loop early","/times- exits the loop early","/run(with a closure or closure via variable) - exits the closure early","/:(with a closure) - exits the closure early"]},{"l":"Math operations","p":["/abs (a)– performs an absolute value operation of a value, e.g. /abs -10","/add (a b c d)– performs an addition of the set of values, e.g. /add 10 i 30 j","/cos (a)– performs a cosine operation of a value, e.g. /cos i","/div (a b)– performs a division of two values, e.g. /div 10 i","/log (a)– performs a natural logarithm operation of a value, e.g. /log i","/max (a b c d)– returns a maximum from the set of values, e.g. /max 1 0 4 k","/min (a b c d)– return a minimum from the set of values, e.g. /min 5 4 i 2","/mod (a b)– performs a modulo operation of two values, e.g. /mod i 2","/mul (a b c d)– performs a multiplication of the set of values, e.g. /mul 10 i 30 j","/pow (a b)– performs a power operation of two values, e.g. /pow i 2","/rand (round=round|ceil|floor from=number=0 to=number=1)– returns a random number between from and to, e.g. /rand or /rand 10 or /rand from=5 to=10. Ranges are inclusive. The returned value will contain a fractional part. Use round named argument to get an integral value, e.g. /rand round=ceil to round up, round=floor to round down, and round=round to round to nearest.","/round (a)– performs a rounding to the nearest integer operation of a value, e.g. /round 3.14","/sin (a)– performs a sine operation of a value, e.g. /sin i","/sqrt (a)– performs a square root operation of a value, e.g. /sqrt 9","/sub (a b)– performs a subtraction of two values, e.g. /sub i 5","All of the following operations accept a series of numbers or variable names and output the result to the pipe.","Invalid operations (such as division by zero), and operations that result in a NaN value or infinity return zero.","List of operations:","Multiplication, addition, minimum and maximum accept an unlimited number of arguments separated by spaces.","Sine, cosine, natural logarithm, square root, absolute value, and rounding accept one argument.","Subtraction, division, exponentiation, and modulo accept two arguments separated by spaces."]},{"i":"example-1-get-an-area-of-a-circle-with-a-radius-of-50","l":"Example 1: get an area of a circle with a radius of 50."},{"i":"example-2-calculate-a-factorial-of-5","l":"Example 2: calculate a factorial of 5."},{"l":"Using the LLM","p":["Scripts can make requests to your currently connected LLM API using the following commands:","/gen (prompt)— generates text using the provided prompt for the selected character and including chat messages.","/genraw (prompt)— generates text using just the provided prompt, ignoring the current character and chat.","/trigger— triggers a normal generation (equivalent to clicking a \"Send\" button). If in group chat, you can optionally provide a 1-based group member index or a character name to have them reply, otherwise triggers a group round according to the group settings."]},{"i":"arguments-for-gen-and-genraw","l":"Arguments for /gen and /genraw","p":["lock— can be on or off. Specifies whether a user input should be blocked while the generation is in progress. Default: off.","stop— JSON-serialized array of strings. Adds a custom stop string (if the API supports it) just for this generation. Default: none.","instruct(only /genraw) — can be on or off. Allows to use instruct formatting on the input prompt (if instruct mode is enabled and the API supports it). Set to off to force pure prompts. Default: on.","as(for Text Completion APIs) — can be system(default) or char. Defines how the last prompt line will be formatted. char will use a character name, system will use no or neutral name.","The generated text is then passed through the pipe to the next command and can be saved to a variable or displaced using the I/O capabilities:","Cthulhu Says","or to insert the generated message as a response from your character:"]},{"l":"Prompt injections","p":["Scripts can add custom LLM prompt injections, making it essentially an equivalent of unlimited Author's Notes.","/inject (text)— inserts any text into the normal LLM prompt for the current chat, and requires a unique identifier. Saved to chat metadata.","/listinjects— shows a list of all prompt injections added by scripts for the current chat in a system message.","/flushinjects— deletes all prompt injections added by scripts for the current chat.","/note (text)— sets the Author's Note value for the current chat. Saved to chat metadata.","/interval— sets the Author's Note insertion interval for the current chat.","/depth— sets the Author's Note insertion depth for the in-chat position.","/position— sets the Author's Note position for the current chat."]},{"i":"arguments-for-inject","l":"Arguments for /inject","p":["id— an identifier string or a reference to a variable. Consequent calls of /inject with the same ID will overwrite the previous text injection. Required argument.","position— sets a position for the injection. Default: after. Possible values:","after: after the main prompt.","before: before main prompt.","chat: in-chat.","depth— sets an injection depth for the in-chat position. 0 means insertion after the last message, 1 - before the last message, etc. Default: 4.","Unnamed argument is a text to be injected. An empty string will unset the previous value for the provided identifier."]},{"l":"Access chat messages"},{"l":"Read messages","p":["You can access messages in the currently selected chat using the /messages command.","The names argument is used to specify whether you want to include character names or not, default: on.","In an unnamed argument, it accepts a message index or range in the start-finish format. Ranges are inclusive!","If the range is unsatisfiable, i.e. an invalid index or more messages than exist are requested, then an empty string is returned.","Messages that are hidden from the prompt (denoted by the ghost icon) are excluded from the output.","If you want to know the index of the latest message, use the {{lastMessageId}} macro, and {{lastMessage}} will get you the message itself.","To calculate the start index for a range, for example, when you need to get the last N messages, use variable subtraction. This example will get you 3 last messages in the chat:"]},{"l":"Send messages","p":["A script can send messages as either a user, character, persona, neutral narrator, or add comments.","/send (text)— adds a message as the currently selected persona.","/sendas name=charname (text)— adds a message as any character, matching by their name. name argument is required. Use the {{char}} macro to send as the current character.","/sys (text)— adds a message from the neutral narrator that doesn't belong to the user or character. The displayed name is purely cosmetic and can be customized with the /sysname command.","/comment (text)— adds a hidden comment that is displayed in the chat but is not visible to the prompt.","/addswipe (text)— adds a swipe to the last character message. Can't add a swipe to the user or hidden messages.","/hide (message id or range)— hides one or several messages from the prompt based on the provided message index or inclusive range in the start-finish format.","/unhide (message id or range)— returns one or several messages to the prompt based on the provided message index or inclusive range in the start-finish format.","/send, /sendas, /sys, and /comment commands optionally accept a named argument at with a zero-based numeric value (or a variable name that contains such a value) that specifies an exact position of message insertion. By default new messages are inserted at the end of the chat log.","This will insert a user message at the beginning of the conversation history:"]},{"l":"Delete messages","p":["These commands are potentially destructive and have no \"undo\" function. Check the /backups/ folder if you accidentally deleted something important.","/cut (message id or range)— cuts one or several messages from the chat based on the provided message index or inclusive range in the start-finish format.","/del (number)— deletes last N messages from the chat.","/delswipe (1-based swipe id)— deletes a swipe from the last character message based on the provided 1-based swipe ID.","/delname (character name)— deletes all messages in the current chat that belong to a character with the specified name.","/delchat— deletes the current chat."]},{"l":"World Info commands","p":["World Info (also known as Lorebook) is a highly utilitarian tool for dynamically inserting data into the prompt. See the dedicated page for more detailed explanation: World Info.","/getchatbook– gets a name of the chat-bound World Info file or create a new one if was unbound, and pass it down the pipe.","/findentry file=bookName field=fieldName [text]– finds a UID of the record from the specified file (or a variable pointing to a file name) using fuzzy matching of a field value with the provided text (default field: key) and passes the UID down the pipe, e.g. /findentry file=chatLore field=key Shadowfang.","/getentryfield file=bookName field=field [UID]– gets a field value (default field: content) of the record with the UID from the specified World Info file (or a variable pointing to a file name) and passes the value down the pipe, e.g. /getentryfield file=chatLore field=content 123.","/setentryfield file=bookName uid=UID field=field [text]– sets a field value (default field: content) of the record with the UID (or a variable pointing to UID) from the specified World Info file (or a variable pointing to a file name). To set multiple values for key fields, use a comma-delimited list as a text value, e.g. /setentryfield file=chatLore uid=123 field=key Shadowfang,sword,weapon.","/createentry file=bookName key=keyValue [content text]– creates a new record in the specified file (or a variable pointing to a file name) with the key and content (both of these arguments are optional) and passes the UID down the pipe, e.g. /createentry file=chatLore key=Shadowfang The sword of the king."]},{"l":"Valid entry fields","p":["(see below)","0 = AND ANY","0 = before main prompt","0 = System","1 = after main prompt","1 = NOT ALL","1 = User","2 = Assistant","2 = NOT ANY","2 = top of Author's Note","3 = AND ALL","3 = bottom of Author's Note","4 = in-chat at depth","5 = top of example messages","6 = bottom of example messages","Boolean (1/0)","Case-Sensitive","caseSensitive","comment","constant","Constant Status","content","depth","Depth Role","disable","Disabled Status","excludeRecursion","Field","key","keysecondary","List of strings","Logic","Logic values","Match Whole Words","matchWholeWords","Non-recursable","Number","Number (0-100)","Number (0-999)","Optional Filter","order","position","Position values","Primary Keywords","probability","role","Role values(Position = 4 only)","Scan Depth","scanDepth","selectiveLogic","String","Title / Memo","Trigger%","UI element","Value type"]},{"i":"example-1-read-a-content-from-the-chat-lorebook-by-key","l":"Example 1: Read a content from the chat lorebook by key"},{"i":"example-2-create-a-chat-lorebook-entry-with-key-and-content","l":"Example 2: Create a chat lorebook entry with key and content"},{"i":"example-3-expand-an-existing-lorebook-entry-with-new-information-from-the-chat","l":"Example 3: Expand an existing lorebook entry with new information from the chat"},{"l":"Text manipulation","p":["There's a variety of useful text manipulation utility commands to be used in various script scenarios.","/trimtokens— trims the input to the specified number of text tokens from the start or from the end and outputs the result to the pipe.","/trimstart— trims the input to the start of the first complete sentence and outputs the result to the pipe.","/trimend— trims the input to the end of the last complete sentence and outputs the result to the pipe.","/fuzzy— performs fuzzy matching of the input text to the list of strings, outputting the best string match to the pipe.","/regex name=scriptName [text]— executes a regex script from the Regex extension for the specified text. The script must be enabled."]},{"i":"arguments-for-trimtokens","l":"Arguments for /trimtokens","p":["direction sets the direction for trimming, which can be either start or end. Default: end.","limit sets the amount of tokens to left in the output. Can also specify a variable name containing the number. Required argument.","Unnamed argument is the input text to be trimmed."]},{"i":"arguments-for-fuzzy","l":"Arguments for /fuzzy","p":["list is a JSON-serialized array of strings containing the candidates. Can also specify a variable name containing the list. Required argument.","Unnamed argument is the input text to be matched. Output is one of the candidates matching the input most closely."]},{"l":"Autocomplete","p":["Autocomplete is enabled both on the chat input, and the large Quick Reply editor.","Autocomplete works anywhere in your input. Even with multiple piped commands and nested closures.","Autocomplete supports three ways of looking up matching commands ( User Settings-> STscript Matching).","Starts with The \"old\" way. Only commands that begin exactly with the typed value will show up.","Includes All commands that include the type value will show up. Example: When entering /delete, the commands /qr-delete and /qr-set-delete will show up in the autocomplete list (/qr- delete, /qr-set- delete).","Fuzzy All commands that can be fuzzy-matched against the typed value will show up. Example: When entering /seas, the command /sendas will show up in the autocomplete list (/ se nd as).","Command arguments are supported by autocomplete as well. The list will show up for required arguments automatically. For optional arguments, press Ctrl+ Space to open the list of available options.","When entering /: to execute a closure or QR, autocomplete will show a list of scoped variables and QRs.","Autocomplete has limited support for macros (in slash commands). Type {{ to get a list of available macros.","Use the up and down arrow keys to select an option from the list of autocomplete options.","Press Enter or Tab or click on an option to place the option at the cursor.","Press Escape to close the autocomplete list.","Press Ctrl+ Space to open the autocomplete list or toggle the selected option's details."]},{"l":"Parser Flags","p":["The parser accepts flags to modify its behavior. These flags can be toggled on and off at any point in a script and all following input will be evaluated accordingly. You can set your default flags in user settings."]},{"l":"Strict Escaping","p":["Changes with STRICT_ESCAPING enabled are as follows."]},{"l":"Pipes","p":["Pipes don't need to be escaped in quoted values."]},{"l":"Backslashes","p":["A backslash in front of a symbol can be escaped to provide the literal backslash followed by the functional symbol."]},{"l":"Replace Variable Macros","p":["This flag helps to avoid double-substitutions when the variable values contain text that could be interpreted as macros. The {{var::}} macros get substituted last and no further substitutions happen on the resulting text / variable value.","Replaces all {{getvar::}} and {{getglobalvar::}} macros with {{var::}}. Behind the scenes, the parser will insert a series of command executors before the command with the replaced macros:","call /let to save the current {{pipe}} to a scoped variable","call /getvar or /getglobalvar to get the variable used in the macro","call /let to save the retrieved variable to a scoped variable","call /return with the saved {{pipe}} value to restore the correct piped value for the next command"]},{"i":"quick-replies-script-library-and-auto-execution","l":"Quick Replies: script library and auto-execution","p":["Quick Replies is a built-in SillyTavern extension that provides an easy way to store and execute your scripts."]},{"l":"Configuring Quick Replies","p":["In order to get started, enable open the extensions panel (stacked blocks icon), and expand the Quick Replies menu.","Quick Reply","Quick Replies are disabled by default, you need to enable them first. Then you will see a bar appearing above your chat input bar.","You can set the displayed button text label (we recommend using emojis for brevity) and the script that will be executed when you click the button.","The number of buttons is controlled by the Number of slots settings (max = 100), adjust it according to your needs and click \"Apply\" when done.","Inject user input automatically recommended to be disabled when using STscript, otherwise it may interfere with your inputs, use the {{input}} macro to get the current value of the input bar in scripts instead.","Quick Reply presets allow to have multiple sets of predefined Quick Replies and switch between manually or by using the /qrset (name of set) command. Don't forget to click \"Update\" before switching to a different set to write your changes to the currently used preset!"]},{"l":"Manual execution","p":["Now you can add your first script to the library. Pick any free slot (or create one), type \"Click me\" into the left box to set the label, then paste this into the right box:","Then click 5 times on the button that appeared above the chat bar. Every click increments the variable clicks by one and displays a different message when the value equals 5 and resets the variable."]},{"l":"Automatic execution","p":["Open the modal menu by clicking the ⋮ button for the created command.","In this menu you can do the following:","Edit the script in a convenient full-screen editor","Hide the button from the chat bar, making it accessible only for auto-execution.","Enable automatic execution on one or more of the following conditions:","App startup","Sending a user message to the chat","Receiving an AI message in the chat","Opening a character or group chat","Triggering a reply from a group member","Activating a World Info entry using the same Automation ID","Provide a custom tool tip for the quick reply (text displayed when hovering over the quick reply in your UI)","Execute the script for test purposes","Commands are executed automatically only if the Quick Replies extension is enabled.","For example, you can display a message after sending five user messages by adding the following script and setting it to auto-execute on the user message."]},{"l":"Debugger","p":["A basic debugger exists inside the expanded Quick Reply editor. Set breakpoints with /breakpoint | anywhere in your script. When executing the script from the QR editor, the execution will be interrupted at that point, allowing you to examine the currently available variables, pipe, command arguments, and more, and to step through the rest of the code one by one.","QR Editor Debugger"]},{"l":"Calling procedures","p":["A /run command can call scripts defined in the Quick Replies by their label, basically providing the ability to define procedures and return results from them. This allows to have reusable script blocks that other scripts could reference. The last result from the procedure's pipe is passed to the next command after it.","Let's create two Quick Replies:","Label:","GetRandom","Command:","GetMessage","Clicking on the GetMessage button will call the GetRandom procedure which will resolve the {{roll}} macro and pass the number to the caller, displaying it to the user.","Procedures do not accept named or unnamed arguments, but can reference the same variables as the caller.","Avoid recursion when calling procedures as it may produce the \"call stack exceeded\" error if handled unadvisedly."]},{"l":"Calling procedures from a different Quick Reply preset","p":["You can call a procedure from a different quick reply preset using the a.b syntax, where a = QR preset name and b = QR label name","By default, the system will first look for a quick reply label a.b, so if one of your labels is literally \"QRpreset1.QRlabel1\" it will try to run that. If no such label is found, it will search for a QR preset name \"QRpreset1\" with a QR labeled \"QRlabel1\"."]},{"l":"Quick Replies management commands"},{"l":"Create Quick Reply","p":["/qr-create (arguments, [message])– creates a new Quick Reply, example: /qr-create set=MyPreset label=MyButton /echo 123","Arguments:","label- string - text on the button, e.g., label=MyButton","set- string - name of the QR set, e.g., set=PresetName1","hidden- bool - whether the button should be hidden, e.g., hidden=true","startup- bool - auto execute on app startup, e.g., startup=true","user- bool - auto execute on user message, e.g., user=true","bot- bool - auto execute on AI message, e.g., bot=true","load- bool - auto execute on chat load, e.g., load=true","title- bool - title / tooltip to be shown on button, e.g., title=My Fancy Button"]},{"l":"Delete Quick Reply","p":["/qr-delete (set=string [label])– deletes Quick Reply"]},{"l":"Update Quick Reply","p":["/qr-update (arguments, [message])– updates Quick Reply, example: /qr-update set=MyPreset label=MyButton newlabel=MyRenamedButton /echo 123","Arguments:","newlabel- string - new text fort the button, e.g. newlabel=MyRenamedButton","label- string - text on the button, e.g., label=MyButton","set- string - name of the QR set, e.g., set=PresetName1","hidden- bool - whether the button should be hidden, e.g., hidden=true","startup- bool - auto execute on app startup, e.g., startup=true","user- bool - auto execute on user message, e.g., user=true","bot- bool - auto execute on AI message, e.g., bot=true","load- bool - auto execute on chat load, e.g., load=true","title- bool - title / tooltip to be shown on button, e.g., title=My Fancy Button"]},{"i":"#","p":["qr-get- retrieves all of a Quick Reply's properties, eample: /qr-get set=myQrSet id=42"]},{"l":"Create or update QR preset","p":["/qr-presetupdate (arguments [label]) or /qr-presetadd (arguments [label])","Arguments:","enabled- bool - enable or disable the preset","nosend- bool - disable send / insert in user input (invalid for slash commands)","before- bool - place QR before user input","slots- int - number of slots","inject- bool - inject user input automatically (if disabled use {{input}})","Create a new preset (overrides existing ones), example: /qr-presetadd slots=3 MyNewPreset"]},{"l":"Add QR context menu","p":["/qr-contextadd (set=string label=string chain=bool [preset name])– add context menu preset to a QR, example: /qr-contextadd set=MyPreset label=MyButton chain=true MyOtherPreset"]},{"l":"Remove all context menus","p":["/qr-contextclear (set=string [label])– remove all context menu presets from a QR, example: /qr-contextclear set=MyPreset MyButton"]},{"l":"Remove one context menu","p":["/qr-contextdel (set=string label=string [preset name])– remove context menu preset from a QR, example: /qr-contextdel set=MyPreset label=MyButton MyOtherPreset"]},{"l":"Quick Reply value escaping","p":["|{} can be escaped with backslash in the QR message / command.","For example, use /qr-create label=MyButton /getvar myvar \\| /echo \\{\\{pipe\\}\\} to create a QR that calls /getvar myvar | /echo {{pipe}}."]},{"l":"Extension commands","p":["SillyTavern extensions (both built-in, downloadable and third-party) can add their own slash command. Below is just an example of the capabilities in the official extensions. The list may be incomplete, make sure to check /help slash for the most complete list of available commands.","/websearch (query)— searches snippets of the web pages online for the specified query and returns the result into the pipe. Provided by the Web Search extension.","/imagine (prompt)— generates an image using the provided prompt. Provided by the Image Generation extension.","/emote (sprite)— sets a sprite for the active character by fuzzy matching its name. Provided by the Character Expressions extension.","/costume (subfolder)— sets a sprite set override for the active character. Provided by the Character Expressions extension.","/music (name)— force changes a played background music file by its name. Provided by the Dynamic Audio extension.","/ambient (name)— force changes a played ambient sound file by its name. Provided by the Dynamic Audio extension.","/roll (dice formula)— adds a hidden message to the chat with the result of a dice roll. Provided by the D&D Dice extension."]},{"l":"UI interaction","p":["Scripts can also interact with SillyTavern's UI: navigate through the chats or change styling parameters."]},{"l":"Character navigation","p":["/random— opens a chat with the random character.","/go (name)— opens a chat with the character of the specified name. First, searches for the exact name match, then by a prefix, then by a substring."]},{"l":"UI styling","p":["/bubble— sets the message style to the \"bubble chat\" style.","/flat— sets the message style to the \"flat chat\" style.","/single— sets the message style to the \"single document\" style.","/movingui (name)— activates a MovingUI preset by name.","/resetui— resets the MovingUI panels state to their original positions.","/panels— toggles the UI panels visibility: top bar, left and right drawers.","/bg (name)— finds and sets a background using fuzzy names matching. Respect the chat background lock state.","/lockbg— locks the background image for the current chat.","/unlockbg— unlocks the background image for the current chat."]},{"l":"More examples"},{"i":"generate-chat-summary-by-ikaridevgit","l":"Generate chat summary (by @IkariDevGIT)"},{"l":"Buttons popup usage"},{"i":"get-nth-fibonaccis-number-using-binets-formula","l":"Get Nth Fibonacci's number (using Binet's formula)","p":["Hint: Set value of fib_no to the desired number"]},{"i":"recursive-factorial-using-closures","l":"Recursive Factorial (using closures)"}],[{"l":"函数调用","p":["函数调用允许通过让 LLM 使用结构化数据来为您的扩展添加动态功能，然后您可以使用这些数据触发扩展的特定功能。","此功能目前正在开发中。实现细节可能会发生变化。"]},{"l":"示例用例","p":["查询外部 API 以获取额外信息（新闻、天气、网络搜索等）。","根据用户输入执行计算或转换。","存储和回忆重要记忆或事实，包括 RAG 和数据库查询。","在对话中引入真正的随机性（掷骰子、抛硬币等）。"]},{"l":"官方支持使用函数调用的扩展","p":["图像生成（内置）- 根据用户提示生成图像。","网络搜索- 触发查询的网络搜索。","RSS- 从 RSS 源获取最新新闻。","AccuWeather- 从 AccuWeather 获取天气信息。","D&D Dice- 为 D&D 游戏掷骰子。"]},{"l":"前提条件和限制","p":["此功能仅适用于某些聊天补全源：OpenAI、Claude、MistralAI、Groq、Cohere、OpenRouter 和自定义 API 源。","文本补全 API 不支持函数调用，但一些本地托管的后端（如 Ollama 和 TabbyAPI）可以在聊天补全下以自定义 OpenAI 兼容模式运行。","必须首先由用户明确允许使用函数调用功能。这是通过在 AI 回应配置面板中启用\"启用函数调用\"选项来完成的。","不能保证 LLM 会执行任何函数调用。大多数都需要通过提示词进行明确的\"激活\"（例如，用户要求\"掷骰子\"、\"获取天气\"等）。","并非所有提示词都能触发工具调用。继续、扮演、背景（'安静'）提示词不允许触发工具调用。它们仍然可以在其响应中使用过去成功的工具调用。"]},{"l":"如何制作函数工具"},{"l":"检查功能是否受支持","p":["要确定是否支持函数工具调用功能，您可以从 SillyTavern.getContext() 对象调用 isToolCallingSupported。这将检查当前 API 是否支持函数工具调用以及设置中是否启用了该功能。以下是如何检查功能是否受支持的示例："]},{"l":"注册函数","p":["要注册函数工具，您需要从 SillyTavern.getContext() 对象调用 registerFunctionTool 函数并传递所需参数。以下是如何注册函数工具的示例："]},{"l":"取消注册函数","p":["要停用函数工具，您需要从 SillyTavern.getContext() 对象调用 unregisterFunctionTool 函数并传递要禁用的函数工具的名称。以下是如何取消注册函数工具的示例："]},{"l":"提示和技巧","p":["成功的工具调用会作为可见历史的一部分保存，并将在聊天 UI 中显示，因此您可以检查实际的参数和结果。","如果您不想在聊天历史中看到工具调用。如果您想用自定义 CSS 设置样式或隐藏它们，请针对 .mes 元素上的 toolCall 类，例如 .mes.toolCall { display: none; } 或 .mes.toolCall { color: #999; }。"]}],[{"l":"服务器插件","p":["服务器插件是一种扩展 SillyTavern 服务器功能的方式。它们可以添加新的 API 端点、处理程序和其他功能。"]},{"l":"创建插件","p":["在 plugins 目录中创建一个新目录。目录名称将成为插件的名称。","在插件目录中创建一个 index.js 文件。这是插件的入口点。","在 index.js 中导出一个包含以下方法的对象："]},{"l":"示例插件"},{"l":"启用插件","p":["要启用插件，请在 config.yaml 中添加以下内容："]},{"l":"插件 API","p":["插件可以访问以下 API：","app- Express 应用程序实例","express- Express 模块","config- 服务器配置对象","jsonwebtoken- JWT 模块，用于身份验证","path- Node.js path 模块","fs- Node.js fs 模块","logger- Winston 日志记录器实例"]}],[{"l":"编写扩展","p":["本指南将帮助您为 SillyTavern 创建扩展。"]},{"l":"基本结构","p":["扩展是一个包含以下文件的目录：","manifest.json- 扩展的元数据","index.js- 扩展的主要代码","其他资源文件（可选）"]},{"i":"manifestjson","l":"manifest.json"},{"i":"indexjs","l":"index.js"},{"l":"扩展类型","p":["扩展可以是以下类型之一：","chat- 添加聊天功能","character- 添加角色功能","message- 添加消息功能","context- 添加上下文功能","memory- 添加记忆功能","ui- 添加 UI 功能"]},{"l":"API"},{"l":"注册扩展","p":["选项：","name- 扩展名称","init- 初始化函数","settings- 设置函数（可选）","metadata- 元数据对象（可选）"]},{"l":"事件","p":["您可以监听以下事件："]},{"l":"设置","p":["您可以使用以下方法保存和加载设置："]},{"l":"UI","p":["您可以使用以下方法添加 UI 元素："]},{"l":"示例"},{"l":"简单的聊天扩展"},{"l":"带设置的扩展"},{"l":"最佳实践","p":["使用有意义的名称和版本号","提供清晰的文档","处理错误和异常","遵循代码风格指南","测试您的扩展","保持依赖项最新","提供示例和演示","使用语义化版本控制","Want to contribute your extensions to the official repository? Contact us!"]},{"l":"Examples","p":["See live examples of simple SillyTavern extensions:","https://github.com/city-unit/st-extension-example- basic extension template. Showcases manifest creation, local script imports, adding a settings UI panel, and persistent extension settings usage."]},{"l":"Bundling","p":["Extensions can also utilize bundling to isolate themselves from the rest of the modules and use any dependencies from NPM, including UI frameworks like Vue, React, etc.","https://github.com/SillyTavern/Extension-ReactTemplate- template repository of a barebone extension using React and Webpack.","To use relative imports from the bundle, you may need to create an import wrapper. Here's an example for Webpack:"]},{"i":"manifestjson-1","l":"manifest.json","p":["Every extension must have a folder in data/user-handle/extensions and have a manifest.json file which contains metadata about the plugin and a JS script file.","display_name is required. Displays in the \"Manage Extensions\" menu.","loading_order is optional. Higher number loads later.","requires specifies the required Extras modules dependencies. An extension won't be loaded unless the connected Extras API provides all of them.","optional specifies the optional Extras dependencies.","js is the main JS file reference, and is required.","css is an optional style file reference.","author is required. It should contain the name or contact info of the author(s).","auto_update is set to true if the extension should auto-update when the version of the ST package changes.","Downloadable extensions are mounted into the /scripts/extensions/third-party folder, so relative imports should be used based on that. Be careful about where you create your extension during development if you plan on installing it from your GitHub which overwrites the content in the third-party folder."]},{"l":"requires vs optional","p":["requires- extension could be installed, but will not be loaded until the user connects to the Extras API that provides all of the specified modules.","optional- extension could be installed and will always be loaded, but any of the missing Extras API modules will be highlighted in the \"Manage extensions\" menu.","To check which modules are currently provided by the connected Extras API, import the modules array from scripts/extensions.js."]},{"l":"Using getContext","p":["The getContext() function gives you access to the SillyTavern context:","Use this to interact with the main app state.","You can also use a globally defined window object: SillyTavern.getContext()."]},{"l":"Importing from other files","p":["Unless you're building a bundled extension, you can import variables and functions from other JS files.","For example, this code snippet will generate a reply from the currently selected API in the background:"]},{"l":"Important note","p":["Using imports from SillyTavern code is unreliable and can break at any time if the internal structure of ST's modules changes. getContext provides a more stable API.","If you're missing any of the functions/properties in getContext, please get in touch with the developers or send us a Pull Request!"]},{"i":"registering-slash-commands-new-way","l":"Registering slash commands (new way)","p":["While registerSlashCommand still exists for backward compatibility, new slash commands should now be registered through SlashCommandParser.addCommandObject() to provide extended details about the command and its parameters to the parser (and in turn to autocomplete and the command help)."]},{"i":"deprecated-registering-slash-commands-old-way","l":"(DEPRECATED) Registering slash commands (old way)","p":["Use registerSlashCommand() to register a new slash command:","Example of command execution:","Arguments explanation:","command- the main command name. It will be used in autocompletion and help commands.","callback- a function that will be executed when the command is triggered. A callback function can accept two arguments:","namedArgs- an object with named arguments","unnamedArgs- a string containing the unnamed argument","aliases- an array of alias strings. The command can be called using any of the aliases, but they won't be shown in the autocomplete but will be listed in the help command.","helpString- a string that will be displayed when the /help slash command is called. Must describe what your command does and which arguments it accepts. May contain HTML markup.","All registered commands can be used in STscript in any possible way.","In rare circumstances, the unnamed command argument can also receive a number so be sure to type check or convert if you expect a concrete type!"]},{"l":"Listening to event types","p":["Use eventSource.on() to listen for events:","The main event types are:","MESSAGE_RECEIVED","MESSAGE_SENT","CHAT_CHANGED","The rest can be found here."]},{"l":"Do Extras request","p":["The doExtrasFetch() function allows you to make requests to your SillyTavern Extra server.","For example, to call the /api/summarize endpoint:","getApiUrl() returns the base URL of the Extras serve.","The doExtrasFetch() function:","Adds the Authorization and Bypass-Tunnel-Reminder headers","Handles fetching the result","Returns the result (the response object)","This makes it easy to call your Extra's API from your plugin.","You can specify:","The request method: GET, POST, etc.","Additional headers","The body for POST requests","And any other fetch options"]}],[{"i":"国际化-i18n","l":"国际化 (i18n)","p":["SillyTavern 支持多种语言。本指南解释如何添加和管理翻译。","您可能来到这里是因为某些文本在您的语言中未翻译，这让您感到困扰。首先，我将向您展示我是如何修复繁体中文语言环境中的一些缺失翻译的。每个翻译缺失的原因都不同，这样您就能很好地了解如何修复自己的缺失翻译。","在第二部分，我们将探讨","SillyTavern 中的 i18n 工作原理，","编写翻译 和使用它们的代码，","查找缺失翻译 的调试功能，","添加 新语言，","以及 贡献您的更改。","如果您正在开发扩展或修改核心代码，请在编写 HTML 和 JavaScript 时考虑 i18n。这样，其他人就可以将您的工作翻译成他们的语言。","没有人能自己掌握 15 种语言。我们一起努力让 SillyTavern 对每个人都可访问。","世界上的每个人都应该能够在手机和电脑上使用自己的语言。"]},{"i":"让我们修复一些缺失的翻译","l":"让我们修复一些缺失的翻译！","p":["这 3 个问题都需要代码更改才能修复。如果您要添加新翻译，可能根本不需要修改代码。只需将翻译添加到 JSON 文件中即可。恰好最近有人向繁体中文 JSON 文件添加了大量缺失的翻译，所以剩下的问题都在代码中。在其他语言环境中，有很多缺失的翻译可以在不修改代码的情况下修复。"]},{"l":"Generate Image","p":["...我们可以将其添加到 JSON 文件中的\"Generate Image\"翻译之后。","\"Generate Image\"（生成图像）在繁体中文语言环境中未翻译。为什么？","generate-image-lang.png","generate-image-post.png","generate-image-pre.png","stop-generating-image-pre.png","stop-generating-post-2.png","为什么它没有显示出来？我们必须正确连接元素：","但是当我们打开 HTML 时，下面的 Stop Image Generation 是怎么回事？HTML 看起来不对。","右键点击元素并检查它。您会看到 HTML：","如果我们生成图像，然后在生成时打开魔杖菜单，我们会看到未翻译的文本。","它的 data-i18n 属性在哪里？它缺失了！让我们添加它。我们在源代码中找到它：","我们很幸运，字符串 Generate Image 在许多语言文件中都有，包括繁体中文。","日语：\"Stop Image Generation\": \"画像生成を停止\"","现在它可以工作了！重新加载页面看看。","简体中文：\"Stop Image Generation\": \"中止图像生成\"","繁体中文：\"Stop Image Generation\": \"終止圖片生成\"","经过与 Claude 的讨论，我们实际上将使用以下翻译：","这还不足以解决问题。繁体中文文件中没有\"Stop Image Generation\"的翻译。我们可以添加它！这是一个可能的翻译：","首先修复 HTML："]},{"l":"Generate Caption","p":["\"Generate Caption\"（生成说明）在繁体中文语言环境中未翻译。让我们修复它！","generate-image-post.png","它在哪里？检查元素。","原来这个 HTML 是由 JavaScript 生成的。让我们找到源代码。","我们首先要修复代码：","繁体中文文件中也没有\"Generate Caption\"的翻译。让我们添加它！","我们将使用以下翻译：","繁体中文：\"Generate Caption\": \"生成圖片說明\"","简体中文：\"Generate Caption\": \"生成图片说明\"","日语：\"Generate Caption\": \"画像説明を生成\"","generate-caption-post.png"]},{"l":"Inspect Prompts","p":["\"Inspect Prompts\"（检查提示词）在繁体中文语言环境中未翻译。为什么？ 这个有点复杂。文本是由 JavaScript 生成的，而且翻译缺失。","好吧，您知道吗...这两个短语都不在 i18n 文件中。让我们添加它们。","现在我们必须修复 JavaScript 代码。它必须使用 t 函数来获取翻译。","我们从 Claude 那里得到了这些建议。保留字符串，忽略代码。它们必须添加到 JSON 文件中。","我们将把这些合并到 JSON 文件中。","toggle-prompt-inspection-post-tt.png","关于那个工具提示很遗憾。问题在于代码没有使用 t 函数。","我们必须在扩展代码中修复这个问题。","我们还需要将翻译添加到 JSON 文件中。","提示检查器是一个独立的扩展，所以我们会向该仓库提交代码修复：https://github.com/SillyTavern/Extension-PromptInspector/pull/1","翻译将添加到主 SillyTavern 仓库。https://github.com/SillyTavern/SillyTavern/pull/3198","start-inspecting-post.png"]},{"l":"语言文件","p":["每种语言在 public/locales/ 目录下都有一个以其语言代码命名的 JSON 文件（例如， ru-ru.json）。","该文件包含键值对，其中：","键是原始英文文本或唯一标识符","值是翻译后的文本","示例："]},{"l":"翻译的工作原理","p":["应用程序中有两种使用翻译的方式：","HTML 元素：使用 data-i18n 属性","如果有可用的翻译，HTML 中的默认文本将被替换为翻译后的文本。","模板字符串：在 JavaScript 代码中使用 t 函数","这些字符串应该在保持 ${0}、${1} 等占位符不变的情况下进行翻译。","SillyTavern 使用带有 data-i18n 属性的 HTML 元素来标记可翻译的内容。使用这个属性有几种方式："]},{"l":"1. 翻译元素文本","p":["对于简单的文本内容：","这会将元素的文本内容替换为\"Role:\"的翻译。"]},{"l":"2. 翻译属性","p":["要翻译标题或占位符等属性：","[title] 前缀指示要翻译哪个属性。属性值的其余部分是将用作 JSON 文件中查找键的文本。程序员通常使用英文文本作为键，但这不是必需的。键可以是任何唯一标识符。","不过，原始英文文本必须存在于相应的属性中（ title=Insert prompt）。如果缺少翻译，它将用作后备。最值得注意的是，英语没有翻译文件。","这里是一个使用唯一标识符 no_items_text 作为键而不是英文文本的示例："]},{"l":"3. 每个元素的多个翻译","p":["某些元素需要同时翻译内容和属性，用分号分隔。最常见的模式是同时翻译元素的文本内容和其标题属性：","这会翻译：","使用键\"Authorize\"翻译元素的文本内容","使用键\"Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai\"翻译标题属性","注意， title 属性和元素的文本内容都以英语提供作为后备。","您也可以翻译多个属性：","您的语言文件中相应的翻译看起来像这样：","当页面加载时，系统会：","查找所有带有 data-i18n 属性的元素","解析任何属性前缀，如 [title] 或 [placeholder]","在您的语言的 JSON 文件中查找每个键","用翻译后的文本替换元素的内容或属性"]},{"l":"动态文本","p":["对于 JavaScript 代码中的动态文本，翻译使用以下方式之一：","带有 t 函数的模板字面量：","直接翻译函数："]},{"l":"变量占位符","p":["某些字符串包含使用 ${0}、${1} 等的动态值占位符：","在键和翻译中保持占位符相同。系统将用 presetName 的值替换 ${0} 等。"]},{"l":"查找缺失的翻译","p":["如果您不仅想修复某个特定的翻译问题，而是希望全面查找并修复所有缺失的翻译，这无疑是一个更具挑战性的任务。","虽然修复单个翻译已经很有价值，但若您希望系统性地解决所有翻译缺失问题，您将需要借助专门的工具来完成这项工作。"]},{"l":"SillyTavern-i18n","p":["https://github.com/SillyTavern/SillyTavern-i18n","用于处理前端本地化文件的工具。","功能：","自动从 HTML 文件添加新的待翻译项。","从本地化文件中删除缺失的项。","使用自动 Google 翻译来自动填充缺失的值。","按键对 JSON 文件进行排序。"]},{"l":"Inbuilt debug functions","p":["这些工具位于 用户设置> 调试菜单 下。"]},{"l":"获取缺失的翻译","p":["检测当前语言环境中缺失的本地化数据，并将数据输出到浏览器控制台。如果当前语言环境是英语，则搜索所有其他语言环境。","控制台将显示一个缺失翻译的表格，包含：","key：需要翻译的文本或标识符","language：您当前的语言代码","value：需要翻译的英文文本"]},{"l":"应用语言环境","p":["重新应用当前选择的语言环境到页面","它们无法捕获 JavaScript 代码中缺失的翻译","它们无法捕获 HTML 中缺失的 data-i18n 属性，它们只能捕获未翻译的键","getMissingTranslations 的代码中存在错误：键不应该带有 [title] 或 [placeholder] 前缀"]},{"l":"Adding a new language","p":["要添加对新语言的支持：","将您的语言添加到 public/locales/lang.json：","创建 public/locales/xx-xx.json 并添加您的翻译"]},{"l":"Contributing","p":["当您的翻译准备就绪时：","验证您的 JSON 文件是否有效","在应用程序中进行彻底测试","通过 GitHub 拉取请求提交"]}],[{"l":"管理","p":["尽管遵循了许多安全最佳实践，但 SillyTavern 服务器的安全性还不足以直接暴露在公共互联网上。","在确保采取适当的安全措施之前，切勿将任何实例托管到开放的互联网上。","对于因安全实施不当或不充分而导致未经授权访问造成的任何损害或损失，我们概不负责。","多用户","要与他人共享您的 SillyTavern 实例，您可以创建多个用户账户。每个用户都有自己的设置、扩展和数据。用户账户也可以设置密码保护。","远程访问","您可以从手机、平板电脑或其他计算机访问您的 SillyTavern 实例。","VPN 和隧道","要从互联网访问您的 SillyTavern 实例，您可以使用 VPN 或隧道服务，如 Cloudflare Zero Trust、ngrok 或 Tailscale。","反向代理","对于爱好者来说，您可以设置反向代理以从互联网访问您的 SillyTavern 实例。"]},{"l":"安全检查清单","p":["这只是一个建议。在将您的 ST 实例上线之前，请咨询 Web 应用程序安全专家。","保持操作系统和 Node.js 等运行时软件的更新。这将确保您的系统具有最新的安全补丁和修复程序，有助于防止潜在的漏洞。","使用白名单和网络防火墙。只允许受信任的 IP 范围访问服务器。","启用基本身份验证。它在您进入前端应用程序之前充当\"主密码\"。","或者，配置外部身份验证。一些已知的服务包括 Authelia 和 authentik。更多信息请参见 SSO 指南。","切勿让管理员账户无密码。如果您有任何未受保护的管理员账户，服务器会在启动时警告您。","在本地网络之外使用谨慎登录设置。这将对任何潜在的外部人员隐藏用户列表。","经常检查访问日志。它们会写入服务器控制台和 access.log 文件，并提供有关传入连接的信息，如 IP 地址和用户代理。","配置 HTTPS。对于本地主机服务器，您可以生成并使用自签名证书。否则，您可能需要部署代理 Web 服务器，如 Traefik 或 Caddy。","在以下指南中了解更多关于安全代理的信息： SillyTavern 的反向代理。"]}],[{"l":"配置文件","p":["本文档可能已过时、不完整或不准确。请参考您安装中的 默认 config.yaml 以获取最新的设置列表。","config.yaml 是 SillyTavern 服务器的主要配置文件，在 完成安装 后可以在仓库根目录中找到。它是一个 YAML 文件，包含各种设置，如网络设置、安全设置和后端特定选项。 对此文件的更改将在重启服务器后生效。","在 更新仓库 后运行 npm install（或具体来说， post-install.js 脚本）时，上游版本中添加的新设置将自动填充默认值。然后您可以根据需要修改这些设置。","对于嵌套设置，使用点表示法来表示层次结构。例如， protocol.ipv6: false 指的是 protocol 部分下的 ipv6 设置，其值为 false。"]},{"l":"数据配置","p":["./data","100","cardsCacheCapacity","dataRoot","false","skipContentCheck","true, false","任何有效的目录路径","任何正整数","允许的值","已解析角色卡可以使用的最大内存量（MB）","描述","用户数据存储的根目录","设置","跳过新的默认内容检查","默认值"]},{"l":"网络配置","p":["8000","DNS 解析优先使用 IPv6","dnsPreferIPv6","false","listen","port","protocol.ipv4","protocol.ipv6","true","true, false","任何有效的端口号（1-65535）","允许的值","启用在 IPv4 协议上监听","启用在 IPv6 协议上监听","启用监听传入连接","描述","服务器监听端口","设置","默认值"]},{"l":"安全配置","p":["[::1, 127.0.0.1]","allowKeysExposure","disableCsrfProtection","enableCorsProxy","enableForwardedWhitelist","false","securityOverride","true","true, false","whitelist","whitelistMode","允许在 UI 中暴露 API 密钥","允许的 IP 地址列表","允许的值","启用 CORS 代理中间件","启用 IP 白名单过滤","描述","有效 IP 地址数组","检查转发头中的白名单 IP","禁用 CSRF 保护（不推荐）","禁用启动安全检查（不推荐）","设置","默认值"]},{"l":"用户认证","p":["''（自动生成）","86400（24小时）","autheliaAuth","basicAuthMode","basicAuthUser.password","basicAuthUser.username","cookieSecret","enableDiscreetLogin","enableUserAccounts","false","password","perUserBasicAuth","sessionTimeout","true, false","user","任何字符串","任何数字（-1 禁用，0 浏览器关闭时，>0 超时）","使用账户凭据进行基本认证","允许的值","启用基于 Authelia 的自动登录。参见： SSO","启用基本认证","启用多用户模式","在登录屏幕隐藏用户列表","基本认证密码","基本认证用户名","描述","用于签名会话 cookie 的密钥","用户会话超时时间（秒）","设置","默认值"]},{"l":"请求代理配置","p":["[localhost, 127.0.0.1]","false","null","requestProxy.bypass","requestProxy.enabled","requestProxy.url","true, false","主机名/IP 数组","代理服务器 URL","允许的值","启用出站请求代理","描述","有效的代理 URL（如 socks5://username:password@example.com:1080）","绕过代理的主机","设置","默认值"]},{"l":"自动运行配置","p":["-1","-1（使用服务器端口），任何有效的端口号","auto","auto，任何有效的主机名（如 localhost， st.example.com）","autorun","autorunHostname","autorunPortOverride","avoidLocalhost","false","true","true, false","允许的值","启动时自动打开浏览器","描述","自动运行打开浏览器时使用的主机名","覆盖浏览器自动运行的端口","设置","避免自动运行使用 'localhost'","默认值"]},{"l":"缩略图配置","p":["[160, 90]","[96, 144]","0-100","95","JPEG 缩略图质量","jpg","jpg, png","thumbnails.dimensions.avatar","thumbnails.dimensions.bg","thumbnails.enabled","thumbnails.format","thumbnails.quality","true","true, false","两个数字的数组（宽度，高度）","允许的值","启用缩略图生成","头像缩略图尺寸","描述","缩略图的图像格式","背景缩略图尺寸","设置","默认值"]},{"l":"备份配置","p":["-1","10000","50","backups.chat.enabled","backups.chat.maxTotalBackups","backups.chat.throttleInterval","backups.common.numberOfBackups","true","true, false","任何正整数","任何正整数或 -1","允许的值","启用自动聊天备份","备份节流间隔（毫秒）","描述","要保留的最大总聊天备份数","要保留的备份数量","设置","默认值"]},{"l":"扩展配置","p":["Cohee/distilbert-base-uncased-go-emotions-onnx","Cohee/jina-embeddings-v2-base-en","enableDownloadableTokenizers","enableExtensions","enableExtensionsAutoUpdate","extras.captioningModel","extras.classificationModel","extras.disableAutoDownload","extras.embeddingModel","extras.speechToTextModel","extras.textToSpeechModel","false","true","true, false","Xenova/speecht5_tts","Xenova/vit-gpt2-image-captioning","Xenova/whisper-small","允许的值","启用 UI 扩展","启用按需分词器下载","描述","有效的模型 ID","用于分类的 HuggingFace 模型 ID","用于图像说明的 HuggingFace 模型 ID","用于嵌入的 HuggingFace 模型 ID","用于文本转语音的 HuggingFace 模型 ID","用于语音转文本的 HuggingFace 模型 ID","禁用自动模型下载","自动更新扩展","设置","默认值"]},{"l":"服务器插件","p":["设置","描述","默认值","允许的值","enableServerPlugins","启用服务器端插件","false","true, false"]},{"l":"API 集成设置"},{"l":"OpenAI 配置","p":["设置","描述","默认值","允许的值","promptPlaceholder","空提示的默认消息","[Start a new chat]","任何字符串","openai.randomizeUserId","API 调用随机化用户 ID","false","true, false","openai.captionSystemPrompt","说明完成的系统消息"]},{"l":"MistralAI 配置","p":["设置","描述","默认值","允许的值","mistral.enablePrefix","启用回复预填充。 前缀将在响应中回显","false","true, false"]},{"l":"Ollama 配置","p":["设置","描述","默认值","允许的值","ollama.keepAlive","模型保持活动时间（秒）","-1","-1（无限期）， 0（立即卸载），正整数"]},{"l":"Claude 配置","p":["重要！","请谨慎使用，仅在提示前缀是静态的且在请求之间不变时使用。{{random}} 宏、知识库、向量、摘要等可能会使缓存失效，您只会在缓存未命中时浪费金钱。行为可能不可预测，且不能也不会做出任何保证。","参见： 提示缓存","设置","描述","默认值","允许的值","claude.enableSystemPromptCache","启用系统提示缓存","false","true, false","claude.cachingAtDepth","启用消息历史缓存","-1","-1（禁用）， 0 或正整数"]},{"l":"DeepL 配置","p":["设置","描述","默认值","允许的值","deepl.formality","翻译正式程度","default","default, more, less, prefer_more, prefer_less"]}],[{"l":"多用户模式","p":["多用户模式允许多人使用同一个 SillyTavern 服务器。每个用户都有自己的设置、扩展和数据。用户账户也可以设置密码保护。","用户密码为多用户设置中的用户提供基本的隐私保护。它们不是安全功能，不应该被视为安全功能。所有用户数据（包括聊天历史、API 密钥和其他敏感信息）都以明文形式存储在服务器上。任何有权访问服务器文件系统的人都可以查看和修改这些数据。 不要在公共服务器上或与不受信任的用户一起使用 SillyTavern。"]},{"l":"配置","p":["要启用和使用多用户模式，请编辑 config.yaml 文件：","当用户账户设置被禁用时，会使用 default-user 后备管理员账户来存储用户数据。","当谨慎登录设置被禁用时，活动用户列表会显示在登录屏幕上。如果启用，用户必须手动输入他们的标识符。","您不能从用户列表中_删除_ default-user 账户，因为如果 enableUserAccounts 设置为 false，它会用于提供用户数据。但您可以_禁用_它以将其从列表中隐藏并禁止登录。"]},{"l":"用户标识符","p":["标识符是用户的唯一标识。它只能由小写字母、数字和破折号组成。","用户数据目录的路径采用以下模式：%DATA_ROOT%/%USER_HANDLE%。","有效用户标识符的示例：","default-user","juan555","flux-the-cat","cool-guy1337"]},{"l":"角色","p":["管理员- 可以管理（创建、删除、修改）其他用户。","用户- 不能管理其他用户。","除了有管理面板访问权限外，两种用户角色在功能上完全相同，可以不受任何限制地使用 SillyTavern 的全部功能。用户权限的实现尚待确定。","所有用户账户首先都是作为普通用户创建的，如果需要，可以晋升为管理员。"]},{"l":"登录屏幕","p":["您可以在这里选择要使用的用户账户。根据 enableDiscreetLogin 配置值有两种样式。","当您只有一个活动用户且该用户没有密码保护时，登录屏幕会被跳过且不显示。"]},{"l":"用户档案","p":["您可以使用顶部菜单栏中\"用户设置\"面板下的\"账户\"按钮访问账户自我管理菜单。","显示名称 - 用于登录屏幕，可以更改。与角色无关，对 AI API 不可见 - 您仍然可以使用任意数量的角色。","头像 - 用于登录屏幕。您可以使用自定义图片、默认角色图片（如果已设置）或最后使用的角色图片。","密码 - 锁定图标反映账户保护状态（开锁 = 无密码）。可以使用\"更改密码\"按钮设置、更改或删除密码。","设置快照 - 访问和查看您的 settings.json 文件的备份，可以创建或恢复快照。","下载备份 - 下载您的用户数据文件夹的存档。","重置设置 - 重置为出厂默认设置，同时保留其他数据（角色、聊天）不变。"]},{"l":"密码恢复","p":["可以从登录屏幕恢复密码。您需要访问服务器控制台以获取一次性恢复代码（由 4 位数字组成）。","或者，您可以使用 SillyTavern 服务器中的实用程序脚本，通过提供用户标识符来重置密码。"]}],[{"i":"单点登录-sso","l":"单点登录 (SSO)","p":["SSO 允许您创建用户并使用登录门户来保护您想要保护的多个网站。虽然设置比较复杂，但这是一个很好的方式来学习 SSO 并更好地保护您在互联网上的 ST 实例。","Authelia 和 Authentik 是可以与 SillyTavern 一起使用的开源 SSO 提供商。"]},{"l":"使用 SSO 登录","p":["如果您的 SSO 提供的用户名与 SillyTavern 用户账户的用户名完全匹配，您可以通过 SSO 以该用户身份登录 SillyTavern。","要实现这一点，请在 config.yaml 中启用 autheliaAuth。","这增强或替代了 多用户模式 设置中内置的 密码管理 组件。"]},{"l":"替换 HTTP BA","p":["SSO 还可以替换 HTTP 基本认证 作为 远程连接 的访问控制机制。","这是推荐的，因为 SSO 提供比 HTTP BA 更好的安全性和功能。","要使用 SSO 提供商来替代 HTTP BA，请在 config.yaml 中启用 securityOverride。否则，SillyTavern 将 拒绝启动。"]}],[{"l":"远程连接","p":["最常见的情况是人们想在同一个 WiFi 网络内通过手机使用 SillyTavern，而 PC 运行着 ST 服务器。","这也是允许从本地网络外部进行远程连接的第一步。","您不应该使用端口转发来将 ST 服务器暴露给互联网。相反，应该使用 VPN 或隧道服务，如 Cloudflare Zero Trust、ngrok 或 Tailscale。更多信息请参见 VPN 和隧道 指南。","在确保采取适当的安全措施之前，切勿将任何实例托管到开放的互联网上。","对于因安全实施不当或不充分而导致未经授权访问造成的任何损害或损失，我们概不负责。"]},{"l":"允许远程连接","p":["默认情况下，ST 服务器只接受来自运行它的机器（localhost）的连接。要允许它监听来自其他设备的连接，请在 config.yaml 中将 listen 选项设置为 true。","本文档中对 config.yaml 的所有修改都指的是 SillyTavern 根目录中的那个（/SillyTavern/config.yaml），而不是 /SillyTavern/default/config.yaml。","当 ST 正在监听远程连接时，您应该在控制台中看到这条消息：","以及一些关于这意味着什么的解释。","当 ST 没有 监听远程连接时，您应该在控制台中看到这条消息："]},{"l":"访问控制配置","p":["启用远程连接监听后，您必须至少配置一种访问控制方法。否则，服务器将无法启动。"]},{"l":"基于白名单的访问控制","p":["要通过白名单启用访问控制，请编辑 SillyTavern 根目录中的 config.yaml 文件（/SillyTavern/config.yaml）：","至少启动一次 SillyTavern 以生成必要的配置文件。","在文本编辑器中打开 /SillyTavern/config.yaml。","找到 whitelist 部分并添加您希望允许的 IP 地址：","分别列出每个 IP 地址。","确保包含 127.0.0.1，否则您将无法从主机连接。","支持单个 IP、CIDR 掩码（如 10.0.0.0/24）和通配符（*）范围。","保存 config.yaml 文件。","重启您的 SillyTavern 服务器。"]},{"i":"configyaml-白名单配置示例","l":"config.yaml 白名单配置示例","p":["允许本地网络上的任何设备：","如果不确定您的本地网络地址范围，请使用上面的白名单。","允许两个特定设备连接：","允许 192.168.0.* 子网上的任何设备连接："]},{"l":"禁用基于白名单的访问控制","p":["要禁用通过白名单的访问控制：","在 /SillyTavern/config.yaml 中将 whitelistMode 设置为 false。","删除或重命名 SillyTavern 基本安装文件夹中的 whitelist.txt（如果存在）。","重启您的 SillyTavern 服务器。"]},{"i":"不推荐使用-whitelisttxt","l":"不推荐：使用 whitelist.txt","p":["然而，由于所有其他配置都在 config.yaml 中管理，而 whitelist.txt 可能会遇到权限问题或被锁定，系统可能会悄悄地恢复使用 config.yaml 白名单。","直接编辑 config.yaml 既简单又可靠。","如果您仍然更喜欢使用 whitelist.txt：","在 SillyTavern 基本安装文件夹中创建一个名为 whitelist.txt 的新文本文件。","在文本编辑器中打开它并添加允许的 IP 地址。","保存文件并重启您的 SillyTavern 服务器。"]},{"i":"whitelisttxt-配置示例","l":"whitelist.txt 配置示例","p":["这允许本地网络上的任何设备连接。"]},{"l":"通过 HTTP 基本认证进行访问控制","p":["HTTP 基本认证不提供强大的安全性。","没有速率限制来防止暴力攻击。如果这是一个问题，建议使用具有 TLS 和速率限制的反向代理，以及专用的 认证服务。","当客户端通过 HTTP 连接时，服务器将要求用户名和密码。 这仅在启用远程连接（listen: true）时有效。","要启用 HTTP BA，在 SillyTavern 基本目录中打开 config.yaml 并搜索 basicAuthMode。将 basicAuthMode 设置为 true 并设置用户名和密码。注意：只有在 ST 至少执行过一次后， config.yaml 才会存在。","或者，您可以按如下方式启用基本认证：","在这种 perUserBasicAuth 模式下，基本认证的用户名和密码将与任何有密码的有效多用户账户相同。此外，SillyTavern 将直接登录到该账户。 在启用 perUserBasicAuth 之前，请确保您有一个带密码的账户。","保存文件，如果 SillyTavern 已经在运行，请重启它。连接到您的 ST 时，系统应该会提示您输入用户名和密码。用户名和密码都以明文传输。如果您担心这一点，可以通过 HTTPS 提供 ST 服务。"]},{"l":"连接到您的 SillyTavern 实例"},{"l":"获取 ST 主机的 IP 地址","p":["设置白名单后，您需要 ST 主机设备的 IP。","如果 ST 主机设备在同一个 wifi 网络上，您将使用 ST 主机的内部 wifi IP：","对于 Windows：Windows 按钮 > 在搜索栏中输入 cmd.exe> 在控制台中输入 ipconfig，按 Enter > 查找 IPv4 列表。","如果您（或其他人）想在不在同一网络上时连接到您托管的 ST，您需要 ST 主机设备的公共 IP。","使用 ST 主机设备时，访问 此页面 并查找 IPv4。这就是您从远程设备连接时要使用的地址。"]},{"l":"连接到 ST 服务器","p":["无论您在您的情况下得到了什么 IP，您都将在远程设备的网络浏览器中输入该 IP 地址和端口号。","同一 wifi 网络上的 ST 主机的典型地址看起来像：","http://192.168.0.5:8000","使用 http:// 而不是 https://"]},{"l":"连接日志","p":["新的服务器连接会显示在控制台窗口中，并记录在 SillyTavern 基本目录的 access.log 文件中。","来自服务器所在机器上的浏览器的控制台消息看起来像：","来自与服务器在同一网络上的不同机器上的浏览器的控制台消息可能看起来像：","如果连接被拒绝，控制台消息将看起来像：","access.log 将包含带有时间戳的连接信息，但不包含连接是否被接受或拒绝的信息。"]},{"l":"故障排除","p":["仍然无法连接？","如果连接尝试 出现在控制台中，但被禁止，这是一个 白名单问题。","如果 ST 正在监听远程连接但连接尝试没有出现在控制台中，这是一个 网络问题。","如果 ST 没有监听远程连接，这是一个 读取问题。"]},{"l":"网络问题","p":["在 Windows 上，应用程序可能被应用程序防火墙阻止。最快的解决方法是卸载并重新安装 node.js，当防火墙提示时，允许它访问网络。否则，您需要手动允许 node.js 应用程序通过 Windows 应用程序防火墙。","在 Windows 11 上，在设置 > 网络和 Internet > 以太网中启用私有网络配置文件类型。这对 Windows 11 来说非常重要，否则，即使有上述防火墙规则，您也无法连接。","在 Linux 上，您可能需要允许端口通过防火墙。执行此操作的命令是 sudo ufw allow 8000。这将允许端口 8000 上的流量。","不要修改路由器上的端口转发设置。这对于在本地网络内访问 ST 不是必需的，而且可能会将您的服务器暴露给互联网。","如果您正在尝试从 本地网络外部 访问您的 ST 服务器，并且它不工作，请确定问题是出在远程设备和隧道/VPN 端点之间，还是在服务器上的隧道端点和 ST 服务之间。否则，您将花费大量时间排除错误的问题。"]},{"l":"HTTPS"},{"i":"使用-tlsssl-启动-sillytavern","l":"使用 TLS/SSL 启动 SillyTavern","p":["要加密与您的 ST 实例之间的流量，请使用 --ssl 标志启动服务器。","示例：","默认情况下，ST 将在 certs 文件夹中搜索您的证书。如果您的文件位于其他位置，您可以使用 --keyPath 和 --certPath 参数。","The user you're running SillyTavern with requires read permissions on the certificate files."]},{"l":"How to get a certificate","p":["The simplest, quickest way to get a certificate is by using certbot."]}],[{"l":"VPN 和隧道","p":["VPN 和隧道是一种从世界任何地方安全访问您的家庭网络的方式。本指南将向您展示如何使用 VPN 或隧道从任何地方访问您的 SillyTavern 实例。"]},{"l":"方法","p":["使用 自建 VPN。","许多路由器都具有在路由器管理页面中托管 VPN 服务器（主要是 OpenVPN 或 WireGuard）的功能。请参考您的路由器手册来设置 VPN 并将您的设备添加到 VPN 中。连接后，只需访问您为 SillyTavern 设置的私有 IP 地址即可正常连接。对用户和 Windows 使用来说都更简单。","使用 Cloudflare Zero Trust。","Cloudflare Zero Trust 是 Cloudflare 中的一项免费组织功能，允许您添加 50 个用户。这将通过 Cloudflare 代理您的流量，通过使用 cloudflared 将您的 ST PC 添加为隧道，您可以像在家一样连接到您的 ST 实例。","请注意，在创建隧道后，您需要添加到路由器私有 IP 地址的路由，并计算 IP CIDR 值，以便使用 Cloudflare Zero Trust 在移动中获得完整的本地访问权限。","使用独立的 Cloudflare 或 ngrok 隧道。","与 AI 后端可以连接的方式类似，您也可以通过 Cloudflare 隧道连接您的 ST 实例并打开 Cloudflare 隧道页面。但是，每次您想要在移动中使用 ST 时，都必须复制并粘贴由 Cloudflare/NGROK 生成的每个新链接。","使用 Tailscale。","Tailscale 是一个 VPN 提供商，可以实现与您的 PC 的安全远程连接。"]},{"l":"Tailscale 设置","p":["Tailscale 是一个 VPN 提供商，可以实现与您的 PC 的安全远程连接。Tailscale 服务器有一个开源实现，您也可以使用 Headscale 托管服务器，但这超出了本教程的范围。"]},{"l":"1. 创建账户","p":["访问 Tailscale 的网站 并创建一个新账户。","注意： 对于单人日常使用，Tailscale 将永久免费。如果您担心隐藏费用，只需不添加任何支付选项即可。"]},{"l":"2. 设置客户端","p":["访问 Tailscale 的下载页面 并在运行 SillyTavern 的设备和您想要从远程位置使用的设备上下载客户端/应用程序。","在两个设备上都使用您之前创建的账户登录。","访问 Tailscale 的管理页面 并批准两个设备。","记下两个已连接设备的名称。"]},{"l":"3. 将您的设备添加到白名单","p":["按照 管理白名单 IP 的说明，将您的连接设备的机器名称（您想要用来使用 SillyTavern 的设备）添加到 SillyTavern 的白名单中。"]},{"l":"4. 连接","p":["现在，无论何时您想要从任何地方使用 SillyTavern，您只需要：","在托管 SillyTavern 的 PC 和想要远程使用它的设备上都打开 Tailscale。","在想要连接的设备上打开浏览器，访问 http://运行 st 的 PC 的机器名称:8000/"]},{"i":"5-与朋友共享-sillytavern-实例可选","l":"5. 与朋友共享 SillyTavern 实例（可选）","p":["告诉您的朋友创建他们自己的 Tailscale 账户并在他们的设备上下载客户端。","访问 Tailscale 的管理页面。","将鼠标悬停在托管 SillyTavern 的 PC 的三点按钮上并点击\"共享...\"，或点击三点按钮并点击\"共享设置...\"。","取消选中\"允许用作出口节点\"（除非您想让您的朋友能够通过您的 PC 路由他们的所有互联网流量）。","通过电子邮件发送链接，或切换到\"复制共享链接\"标签，点击相同文本的大蓝色按钮，并以其他方式将其发送给您的朋友。","点击您的共享链接后，您的朋友将在他们的 Tailscale 网络中看到您的 PC 出现。","按照上一步中的说明，将您用来访问 SillyTavern 的相同链接发送给您的朋友。","注意： 这将给予您的朋友对您 PC 上运行的任何本地服务（如 SillyTavern、automatic1111 等）的完全访问权限。只有在您真正信任您的朋友时才这样做。"]}],[{"l":"反向代理","p":["本节 不 涉及 OpenAI/Claude 反向代理。这仅涉及 HTTP/HTTPS 反向代理。","Termux 的设置让您感到困惑吗？您是否厌倦了在每个设备上更新和安装 ST？想要组织您的聊天和角色吗？好消息是，您很幸运。本指南将_希望_涵盖如何在您的 PC 上托管 SillyTavern，让您可以从任何地方连接，并在同一台用于运行 AI 模型的 PC 上与您的机器人聊天！","本指南 不适合 初学者。这将非常技术性。"]},{"l":"公平警告","p":["本指南不适用于 Windows 用户。我们建议使用 Linux 虚拟机或 WSL2 来按照本指南操作。","您必须具备以下先验知识：","Linux 控制台命令","DNS 记录","公共 IP 地址","Docker","您需要为自己购买一个域名，并为您的 SillyTavern 页面配置一个 CNAME。我们建议在 Cloudflare 上添加或购买域名，因为本指南将介绍如何使用 Cloudflare 本身来完成这项工作。"]},{"l":"安装"},{"i":"linux裸机-sillytavern","l":"Linux（裸机 SillyTavern）","p":["A","cd 进入 appdata/traefik，使用 nano 或类似的编辑器，创建一个名为 config.yml 的文件并粘贴以下内容。将 PRIVATE_IP 替换为您获得的私有 IP，将 silly.DOMAIN.com 替换为您的子域名和域名页面的名称，然后保存文件。","cd 进入 secrets/cloudflare，使用 nano 或类似的编辑器，创建一个名为 CF_DNS_API_KEY 的文件并在其中粘贴您的密钥。","CNAME","DOMAIN.com","N/A","PUBLIC_IP","silly","TTL","www","Zone -> DNS -> Edit","Zone -> Zone -> Read","不要 安装 Docker Desktop。","代理状态","使用 ifconfig 或从路由器获取计算机的私有 IP。","使用 nano 或类似的编辑器，创建一个名为 docker-compose.yaml 的文件并粘贴以下内容。之后保存文件。","使用 nano 或类似的编辑器，创建一个名为 traefik.yml 的文件并粘贴以下内容。将模板电子邮件替换为您自己的电子邮件，然后保存文件。","使用 touch 创建一个 acme.json 文件，并将其权限设置为 600。","使用以下命令运行 Docker Compose：","创建另一个 CNAME 类型的记录，然后点击 Save。以下是它在 Cloudflare 仪表板上应该显示的示例。","名称（必填）","在 docker 文件夹内创建一个名为 appdata 的文件夹，在 appdata 内创建 traefik。之后进入 appdata/traefik 文件夹。","在 docker 文件夹内创建一个名为 secrets 的文件夹，在 secrets 内创建 cloudflare。","在启用 perUserBasicAuth 之前，确保您有一个带有有效密码的多用户设置。","复制给您的令牌密钥并将其存储在安全的地方。","大多数住宅/家庭网络使用 动态 IP，这些 IP 在使用数月后会更新。如果您有动态 IP，请使用 DDClient 或记得经常在 Cloudflare 仪表板上检查和更改您的公共 IP。","如果几分钟后什么都没有发生，请检查 Traefik 的容器日志是否有任何可能的错误。","对于 Linux，我们将通过 Traefik 反向代理 SillyTavern。还有其他选项，如 NGINX 或 Caddy，但在本指南中，我们将使用 Traefik，因为这是我们自己使用的。","尽情享受！:D","已代理","建议将您的私有 IP 设置为静态 IP。请参考您的路由器手册或 Google 来配置静态 IP。","或者使用 SillyTavern 账户作为用户名和密码：","执行 chown，将 替换为您的 Linux 用户名，以设置 docker 文件夹中的权限。","按照 此处 的 Docker 安装后指南中的 以非 root 用户身份管理 Docker 步骤进行操作。","按照 此处 的 Docker 安装指南安装 Docker。","点击 Continue to summary，然后点击 Create Token。","点击 Create Token，然后点击 Create Custom Token，确保您给予令牌以下权限。","登录 Cloudflare 并点击您的域名，然后点击 Get your API token。","目标（必填）","确保将默认用户名和密码更改为您能记住的强密码。","等待几分钟，然后打开您为 ST 创建的域名页面。最后，您应该能够从任何地方只使用一个 URL 和一个账户就能打开 SillyTavern。","类型","自动","返回到 docker 文件夹。","返回到您的域名页面并转到 DNS。使用 Add record 创建新记录，并创建两个如下所示的 A 类型密钥。将 PUBLIC_IP 替换为您自己的公共 IP，然后点击 Save。","进入 Linux 的根文件夹并创建一个名为 docker 的新文件夹。","进入您的 SillyTavern 文件夹并编辑 config.yaml 以启用监听模式和基本认证，同时禁用 whitelistMode。","通过 Google 搜索 what's my ip 获取调制解调器的公共 IP。"]},{"i":"linuxdocker-sillytavern","l":"Linux（Docker SillyTavern）","p":["A","Auto","cd into secrets/cloudflare and using nano or a similar editor, create a file named CF_DNS_API_KEY and paste your key inside.","Click on Continue to summary followed by Create Token.","CNAME","Copy the Token Key given to you and store it somewhere secure.","Create another record of the CNAME type, then click Save. Here is an example on how it should appear on the Cloudflare dashboard.","DOMAIN.com","Enjoy! :D","Git clone SillyTavern into the docker folder.","Go to your SillyTavern folder ( appdata/sillytavern/config) and edit config.yaml to enable listen mode and basic authentication, whilst disabling whitelistMode.","If nothing happens after several minutes, check the container logs for Traefik for any possible errors.","Make sure to change the default username and password to something strong that you can remember.","N/A","Name (required)","Proxied","Proxy Status","PUBLIC_IP","Return to your domain page and go to DNS. Create a new record using Add record and create two A type keys like the ones below. Replace PUBLIC_IP with your own public IP and the example domain with your domain, then click Save.","Run Docker Compose using the following commands:","silly","Start the SillyTavern Docker container again.","Stop the SillyTavern Docker container.","Target (required)","TTL","Type","Using nano or a similar editor, create a file name docker-compose.yaml and paste the following. Replace silly.DOMAIN.com with the subdomain you added above, the save the file afterwards.","Wait a few minutes, then open your domain page you made for ST. At the end of it, you should be able to open SillyTavern from anywhere you go just with one URL and one account.","www","Zone -> DNS -> Edit","Zone -> Zone -> Read","按照 ** Linux（裸机 SillyTavern）** 的步骤 1-11 操作。","点击 Create Token，然后点击 Create Custom Token，确保您给予令牌以下权限。","登录 Cloudflare 并点击您的域名，然后点击 Get your API token。","请注意，我们在裸机上运行 SillyTavern 而不是 Docker。这是我们在 Docker 上使用其他 Docker 容器与 ST 一起使用时的粗略想法。"]},{"l":"Updating your Cloudflare DNS","p":["DDClient allows you to sync your public IP to Cloudflare in the situation that your ISP changes it, allowing you to continue accessing your ST instance as if nothing ever happened."]}],[{"l":"License and credits","p":["This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.","See the GNU Affero General Public License for more details.","Original TavernAI 1.2.8 by Humi: MIT License"]},{"i":"pre-v190-contributors","l":"Pre-v1.9.0 Contributors","p":["The git commit history was squashed to the state of release 1.9.0.","Unfortunately, losing commit history also means losing the code contribution history. If you contributed to the SillyTavern development and want to see yourself credited in the README file and Docs website, please get in touch with us!"]},{"l":"Documentation Contributors","p":["Click the image below to see the full list of SillyTavern documentation contributors.","Contributors"]}]]